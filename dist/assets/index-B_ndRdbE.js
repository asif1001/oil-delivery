var E_=t=>{throw TypeError(t)};var Vp=(t,e,n)=>e.has(t)||E_("Cannot "+n);var G=(t,e,n)=>(Vp(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?E_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(Vp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ge=(t,e,n)=>(Vp(t,e,"access private method"),n);var rd=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return G(t,e,r)}});function zP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wy(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vb={exports:{}},yf={},wb={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gu=Symbol.for("react.element"),BP=Symbol.for("react.portal"),$P=Symbol.for("react.fragment"),WP=Symbol.for("react.strict_mode"),HP=Symbol.for("react.profiler"),qP=Symbol.for("react.provider"),KP=Symbol.for("react.context"),GP=Symbol.for("react.forward_ref"),QP=Symbol.for("react.suspense"),YP=Symbol.for("react.memo"),XP=Symbol.for("react.lazy"),b_=Symbol.iterator;function ZP(t){return t===null||typeof t!="object"?null:(t=b_&&t[b_]||t["@@iterator"],typeof t=="function"?t:null)}var _b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xb=Object.assign,Eb={};function _l(t,e,n){this.props=t,this.context=e,this.refs=Eb,this.updater=n||_b}_l.prototype.isReactComponent={};_l.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_l.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bb(){}bb.prototype=_l.prototype;function Hy(t,e,n){this.props=t,this.context=e,this.refs=Eb,this.updater=n||_b}var qy=Hy.prototype=new bb;qy.constructor=Hy;xb(qy,_l.prototype);qy.isPureReactComponent=!0;var T_=Array.isArray,Tb=Object.prototype.hasOwnProperty,Ky={current:null},Sb={key:!0,ref:!0,__self:!0,__source:!0};function Cb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Tb.call(e,r)&&!Sb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:gu,type:t,key:i,ref:o,props:s,_owner:Ky.current}}function JP(t,e){return{$$typeof:gu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gy(t){return typeof t=="object"&&t!==null&&t.$$typeof===gu}function ej(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S_=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ej(""+t.key):e.toString(36)}function Fd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gu:case BP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Fp(o,0):r,T_(s)?(n="",t!=null&&(n=t.replace(S_,"$&/")+"/"),Fd(s,e,n,"",function(u){return u})):s!=null&&(Gy(s)&&(s=JP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(S_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",T_(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Fp(i,a);o+=Fd(i,e,n,c,s)}else if(c=ZP(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Fp(i,a++),o+=Fd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function id(t,e,n){if(t==null)return t;var r=[],s=0;return Fd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},Ud={transition:null},nj={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:Ud,ReactCurrentOwner:Ky};function Ib(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:id,forEach:function(t,e,n){id(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return id(t,function(){e++}),e},toArray:function(t){return id(t,function(e){return e})||[]},only:function(t){if(!Gy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=_l;ze.Fragment=$P;ze.Profiler=HP;ze.PureComponent=Hy;ze.StrictMode=WP;ze.Suspense=QP;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nj;ze.act=Ib;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ky.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Tb.call(e,c)&&!Sb.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:gu,type:t.type,key:s,ref:i,props:r,_owner:o}};ze.createContext=function(t){return t={$$typeof:KP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qP,_context:t},t.Consumer=t};ze.createElement=Cb;ze.createFactory=function(t){var e=Cb.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:GP,render:t}};ze.isValidElement=Gy;ze.lazy=function(t){return{$$typeof:XP,_payload:{_status:-1,_result:t},_init:tj}};ze.memo=function(t,e){return{$$typeof:YP,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Ud.transition;Ud.transition={};try{t()}finally{Ud.transition=e}};ze.unstable_act=Ib;ze.useCallback=function(t,e){return bn.current.useCallback(t,e)};ze.useContext=function(t){return bn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return bn.current.useEffect(t,e)};ze.useId=function(){return bn.current.useId()};ze.useImperativeHandle=function(t,e,n){return bn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return bn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return bn.current.useReducer(t,e,n)};ze.useRef=function(t){return bn.current.useRef(t)};ze.useState=function(t){return bn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return bn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return bn.current.useTransition()};ze.version="18.3.1";wb.exports=ze;var b=wb.exports;const $s=Wy(b),Nb=zP({__proto__:null,default:$s},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rj=b,sj=Symbol.for("react.element"),ij=Symbol.for("react.fragment"),oj=Object.prototype.hasOwnProperty,aj=rj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lj={key:!0,ref:!0,__self:!0,__source:!0};function Ab(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oj.call(e,r)&&!lj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sj,type:t,key:i,ref:o,props:s,_owner:aj.current}}yf.Fragment=ij;yf.jsx=Ab;yf.jsxs=Ab;vb.exports=yf;var l=vb.exports,kb={exports:{}},qn={},Rb={exports:{}},Pb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,z){var Z=U.length;U.push(z);e:for(;0<Z;){var W=Z-1>>>1,q=U[W];if(0<s(q,z))U[W]=z,U[Z]=q,Z=W;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],Z=U.pop();if(Z!==z){U[0]=Z;e:for(var W=0,q=U.length,le=q>>>1;W<le;){var ce=2*(W+1)-1,oe=U[ce],Se=ce+1,fe=U[Se];if(0>s(oe,Z))Se<q&&0>s(fe,oe)?(U[W]=fe,U[Se]=Z,W=Se):(U[W]=oe,U[ce]=Z,W=ce);else if(Se<q&&0>s(fe,Z))U[W]=fe,U[Se]=Z,W=Se;else break e}}return z}function s(U,z){var Z=U.sortIndex-z.sortIndex;return Z!==0?Z:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,f=null,m=3,g=!1,v=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=U)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function I(U){if(p=!1,x(U),!v)if(n(c)!==null)v=!0,se(R);else{var z=n(u);z!==null&&X(I,z.startTime-U)}}function R(U,z){v=!1,p&&(p=!1,y(T),T=-1),g=!0;var Z=m;try{for(x(z),f=n(c);f!==null&&(!(f.expirationTime>z)||U&&!M());){var W=f.callback;if(typeof W=="function"){f.callback=null,m=f.priorityLevel;var q=W(f.expirationTime<=z);z=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(c)&&r(c),x(z)}else r(c);f=n(c)}if(f!==null)var le=!0;else{var ce=n(u);ce!==null&&X(I,ce.startTime-z),le=!1}return le}finally{f=null,m=Z,g=!1}}var L=!1,S=null,T=-1,C=5,j=-1;function M(){return!(t.unstable_now()-j<C)}function P(){if(S!==null){var U=t.unstable_now();j=U;var z=!0;try{z=S(!0,U)}finally{z?D():(L=!1,S=null)}}else L=!1}var D;if(typeof w=="function")D=function(){w(P)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,H=A.port2;A.port1.onmessage=P,D=function(){H.postMessage(null)}}else D=function(){_(P,0)};function se(U){S=U,L||(L=!0,D())}function X(U,z){T=_(function(){U(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,se(R))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var Z=m;m=z;try{return U()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Z=m;m=U;try{return z()}finally{m=Z}},t.unstable_scheduleCallback=function(U,z,Z){var W=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?W+Z:W):Z=W,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Z+q,U={id:h++,callback:z,priorityLevel:U,startTime:Z,expirationTime:q,sortIndex:-1},Z>W?(U.sortIndex=Z,e(u,U),n(c)===null&&U===n(u)&&(p?(y(T),T=-1):p=!0,X(I,Z-W))):(U.sortIndex=q,e(c,U),v||g||(v=!0,se(R))),U},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(U){var z=m;return function(){var Z=m;m=z;try{return U.apply(this,arguments)}finally{m=Z}}}})(Pb);Rb.exports=Pb;var cj=Rb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uj=b,Hn=cj;function he(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jb=new Set,jc={};function $o(t,e){el(t,e),el(t+"Capture",e)}function el(t,e){for(jc[t]=e,t=0;t<e.length;t++)jb.add(e[t])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bm=Object.prototype.hasOwnProperty,dj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C_={},I_={};function hj(t){return Bm.call(I_,t)?!0:Bm.call(C_,t)?!1:dj.test(t)?I_[t]=!0:(C_[t]=!0,!1)}function fj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pj(t,e,n,r){if(e===null||typeof e>"u"||fj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qy=/[\-:]([a-z])/g;function Yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);Jt[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qy,Yy);Jt[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qy,Yy);Jt[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xy(t,e,n,r){var s=Jt.hasOwnProperty(e)?Jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pj(e,n,s,r)&&(n=null),r||s===null?hj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rs=uj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),ha=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),Zy=Symbol.for("react.strict_mode"),$m=Symbol.for("react.profiler"),Db=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),Jy=Symbol.for("react.forward_ref"),Wm=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),ev=Symbol.for("react.memo"),qs=Symbol.for("react.lazy"),Lb=Symbol.for("react.offscreen"),N_=Symbol.iterator;function Kl(t){return t===null||typeof t!="object"?null:(t=N_&&t[N_]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Up;function sc(t){if(Up===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Up=e&&e[1]||""}return`
`+Up+t}var zp=!1;function Bp(t,e){if(!t||zp)return"";zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sc(t):""}function mj(t){switch(t.tag){case 5:return sc(t.type);case 16:return sc("Lazy");case 13:return sc("Suspense");case 19:return sc("SuspenseList");case 0:case 2:case 15:return t=Bp(t.type,!1),t;case 11:return t=Bp(t.type.render,!1),t;case 1:return t=Bp(t.type,!0),t;default:return""}}function qm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fa:return"Fragment";case ha:return"Portal";case $m:return"Profiler";case Zy:return"StrictMode";case Wm:return"Suspense";case Hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ob:return(t.displayName||"Context")+".Consumer";case Db:return(t._context.displayName||"Context")+".Provider";case Jy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ev:return e=t.displayName||null,e!==null?e:qm(t.type)||"Memo";case qs:e=t._payload,t=t._init;try{return qm(t(e))}catch{}}return null}function gj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qm(e);case 8:return e===Zy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yj(t){var e=Mb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ad(t){t._valueTracker||(t._valueTracker=yj(t))}function Vb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ph(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Km(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fb(t,e){e=e.checked,e!=null&&Xy(t,"checked",e,!1)}function Gm(t,e){Fb(t,e);var n=Ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qm(t,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qm(t,e,n){(e!=="number"||ph(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ic=Array.isArray;function Sa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ci(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ym(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(he(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function R_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(he(92));if(ic(n)){if(1<n.length)throw Error(he(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ci(n)}}function Ub(t,e){var n=Ci(e.value),r=Ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function P_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ld,Bb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vj=["Webkit","ms","Moz","O"];Object.keys(gc).forEach(function(t){vj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gc[e]=gc[t]})});function $b(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gc.hasOwnProperty(t)&&gc[t]?(""+e).trim():e+"px"}function Wb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$b(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wj=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zm(t,e){if(e){if(wj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(he(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(he(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(he(61))}if(e.style!=null&&typeof e.style!="object")throw Error(he(62))}}function Jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=null;function tv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tg=null,Ca=null,Ia=null;function j_(t){if(t=wu(t)){if(typeof tg!="function")throw Error(he(280));var e=t.stateNode;e&&(e=Ef(e),tg(t.stateNode,t.type,e))}}function Hb(t){Ca?Ia?Ia.push(t):Ia=[t]:Ca=t}function qb(){if(Ca){var t=Ca,e=Ia;if(Ia=Ca=null,j_(t),e)for(t=0;t<e.length;t++)j_(e[t])}}function Kb(t,e){return t(e)}function Gb(){}var $p=!1;function Qb(t,e,n){if($p)return t(e,n);$p=!0;try{return Kb(t,e,n)}finally{$p=!1,(Ca!==null||Ia!==null)&&(Gb(),qb())}}function Oc(t,e){var n=t.stateNode;if(n===null)return null;var r=Ef(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(he(231,e,typeof n));return n}var ng=!1;if(xs)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){ng=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{ng=!1}function _j(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var yc=!1,mh=null,gh=!1,rg=null,xj={onError:function(t){yc=!0,mh=t}};function Ej(t,e,n,r,s,i,o,a,c){yc=!1,mh=null,_j.apply(xj,arguments)}function bj(t,e,n,r,s,i,o,a,c){if(Ej.apply(this,arguments),yc){if(yc){var u=mh;yc=!1,mh=null}else throw Error(he(198));gh||(gh=!0,rg=u)}}function Wo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Yb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D_(t){if(Wo(t)!==t)throw Error(he(188))}function Tj(t){var e=t.alternate;if(!e){if(e=Wo(t),e===null)throw Error(he(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return D_(s),t;if(i===r)return D_(s),e;i=i.sibling}throw Error(he(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?t:e}function Xb(t){return t=Tj(t),t!==null?Zb(t):null}function Zb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zb(t);if(e!==null)return e;t=t.sibling}return null}var Jb=Hn.unstable_scheduleCallback,O_=Hn.unstable_cancelCallback,Sj=Hn.unstable_shouldYield,Cj=Hn.unstable_requestPaint,It=Hn.unstable_now,Ij=Hn.unstable_getCurrentPriorityLevel,nv=Hn.unstable_ImmediatePriority,eT=Hn.unstable_UserBlockingPriority,yh=Hn.unstable_NormalPriority,Nj=Hn.unstable_LowPriority,tT=Hn.unstable_IdlePriority,vf=null,Hr=null;function Aj(t){if(Hr&&typeof Hr.onCommitFiberRoot=="function")try{Hr.onCommitFiberRoot(vf,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:Pj,kj=Math.log,Rj=Math.LN2;function Pj(t){return t>>>=0,t===0?32:31-(kj(t)/Rj|0)|0}var cd=64,ud=4194304;function oc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=oc(a):(i&=o,i!==0&&(r=oc(i)))}else o=n&~s,o!==0?r=oc(o):i!==0&&(r=oc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Tr(e),s=1<<n,r|=t[n],e&=~s;return r}function jj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Tr(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=jj(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function sg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nT(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function Wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tr(e),t[e]=n}function Oj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var it=0;function rT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sT,sv,iT,oT,aT,ig=!1,dd=[],ui=null,di=null,hi=null,Lc=new Map,Mc=new Map,Gs=[],Lj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L_(t,e){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":hi=null;break;case"pointerover":case"pointerout":Lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(e.pointerId)}}function Ql(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=wu(e),e!==null&&sv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Mj(t,e,n,r,s){switch(e){case"focusin":return ui=Ql(ui,t,e,n,r,s),!0;case"dragenter":return di=Ql(di,t,e,n,r,s),!0;case"mouseover":return hi=Ql(hi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Lc.set(i,Ql(Lc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mc.set(i,Ql(Mc.get(i)||null,t,e,n,r,s)),!0}return!1}function lT(t){var e=ao(t.target);if(e!==null){var n=Wo(e);if(n!==null){if(e=n.tag,e===13){if(e=Yb(n),e!==null){t.blockedOn=e,aT(t.priority,function(){iT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=og(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eg=r,n.target.dispatchEvent(r),eg=null}else return e=wu(n),e!==null&&sv(e),t.blockedOn=n,!1;e.shift()}return!0}function M_(t,e,n){zd(t)&&n.delete(e)}function Vj(){ig=!1,ui!==null&&zd(ui)&&(ui=null),di!==null&&zd(di)&&(di=null),hi!==null&&zd(hi)&&(hi=null),Lc.forEach(M_),Mc.forEach(M_)}function Yl(t,e){t.blockedOn===e&&(t.blockedOn=null,ig||(ig=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,Vj)))}function Vc(t){function e(s){return Yl(s,t)}if(0<dd.length){Yl(dd[0],t);for(var n=1;n<dd.length;n++){var r=dd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ui!==null&&Yl(ui,t),di!==null&&Yl(di,t),hi!==null&&Yl(hi,t),Lc.forEach(e),Mc.forEach(e),n=0;n<Gs.length;n++)r=Gs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)lT(n),n.blockedOn===null&&Gs.shift()}var Na=Rs.ReactCurrentBatchConfig,wh=!0;function Fj(t,e,n,r){var s=it,i=Na.transition;Na.transition=null;try{it=1,iv(t,e,n,r)}finally{it=s,Na.transition=i}}function Uj(t,e,n,r){var s=it,i=Na.transition;Na.transition=null;try{it=4,iv(t,e,n,r)}finally{it=s,Na.transition=i}}function iv(t,e,n,r){if(wh){var s=og(t,e,n,r);if(s===null)em(t,e,r,_h,n),L_(t,r);else if(Mj(s,t,e,n,r))r.stopPropagation();else if(L_(t,r),e&4&&-1<Lj.indexOf(t)){for(;s!==null;){var i=wu(s);if(i!==null&&sT(i),i=og(t,e,n,r),i===null&&em(t,e,r,_h,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else em(t,e,r,null,n)}}var _h=null;function og(t,e,n,r){if(_h=null,t=tv(r),t=ao(t),t!==null)if(e=Wo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Yb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _h=t,null}function cT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ij()){case nv:return 1;case eT:return 4;case yh:case Nj:return 16;case tT:return 536870912;default:return 16}default:return 16}}var ai=null,ov=null,Bd=null;function uT(){if(Bd)return Bd;var t,e=ov,n=e.length,r,s="value"in ai?ai.value:ai.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Bd=s.slice(t,1<r?1-r:void 0)}function $d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hd(){return!0}function V_(){return!1}function Kn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hd:V_,this.isPropagationStopped=V_,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hd)},persist:function(){},isPersistent:hd}),e}var xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},av=Kn(xl),vu=yt({},xl,{view:0,detail:0}),zj=Kn(vu),Hp,qp,Xl,wf=yt({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(Hp=t.screenX-Xl.screenX,qp=t.screenY-Xl.screenY):qp=Hp=0,Xl=t),Hp)},movementY:function(t){return"movementY"in t?t.movementY:qp}}),F_=Kn(wf),Bj=yt({},wf,{dataTransfer:0}),$j=Kn(Bj),Wj=yt({},vu,{relatedTarget:0}),Kp=Kn(Wj),Hj=yt({},xl,{animationName:0,elapsedTime:0,pseudoElement:0}),qj=Kn(Hj),Kj=yt({},xl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gj=Kn(Kj),Qj=yt({},xl,{data:0}),U_=Kn(Qj),Yj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zj[t])?!!e[t]:!1}function lv(){return Jj}var eD=yt({},vu,{key:function(t){if(t.key){var e=Yj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lv,charCode:function(t){return t.type==="keypress"?$d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tD=Kn(eD),nD=yt({},wf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z_=Kn(nD),rD=yt({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lv}),sD=Kn(rD),iD=yt({},xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),oD=Kn(iD),aD=yt({},wf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lD=Kn(aD),cD=[9,13,27,32],cv=xs&&"CompositionEvent"in window,vc=null;xs&&"documentMode"in document&&(vc=document.documentMode);var uD=xs&&"TextEvent"in window&&!vc,dT=xs&&(!cv||vc&&8<vc&&11>=vc),B_=" ",$_=!1;function hT(t,e){switch(t){case"keyup":return cD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pa=!1;function dD(t,e){switch(t){case"compositionend":return fT(e);case"keypress":return e.which!==32?null:($_=!0,B_);case"textInput":return t=e.data,t===B_&&$_?null:t;default:return null}}function hD(t,e){if(pa)return t==="compositionend"||!cv&&hT(t,e)?(t=uT(),Bd=ov=ai=null,pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return dT&&e.locale!=="ko"?null:e.data;default:return null}}var fD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fD[t.type]:e==="textarea"}function pT(t,e,n,r){Hb(r),e=xh(e,"onChange"),0<e.length&&(n=new av("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wc=null,Fc=null;function pD(t){ST(t,0)}function _f(t){var e=ya(t);if(Vb(e))return t}function mD(t,e){if(t==="change")return e}var mT=!1;if(xs){var Gp;if(xs){var Qp="oninput"in document;if(!Qp){var H_=document.createElement("div");H_.setAttribute("oninput","return;"),Qp=typeof H_.oninput=="function"}Gp=Qp}else Gp=!1;mT=Gp&&(!document.documentMode||9<document.documentMode)}function q_(){wc&&(wc.detachEvent("onpropertychange",gT),Fc=wc=null)}function gT(t){if(t.propertyName==="value"&&_f(Fc)){var e=[];pT(e,Fc,t,tv(t)),Qb(pD,e)}}function gD(t,e,n){t==="focusin"?(q_(),wc=e,Fc=n,wc.attachEvent("onpropertychange",gT)):t==="focusout"&&q_()}function yD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(Fc)}function vD(t,e){if(t==="click")return _f(e)}function wD(t,e){if(t==="input"||t==="change")return _f(e)}function _D(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cr=typeof Object.is=="function"?Object.is:_D;function Uc(t,e){if(Cr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Bm.call(e,s)||!Cr(t[s],e[s]))return!1}return!0}function K_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G_(t,e){var n=K_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=K_(n)}}function yT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function vT(){for(var t=window,e=ph();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ph(t.document)}return e}function uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xD(t){var e=vT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yT(n.ownerDocument.documentElement,n)){if(r!==null&&uv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G_(n,i);var o=G_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ED=xs&&"documentMode"in document&&11>=document.documentMode,ma=null,ag=null,_c=null,lg=!1;function Q_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lg||ma==null||ma!==ph(r)||(r=ma,"selectionStart"in r&&uv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_c&&Uc(_c,r)||(_c=r,r=xh(ag,"onSelect"),0<r.length&&(e=new av("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ma)))}function fd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ga={animationend:fd("Animation","AnimationEnd"),animationiteration:fd("Animation","AnimationIteration"),animationstart:fd("Animation","AnimationStart"),transitionend:fd("Transition","TransitionEnd")},Yp={},wT={};xs&&(wT=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function xf(t){if(Yp[t])return Yp[t];if(!ga[t])return t;var e=ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wT)return Yp[t]=e[n];return t}var _T=xf("animationend"),xT=xf("animationiteration"),ET=xf("animationstart"),bT=xf("transitionend"),TT=new Map,Y_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(t,e){TT.set(t,e),$o(e,[t])}for(var Xp=0;Xp<Y_.length;Xp++){var Zp=Y_[Xp],bD=Zp.toLowerCase(),TD=Zp[0].toUpperCase()+Zp.slice(1);Ui(bD,"on"+TD)}Ui(_T,"onAnimationEnd");Ui(xT,"onAnimationIteration");Ui(ET,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(bT,"onTransitionEnd");el("onMouseEnter",["mouseout","mouseover"]);el("onMouseLeave",["mouseout","mouseover"]);el("onPointerEnter",["pointerout","pointerover"]);el("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function X_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bj(r,e,void 0,t),t.currentTarget=null}function ST(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;X_(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;X_(s,a,u),i=c}}}if(gh)throw t=rg,gh=!1,rg=null,t}function dt(t,e){var n=e[fg];n===void 0&&(n=e[fg]=new Set);var r=t+"__bubble";n.has(r)||(CT(e,t,2,!1),n.add(r))}function Jp(t,e,n){var r=0;e&&(r|=4),CT(n,t,r,e)}var pd="_reactListening"+Math.random().toString(36).slice(2);function zc(t){if(!t[pd]){t[pd]=!0,jb.forEach(function(n){n!=="selectionchange"&&(SD.has(n)||Jp(n,!1,t),Jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pd]||(e[pd]=!0,Jp("selectionchange",!1,e))}}function CT(t,e,n,r){switch(cT(e)){case 1:var s=Fj;break;case 4:s=Uj;break;default:s=iv}n=s.bind(null,e,n,t),s=void 0,!ng||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function em(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ao(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Qb(function(){var u=i,h=tv(n),f=[];e:{var m=TT.get(t);if(m!==void 0){var g=av,v=t;switch(t){case"keypress":if($d(n)===0)break e;case"keydown":case"keyup":g=tD;break;case"focusin":v="focus",g=Kp;break;case"focusout":v="blur",g=Kp;break;case"beforeblur":case"afterblur":g=Kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=$j;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=sD;break;case _T:case xT:case ET:g=qj;break;case bT:g=oD;break;case"scroll":g=zj;break;case"wheel":g=lD;break;case"copy":case"cut":case"paste":g=Gj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=z_}var p=(e&4)!==0,_=!p&&t==="scroll",y=p?m!==null?m+"Capture":null:m;p=[];for(var w=u,x;w!==null;){x=w;var I=x.stateNode;if(x.tag===5&&I!==null&&(x=I,y!==null&&(I=Oc(w,y),I!=null&&p.push(Bc(w,I,x)))),_)break;w=w.return}0<p.length&&(m=new g(m,v,null,n,h),f.push({event:m,listeners:p}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==eg&&(v=n.relatedTarget||n.fromElement)&&(ao(v)||v[Es]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?ao(v):null,v!==null&&(_=Wo(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(p=F_,I="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(p=z_,I="onPointerLeave",y="onPointerEnter",w="pointer"),_=g==null?m:ya(g),x=v==null?m:ya(v),m=new p(I,w+"leave",g,n,h),m.target=_,m.relatedTarget=x,I=null,ao(h)===u&&(p=new p(y,w+"enter",v,n,h),p.target=x,p.relatedTarget=_,I=p),_=I,g&&v)t:{for(p=g,y=v,w=0,x=p;x;x=ra(x))w++;for(x=0,I=y;I;I=ra(I))x++;for(;0<w-x;)p=ra(p),w--;for(;0<x-w;)y=ra(y),x--;for(;w--;){if(p===y||y!==null&&p===y.alternate)break t;p=ra(p),y=ra(y)}p=null}else p=null;g!==null&&Z_(f,m,g,p,!1),v!==null&&_!==null&&Z_(f,_,v,p,!0)}}e:{if(m=u?ya(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var R=mD;else if(W_(m))if(mT)R=wD;else{R=yD;var L=gD}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=vD);if(R&&(R=R(t,u))){pT(f,R,n,h);break e}L&&L(t,m,u),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&Qm(m,"number",m.value)}switch(L=u?ya(u):window,t){case"focusin":(W_(L)||L.contentEditable==="true")&&(ma=L,ag=u,_c=null);break;case"focusout":_c=ag=ma=null;break;case"mousedown":lg=!0;break;case"contextmenu":case"mouseup":case"dragend":lg=!1,Q_(f,n,h);break;case"selectionchange":if(ED)break;case"keydown":case"keyup":Q_(f,n,h)}var S;if(cv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else pa?hT(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(dT&&n.locale!=="ko"&&(pa||T!=="onCompositionStart"?T==="onCompositionEnd"&&pa&&(S=uT()):(ai=h,ov="value"in ai?ai.value:ai.textContent,pa=!0)),L=xh(u,T),0<L.length&&(T=new U_(T,t,null,n,h),f.push({event:T,listeners:L}),S?T.data=S:(S=fT(n),S!==null&&(T.data=S)))),(S=uD?dD(t,n):hD(t,n))&&(u=xh(u,"onBeforeInput"),0<u.length&&(h=new U_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}ST(f,e)})}function Bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Oc(t,n),i!=null&&r.unshift(Bc(t,i,s)),i=Oc(t,e),i!=null&&r.push(Bc(t,i,s))),t=t.return}return r}function ra(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Z_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Oc(n,i),c!=null&&o.unshift(Bc(n,c,a))):s||(c=Oc(n,i),c!=null&&o.push(Bc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CD=/\r\n?/g,ID=/\u0000|\uFFFD/g;function J_(t){return(typeof t=="string"?t:""+t).replace(CD,`
`).replace(ID,"")}function md(t,e,n){if(e=J_(e),J_(t)!==e&&n)throw Error(he(425))}function Eh(){}var cg=null,ug=null;function dg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hg=typeof setTimeout=="function"?setTimeout:void 0,ND=typeof clearTimeout=="function"?clearTimeout:void 0,ex=typeof Promise=="function"?Promise:void 0,AD=typeof queueMicrotask=="function"?queueMicrotask:typeof ex<"u"?function(t){return ex.resolve(null).then(t).catch(kD)}:hg;function kD(t){setTimeout(function(){throw t})}function tm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Vc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Vc(e)}function fi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var El=Math.random().toString(36).slice(2),Br="__reactFiber$"+El,$c="__reactProps$"+El,Es="__reactContainer$"+El,fg="__reactEvents$"+El,RD="__reactListeners$"+El,PD="__reactHandles$"+El;function ao(t){var e=t[Br];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Es]||n[Br]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tx(t);t!==null;){if(n=t[Br])return n;t=tx(t)}return e}t=n,n=t.parentNode}return null}function wu(t){return t=t[Br]||t[Es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ya(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(he(33))}function Ef(t){return t[$c]||null}var pg=[],va=-1;function zi(t){return{current:t}}function ht(t){0>va||(t.current=pg[va],pg[va]=null,va--)}function lt(t,e){va++,pg[va]=t.current,t.current=e}var Ii={},fn=zi(Ii),Rn=zi(!1),bo=Ii;function tl(t,e){var n=t.type.contextTypes;if(!n)return Ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pn(t){return t=t.childContextTypes,t!=null}function bh(){ht(Rn),ht(fn)}function nx(t,e,n){if(fn.current!==Ii)throw Error(he(168));lt(fn,e),lt(Rn,n)}function IT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(he(108,gj(t)||"Unknown",s));return yt({},n,r)}function Th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,bo=fn.current,lt(fn,t),lt(Rn,Rn.current),!0}function rx(t,e,n){var r=t.stateNode;if(!r)throw Error(he(169));n?(t=IT(t,e,bo),r.__reactInternalMemoizedMergedChildContext=t,ht(Rn),ht(fn),lt(fn,t)):ht(Rn),lt(Rn,n)}var hs=null,bf=!1,nm=!1;function NT(t){hs===null?hs=[t]:hs.push(t)}function jD(t){bf=!0,NT(t)}function Bi(){if(!nm&&hs!==null){nm=!0;var t=0,e=it;try{var n=hs;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}hs=null,bf=!1}catch(s){throw hs!==null&&(hs=hs.slice(t+1)),Jb(nv,Bi),s}finally{it=e,nm=!1}}return null}var wa=[],_a=0,Sh=null,Ch=0,Jn=[],er=0,To=null,ps=1,ms="";function so(t,e){wa[_a++]=Ch,wa[_a++]=Sh,Sh=t,Ch=e}function AT(t,e,n){Jn[er++]=ps,Jn[er++]=ms,Jn[er++]=To,To=t;var r=ps;t=ms;var s=32-Tr(r)-1;r&=~(1<<s),n+=1;var i=32-Tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ps=1<<32-Tr(e)+s|n<<s|r,ms=i+t}else ps=1<<i|n<<s|r,ms=t}function dv(t){t.return!==null&&(so(t,1),AT(t,1,0))}function hv(t){for(;t===Sh;)Sh=wa[--_a],wa[_a]=null,Ch=wa[--_a],wa[_a]=null;for(;t===To;)To=Jn[--er],Jn[er]=null,ms=Jn[--er],Jn[er]=null,ps=Jn[--er],Jn[er]=null}var $n=null,Un=null,pt=!1,xr=null;function kT(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$n=t,Un=fi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$n=t,Un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=To!==null?{id:ps,overflow:ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$n=t,Un=null,!0):!1;default:return!1}}function mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gg(t){if(pt){var e=Un;if(e){var n=e;if(!sx(t,e)){if(mg(t))throw Error(he(418));e=fi(n.nextSibling);var r=$n;e&&sx(t,e)?kT(r,n):(t.flags=t.flags&-4097|2,pt=!1,$n=t)}}else{if(mg(t))throw Error(he(418));t.flags=t.flags&-4097|2,pt=!1,$n=t}}}function ix(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function gd(t){if(t!==$n)return!1;if(!pt)return ix(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dg(t.type,t.memoizedProps)),e&&(e=Un)){if(mg(t))throw RT(),Error(he(418));for(;e;)kT(t,e),e=fi(e.nextSibling)}if(ix(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(he(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Un=fi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Un=null}}else Un=$n?fi(t.stateNode.nextSibling):null;return!0}function RT(){for(var t=Un;t;)t=fi(t.nextSibling)}function nl(){Un=$n=null,pt=!1}function fv(t){xr===null?xr=[t]:xr.push(t)}var DD=Rs.ReactCurrentBatchConfig;function Zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(he(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ox(t){var e=t._init;return e(t._payload)}function PT(t){function e(y,w){if(t){var x=y.deletions;x===null?(y.deletions=[w],y.flags|=16):x.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=yi(y,w),y.index=0,y.sibling=null,y}function i(y,w,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<w?(y.flags|=2,w):x):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,w,x,I){return w===null||w.tag!==6?(w=cm(x,y.mode,I),w.return=y,w):(w=s(w,x),w.return=y,w)}function c(y,w,x,I){var R=x.type;return R===fa?h(y,w,x.props.children,I,x.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qs&&ox(R)===w.type)?(I=s(w,x.props),I.ref=Zl(y,w,x),I.return=y,I):(I=Yd(x.type,x.key,x.props,null,y.mode,I),I.ref=Zl(y,w,x),I.return=y,I)}function u(y,w,x,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=um(x,y.mode,I),w.return=y,w):(w=s(w,x.children||[]),w.return=y,w)}function h(y,w,x,I,R){return w===null||w.tag!==7?(w=_o(x,y.mode,I,R),w.return=y,w):(w=s(w,x),w.return=y,w)}function f(y,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=cm(""+w,y.mode,x),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case od:return x=Yd(w.type,w.key,w.props,null,y.mode,x),x.ref=Zl(y,null,w),x.return=y,x;case ha:return w=um(w,y.mode,x),w.return=y,w;case qs:var I=w._init;return f(y,I(w._payload),x)}if(ic(w)||Kl(w))return w=_o(w,y.mode,x,null),w.return=y,w;yd(y,w)}return null}function m(y,w,x,I){var R=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return R!==null?null:a(y,w,""+x,I);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case od:return x.key===R?c(y,w,x,I):null;case ha:return x.key===R?u(y,w,x,I):null;case qs:return R=x._init,m(y,w,R(x._payload),I)}if(ic(x)||Kl(x))return R!==null?null:h(y,w,x,I,null);yd(y,x)}return null}function g(y,w,x,I,R){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(x)||null,a(w,y,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case od:return y=y.get(I.key===null?x:I.key)||null,c(w,y,I,R);case ha:return y=y.get(I.key===null?x:I.key)||null,u(w,y,I,R);case qs:var L=I._init;return g(y,w,x,L(I._payload),R)}if(ic(I)||Kl(I))return y=y.get(x)||null,h(w,y,I,R,null);yd(w,I)}return null}function v(y,w,x,I){for(var R=null,L=null,S=w,T=w=0,C=null;S!==null&&T<x.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var j=m(y,S,x[T],I);if(j===null){S===null&&(S=C);break}t&&S&&j.alternate===null&&e(y,S),w=i(j,w,T),L===null?R=j:L.sibling=j,L=j,S=C}if(T===x.length)return n(y,S),pt&&so(y,T),R;if(S===null){for(;T<x.length;T++)S=f(y,x[T],I),S!==null&&(w=i(S,w,T),L===null?R=S:L.sibling=S,L=S);return pt&&so(y,T),R}for(S=r(y,S);T<x.length;T++)C=g(S,y,T,x[T],I),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),w=i(C,w,T),L===null?R=C:L.sibling=C,L=C);return t&&S.forEach(function(M){return e(y,M)}),pt&&so(y,T),R}function p(y,w,x,I){var R=Kl(x);if(typeof R!="function")throw Error(he(150));if(x=R.call(x),x==null)throw Error(he(151));for(var L=R=null,S=w,T=w=0,C=null,j=x.next();S!==null&&!j.done;T++,j=x.next()){S.index>T?(C=S,S=null):C=S.sibling;var M=m(y,S,j.value,I);if(M===null){S===null&&(S=C);break}t&&S&&M.alternate===null&&e(y,S),w=i(M,w,T),L===null?R=M:L.sibling=M,L=M,S=C}if(j.done)return n(y,S),pt&&so(y,T),R;if(S===null){for(;!j.done;T++,j=x.next())j=f(y,j.value,I),j!==null&&(w=i(j,w,T),L===null?R=j:L.sibling=j,L=j);return pt&&so(y,T),R}for(S=r(y,S);!j.done;T++,j=x.next())j=g(S,y,T,j.value,I),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?T:j.key),w=i(j,w,T),L===null?R=j:L.sibling=j,L=j);return t&&S.forEach(function(P){return e(y,P)}),pt&&so(y,T),R}function _(y,w,x,I){if(typeof x=="object"&&x!==null&&x.type===fa&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case od:e:{for(var R=x.key,L=w;L!==null;){if(L.key===R){if(R=x.type,R===fa){if(L.tag===7){n(y,L.sibling),w=s(L,x.props.children),w.return=y,y=w;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qs&&ox(R)===L.type){n(y,L.sibling),w=s(L,x.props),w.ref=Zl(y,L,x),w.return=y,y=w;break e}n(y,L);break}else e(y,L);L=L.sibling}x.type===fa?(w=_o(x.props.children,y.mode,I,x.key),w.return=y,y=w):(I=Yd(x.type,x.key,x.props,null,y.mode,I),I.ref=Zl(y,w,x),I.return=y,y=I)}return o(y);case ha:e:{for(L=x.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){n(y,w.sibling),w=s(w,x.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=um(x,y.mode,I),w.return=y,y=w}return o(y);case qs:return L=x._init,_(y,w,L(x._payload),I)}if(ic(x))return v(y,w,x,I);if(Kl(x))return p(y,w,x,I);yd(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,x),w.return=y,y=w):(n(y,w),w=cm(x,y.mode,I),w.return=y,y=w),o(y)):n(y,w)}return _}var rl=PT(!0),jT=PT(!1),Ih=zi(null),Nh=null,xa=null,pv=null;function mv(){pv=xa=Nh=null}function gv(t){var e=Ih.current;ht(Ih),t._currentValue=e}function yg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Aa(t,e){Nh=t,pv=xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(pv!==t)if(t={context:t,memoizedValue:e,next:null},xa===null){if(Nh===null)throw Error(he(308));xa=t,Nh.dependencies={lanes:0,firstContext:t}}else xa=xa.next=t;return e}var lo=null;function yv(t){lo===null?lo=[t]:lo.push(t)}function DT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yv(e)):(n.next=s.next,s.next=n),e.interleaved=n,bs(t,r)}function bs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ks=!1;function vv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,bs(t,n)}return s=r.interleaved,s===null?(e.next=e,yv(r)):(e.next=s.next,s.next=e),r.interleaved=e,bs(t,n)}function Wd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}function ax(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ah(t,e,n,r){var s=t.updateQueue;Ks=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,p=a;switch(m=e,g=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=yt({},f,m);break e;case 2:Ks=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Co|=o,t.lanes=o,t.memoizedState=f}}function lx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(he(191,s));s.call(r)}}}var _u={},qr=zi(_u),Wc=zi(_u),Hc=zi(_u);function co(t){if(t===_u)throw Error(he(174));return t}function wv(t,e){switch(lt(Hc,e),lt(Wc,t),lt(qr,_u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xm(e,t)}ht(qr),lt(qr,e)}function sl(){ht(qr),ht(Wc),ht(Hc)}function LT(t){co(Hc.current);var e=co(qr.current),n=Xm(e,t.type);e!==n&&(lt(Wc,t),lt(qr,n))}function _v(t){Wc.current===t&&(ht(qr),ht(Wc))}var mt=zi(0);function kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function xv(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var Hd=Rs.ReactCurrentDispatcher,sm=Rs.ReactCurrentBatchConfig,So=0,gt=null,Ot=null,Bt=null,Rh=!1,xc=!1,qc=0,OD=0;function rn(){throw Error(he(321))}function Ev(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cr(t[n],e[n]))return!1;return!0}function bv(t,e,n,r,s,i){if(So=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Hd.current=t===null||t.memoizedState===null?FD:UD,t=n(r,s),xc){i=0;do{if(xc=!1,qc=0,25<=i)throw Error(he(301));i+=1,Bt=Ot=null,e.updateQueue=null,Hd.current=zD,t=n(r,s)}while(xc)}if(Hd.current=Ph,e=Ot!==null&&Ot.next!==null,So=0,Bt=Ot=gt=null,Rh=!1,e)throw Error(he(300));return t}function Tv(){var t=qc!==0;return qc=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?gt.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function lr(){if(Ot===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Bt===null?gt.memoizedState:Bt.next;if(e!==null)Bt=e,Ot=t;else{if(t===null)throw Error(he(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Bt===null?gt.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Kc(t,e){return typeof e=="function"?e(t):e}function im(t){var e=lr(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((So&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,gt.lanes|=h,Co|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Cr(r,e.memoizedState)||(kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,gt.lanes|=i,Co|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function om(t){var e=lr(),n=e.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cr(i,e.memoizedState)||(kn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function MT(){}function VT(t,e){var n=gt,r=lr(),s=e(),i=!Cr(r.memoizedState,s);if(i&&(r.memoizedState=s,kn=!0),r=r.queue,Sv(zT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Gc(9,UT.bind(null,n,r,s,e),void 0,null),$t===null)throw Error(he(349));So&30||FT(n,e,s)}return s}function FT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function UT(t,e,n,r){e.value=n,e.getSnapshot=r,BT(e)&&$T(t)}function zT(t,e,n){return n(function(){BT(e)&&$T(t)})}function BT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cr(t,n)}catch{return!0}}function $T(t){var e=bs(t,1);e!==null&&Sr(e,t,1,-1)}function cx(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:t},e.queue=t,t=t.dispatch=VD.bind(null,gt,t),[e.memoizedState,t]}function Gc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function WT(){return lr().memoizedState}function qd(t,e,n,r){var s=Or();gt.flags|=t,s.memoizedState=Gc(1|e,n,void 0,r===void 0?null:r)}function Tf(t,e,n,r){var s=lr();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,r!==null&&Ev(r,o.deps)){s.memoizedState=Gc(e,n,i,r);return}}gt.flags|=t,s.memoizedState=Gc(1|e,n,i,r)}function ux(t,e){return qd(8390656,8,t,e)}function Sv(t,e){return Tf(2048,8,t,e)}function HT(t,e){return Tf(4,2,t,e)}function qT(t,e){return Tf(4,4,t,e)}function KT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GT(t,e,n){return n=n!=null?n.concat([t]):null,Tf(4,4,KT.bind(null,e,t),n)}function Cv(){}function QT(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function YT(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ev(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XT(t,e,n){return So&21?(Cr(n,e)||(n=nT(),gt.lanes|=n,Co|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kn=!0),t.memoizedState=n)}function LD(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=sm.transition;sm.transition={};try{t(!1),e()}finally{it=n,sm.transition=r}}function ZT(){return lr().memoizedState}function MD(t,e,n){var r=gi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},JT(t))eS(e,n);else if(n=DT(t,e,n,r),n!==null){var s=xn();Sr(n,t,r,s),tS(n,e,r)}}function VD(t,e,n){var r=gi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(JT(t))eS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Cr(a,o)){var c=e.interleaved;c===null?(s.next=s,yv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=DT(t,e,s,r),n!==null&&(s=xn(),Sr(n,t,r,s),tS(n,e,r))}}function JT(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function eS(t,e){xc=Rh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rv(t,n)}}var Ph={readContext:ar,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},FD={readContext:ar,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:ux,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qd(4194308,4,KT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qd(4194308,4,t,e)},useInsertionEffect:function(t,e){return qd(4,2,t,e)},useMemo:function(t,e){var n=Or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MD.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:cx,useDebugValue:Cv,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=cx(!1),e=t[0];return t=LD.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,s=Or();if(pt){if(n===void 0)throw Error(he(407));n=n()}else{if(n=e(),$t===null)throw Error(he(349));So&30||FT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ux(zT.bind(null,r,i,t),[t]),r.flags|=2048,Gc(9,UT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Or(),e=$t.identifierPrefix;if(pt){var n=ms,r=ps;n=(r&~(1<<32-Tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=OD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UD={readContext:ar,useCallback:QT,useContext:ar,useEffect:Sv,useImperativeHandle:GT,useInsertionEffect:HT,useLayoutEffect:qT,useMemo:YT,useReducer:im,useRef:WT,useState:function(){return im(Kc)},useDebugValue:Cv,useDeferredValue:function(t){var e=lr();return XT(e,Ot.memoizedState,t)},useTransition:function(){var t=im(Kc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:VT,useId:ZT,unstable_isNewReconciler:!1},zD={readContext:ar,useCallback:QT,useContext:ar,useEffect:Sv,useImperativeHandle:GT,useInsertionEffect:HT,useLayoutEffect:qT,useMemo:YT,useReducer:om,useRef:WT,useState:function(){return om(Kc)},useDebugValue:Cv,useDeferredValue:function(t){var e=lr();return Ot===null?e.memoizedState=t:XT(e,Ot.memoizedState,t)},useTransition:function(){var t=om(Kc)[0],e=lr().memoizedState;return[t,e]},useMutableSource:MT,useSyncExternalStore:VT,useId:ZT,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sf={isMounted:function(t){return(t=t._reactInternals)?Wo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xn(),s=gi(t),i=vs(r,s);i.payload=e,n!=null&&(i.callback=n),e=pi(t,i,s),e!==null&&(Sr(e,t,s,r),Wd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xn(),s=gi(t),i=vs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=pi(t,i,s),e!==null&&(Sr(e,t,s,r),Wd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xn(),r=gi(t),s=vs(n,r);s.tag=2,e!=null&&(s.callback=e),e=pi(t,s,r),e!==null&&(Sr(e,t,r,n),Wd(e,t,r))}};function dx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Uc(n,r)||!Uc(s,i):!0}function nS(t,e,n){var r=!1,s=Ii,i=e.contextType;return typeof i=="object"&&i!==null?i=ar(i):(s=Pn(e)?bo:fn.current,r=e.contextTypes,i=(r=r!=null)?tl(t,s):Ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sf.enqueueReplaceState(e,e.state,null)}function wg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ar(i):(i=Pn(e)?bo:fn.current,s.context=tl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sf.enqueueReplaceState(s,s.state,null),Ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e){try{var n="",r=e;do n+=mj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function am(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _g(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BD=typeof WeakMap=="function"?WeakMap:Map;function rS(t,e,n){n=vs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dh||(Dh=!0,kg=r),_g(t,e)},n}function sS(t,e,n){n=vs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_g(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_g(t,e),typeof r!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nO.bind(null,t,e,n),e.then(t,t))}function px(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vs(-1,1),e.tag=2,pi(n,e,1))),n.lanes|=1),t)}var $D=Rs.ReactCurrentOwner,kn=!1;function wn(t,e,n,r){e.child=t===null?jT(e,null,n,r):rl(e,t.child,n,r)}function gx(t,e,n,r,s){n=n.render;var i=e.ref;return Aa(e,s),r=bv(t,e,n,r,i,s),n=Tv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(pt&&n&&dv(e),e.flags|=1,wn(t,e,r,s),e.child)}function yx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iS(t,e,i,r,s)):(t=Yd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Uc,n(o,r)&&t.ref===e.ref)return Ts(t,e,s)}return e.flags|=1,t=yi(i,r),t.ref=e.ref,t.return=e,e.child=t}function iS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Uc(i,r)&&t.ref===e.ref)if(kn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kn=!0);else return e.lanes=t.lanes,Ts(t,e,s)}return xg(t,e,n,r,s)}function oS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(ba,Mn),Mn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(ba,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,lt(ba,Mn),Mn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,lt(ba,Mn),Mn|=r;return wn(t,e,s,n),e.child}function aS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xg(t,e,n,r,s){var i=Pn(n)?bo:fn.current;return i=tl(e,i),Aa(e,s),n=bv(t,e,n,r,i,s),r=Tv(),t!==null&&!kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(pt&&r&&dv(e),e.flags|=1,wn(t,e,n,s),e.child)}function vx(t,e,n,r,s){if(Pn(n)){var i=!0;Th(e)}else i=!1;if(Aa(e,s),e.stateNode===null)Kd(t,e),nS(e,n,r),wg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ar(u):(u=Pn(n)?bo:fn.current,u=tl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&hx(e,o,r,u),Ks=!1;var m=e.memoizedState;o.state=m,Ah(e,r,o,s),c=e.memoizedState,a!==r||m!==c||Rn.current||Ks?(typeof h=="function"&&(vg(e,n,h,r),c=e.memoizedState),(a=Ks||dx(e,n,a,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:vr(e.type,a),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ar(c):(c=Pn(n)?bo:fn.current,c=tl(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==c)&&hx(e,o,r,c),Ks=!1,m=e.memoizedState,o.state=m,Ah(e,r,o,s);var v=e.memoizedState;a!==f||m!==v||Rn.current||Ks?(typeof g=="function"&&(vg(e,n,g,r),v=e.memoizedState),(u=Ks||dx(e,n,u,r,m,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Eg(t,e,n,r,i,s)}function Eg(t,e,n,r,s,i){aS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&rx(e,n,!1),Ts(t,e,i);r=e.stateNode,$D.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=rl(e,t.child,null,i),e.child=rl(e,null,a,i)):wn(t,e,a,i),e.memoizedState=r.state,s&&rx(e,n,!0),e.child}function lS(t){var e=t.stateNode;e.pendingContext?nx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nx(t,e.context,!1),wv(t,e.containerInfo)}function wx(t,e,n,r,s){return nl(),fv(s),e.flags|=256,wn(t,e,n,r),e.child}var bg={dehydrated:null,treeContext:null,retryLane:0};function Tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function cS(t,e,n){var r=e.pendingProps,s=mt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),lt(mt,s&1),t===null)return gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nf(o,r,0,null),t=_o(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tg(n),e.memoizedState=bg,t):Iv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return WD(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=yi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=yi(a,i):(i=_o(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Tg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=bg,r}return i=t.child,t=i.sibling,r=yi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iv(t,e){return e=Nf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&fv(r),rl(e,t.child,null,n),t=Iv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=am(Error(he(422))),vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Nf({mode:"visible",children:r.children},s,0,null),i=_o(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&rl(e,t.child,null,o),e.child.memoizedState=Tg(o),e.memoizedState=bg,i);if(!(e.mode&1))return vd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(he(419)),r=am(i,r,void 0),vd(t,e,o,r)}if(a=(o&t.childLanes)!==0,kn||a){if(r=$t,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,bs(t,s),Sr(r,t,s,-1))}return jv(),r=am(Error(he(421))),vd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Un=fi(s.nextSibling),$n=e,pt=!0,xr=null,t!==null&&(Jn[er++]=ps,Jn[er++]=ms,Jn[er++]=To,ps=t.id,ms=t.overflow,To=e),e=Iv(e,r.children),e.flags|=4096,e)}function _x(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yg(t.return,e,n)}function lm(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_x(t,n,e);else if(t.tag===19)_x(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),lm(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}lm(e,!0,n,null,i);break;case"together":lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Co|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(he(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HD(t,e,n){switch(e.tag){case 3:lS(e),nl();break;case 5:LT(e);break;case 1:Pn(e.type)&&Th(e);break;case 4:wv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;lt(Ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?cS(t,e,n):(lt(mt,mt.current&1),t=Ts(t,e,n),t!==null?t.sibling:null);lt(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),lt(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,oS(t,e,n)}return Ts(t,e,n)}var dS,Sg,hS,fS;dS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sg=function(){};hS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,co(qr.current);var i=null;switch(n){case"input":s=Km(t,s),r=Km(t,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=Ym(t,s),r=Ym(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eh)}Zm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&dt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};fS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Jl(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qD(t,e,n){var r=e.pendingProps;switch(hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Pn(e.type)&&bh(),sn(e),null;case 3:return r=e.stateNode,sl(),ht(Rn),ht(fn),xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(jg(xr),xr=null))),Sg(t,e),sn(e),null;case 5:_v(e);var s=co(Hc.current);if(n=e.type,t!==null&&e.stateNode!=null)hS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(he(166));return sn(e),null}if(t=co(qr.current),gd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Br]=e,r[$c]=i,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(s=0;s<ac.length;s++)dt(ac[s],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":A_(r,i),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},dt("invalid",r);break;case"textarea":R_(r,i),dt("invalid",r)}Zm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&md(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&md(r.textContent,a,t),s=["children",""+a]):jc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&dt("scroll",r)}switch(n){case"input":ad(r),k_(r,i,!0);break;case"textarea":ad(r),P_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Br]=e,t[$c]=r,dS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jm(n,r),n){case"dialog":dt("cancel",t),dt("close",t),s=r;break;case"iframe":case"object":case"embed":dt("load",t),s=r;break;case"video":case"audio":for(s=0;s<ac.length;s++)dt(ac[s],t);s=r;break;case"source":dt("error",t),s=r;break;case"img":case"image":case"link":dt("error",t),dt("load",t),s=r;break;case"details":dt("toggle",t),s=r;break;case"input":A_(t,r),s=Km(t,r),dt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),dt("invalid",t);break;case"textarea":R_(t,r),s=Ym(t,r),dt("invalid",t);break;default:s=r}Zm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Wb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Dc(t,c):typeof c=="number"&&Dc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(jc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&dt("scroll",t):c!=null&&Xy(t,i,c,o))}switch(n){case"input":ad(t),k_(t,r,!1);break;case"textarea":ad(t),P_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ci(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Sa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Sa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)fS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(he(166));if(n=co(Hc.current),co(qr.current),gd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Br]=e,(i=r.nodeValue!==n)&&(t=$n,t!==null))switch(t.tag){case 3:md(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&md(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Br]=e,e.stateNode=r}return sn(e),null;case 13:if(ht(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Un!==null&&e.mode&1&&!(e.flags&128))RT(),nl(),e.flags|=98560,i=!1;else if(i=gd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(he(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[Br]=e}else nl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),i=!1}else xr!==null&&(jg(xr),xr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Lt===0&&(Lt=3):jv())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return sl(),Sg(t,e),t===null&&zc(e.stateNode.containerInfo),sn(e),null;case 10:return gv(e.type._context),sn(e),null;case 17:return Pn(e.type)&&bh(),sn(e),null;case 19:if(ht(mt),i=e.memoizedState,i===null)return sn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Jl(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kh(t),o!==null){for(e.flags|=128,Jl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(mt,mt.current&1|2),e.child}t=t.sibling}i.tail!==null&&It()>ol&&(e.flags|=128,r=!0,Jl(i,!1),e.lanes=4194304)}else{if(!r)if(t=kh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Jl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pt)return sn(e),null}else 2*It()-i.renderingStartTime>ol&&n!==1073741824&&(e.flags|=128,r=!0,Jl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=It(),e.sibling=null,n=mt.current,lt(mt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return Pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(he(156,e.tag))}function KD(t,e){switch(hv(e),e.tag){case 1:return Pn(e.type)&&bh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sl(),ht(Rn),ht(fn),xv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _v(e),null;case 13:if(ht(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(he(340));nl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ht(mt),null;case 4:return sl(),null;case 10:return gv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var wd=!1,cn=!1,GD=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ea(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Et(t,e,r)}else n.current=null}function Cg(t,e,n){try{n()}catch(r){Et(t,e,r)}}var xx=!1;function QD(t,e){if(cg=wh,t=vT(),uv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ug={focusedElem:t,selectionRange:n},wh=!1,_e=e;_e!==null;)if(e=_e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_e=t;else for(;_e!==null;){e=_e;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,_=v.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?p:vr(e.type,p),_);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(I){Et(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,_e=t;break}_e=e.return}return v=xx,xx=!1,v}function Ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Cg(e,n,i)}s=s.next}while(s!==r)}}function Cf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ig(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function pS(t){var e=t.alternate;e!==null&&(t.alternate=null,pS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Br],delete e[$c],delete e[fg],delete e[RD],delete e[PD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mS(t){return t.tag===5||t.tag===3||t.tag===4}function Ex(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ng(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eh));else if(r!==4&&(t=t.child,t!==null))for(Ng(t,e,n),t=t.sibling;t!==null;)Ng(t,e,n),t=t.sibling}function Ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ag(t,e,n),t=t.sibling;t!==null;)Ag(t,e,n),t=t.sibling}var qt=null,_r=!1;function Fs(t,e,n){for(n=n.child;n!==null;)gS(t,e,n),n=n.sibling}function gS(t,e,n){if(Hr&&typeof Hr.onCommitFiberUnmount=="function")try{Hr.onCommitFiberUnmount(vf,n)}catch{}switch(n.tag){case 5:cn||Ea(n,e);case 6:var r=qt,s=_r;qt=null,Fs(t,e,n),qt=r,_r=s,qt!==null&&(_r?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(_r?(t=qt,n=n.stateNode,t.nodeType===8?tm(t.parentNode,n):t.nodeType===1&&tm(t,n),Vc(t)):tm(qt,n.stateNode));break;case 4:r=qt,s=_r,qt=n.stateNode.containerInfo,_r=!0,Fs(t,e,n),qt=r,_r=s;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Cg(n,e,o),s=s.next}while(s!==r)}Fs(t,e,n);break;case 1:if(!cn&&(Ea(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Et(n,e,a)}Fs(t,e,n);break;case 21:Fs(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,Fs(t,e,n),cn=r):Fs(t,e,n);break;default:Fs(t,e,n)}}function bx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new GD),e.forEach(function(r){var s=sO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qt=a.stateNode,_r=!1;break e;case 3:qt=a.stateNode.containerInfo,_r=!0;break e;case 4:qt=a.stateNode.containerInfo,_r=!0;break e}a=a.return}if(qt===null)throw Error(he(160));gS(i,o,s),qt=null,_r=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Et(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yS(e,t),e=e.sibling}function yS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(e,t),Dr(t),r&4){try{Ec(3,t,t.return),Cf(3,t)}catch(p){Et(t,t.return,p)}try{Ec(5,t,t.return)}catch(p){Et(t,t.return,p)}}break;case 1:gr(e,t),Dr(t),r&512&&n!==null&&Ea(n,n.return);break;case 5:if(gr(e,t),Dr(t),r&512&&n!==null&&Ea(n,n.return),t.flags&32){var s=t.stateNode;try{Dc(s,"")}catch(p){Et(t,t.return,p)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Fb(s,i),Jm(a,o);var u=Jm(a,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?Wb(s,f):h==="dangerouslySetInnerHTML"?Bb(s,f):h==="children"?Dc(s,f):Xy(s,h,f,u)}switch(a){case"input":Gm(s,i);break;case"textarea":Ub(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Sa(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Sa(s,!!i.multiple,i.defaultValue,!0):Sa(s,!!i.multiple,i.multiple?[]:"",!1))}s[$c]=i}catch(p){Et(t,t.return,p)}}break;case 6:if(gr(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(he(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(p){Et(t,t.return,p)}}break;case 3:if(gr(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vc(e.containerInfo)}catch(p){Et(t,t.return,p)}break;case 4:gr(e,t),Dr(t);break;case 13:gr(e,t),Dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kv=It())),r&4&&bx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(u=cn)||h,gr(e,t),cn=u):gr(e,t),Dr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(_e=t,h=t.child;h!==null;){for(f=_e=h;_e!==null;){switch(m=_e,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ec(4,m,m.return);break;case 1:Ea(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(p){Et(r,n,p)}}break;case 5:Ea(m,m.return);break;case 22:if(m.memoizedState!==null){Sx(f);continue}}g!==null?(g.return=m,_e=g):Sx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=$b("display",o))}catch(p){Et(t,t.return,p)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(p){Et(t,t.return,p)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gr(e,t),Dr(t),r&4&&bx(t);break;case 21:break;default:gr(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mS(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Dc(s,""),r.flags&=-33);var i=Ex(t);Ag(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ex(t);Ng(t,a,o);break;default:throw Error(he(161))}}catch(c){Et(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YD(t,e,n){_e=t,vS(t)}function vS(t,e,n){for(var r=(t.mode&1)!==0;_e!==null;){var s=_e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wd;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||cn;a=wd;var u=cn;if(wd=o,(cn=c)&&!u)for(_e=s;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?Cx(s):c!==null?(c.return=o,_e=c):Cx(s);for(;i!==null;)_e=i,vS(i),i=i.sibling;_e=s,wd=a,cn=u}Tx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,_e=i):Tx(t)}}function Tx(t){for(;_e!==null;){var e=_e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||Cf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:vr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Vc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}cn||e.flags&512&&Ig(e)}catch(m){Et(e,e.return,m)}}if(e===t){_e=null;break}if(n=e.sibling,n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Sx(t){for(;_e!==null;){var e=_e;if(e===t){_e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_e=n;break}_e=e.return}}function Cx(t){for(;_e!==null;){var e=_e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cf(4,e)}catch(c){Et(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Et(e,s,c)}}var i=e.return;try{Ig(e)}catch(c){Et(e,i,c)}break;case 5:var o=e.return;try{Ig(e)}catch(c){Et(e,o,c)}}}catch(c){Et(e,e.return,c)}if(e===t){_e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_e=a;break}_e=e.return}}var XD=Math.ceil,jh=Rs.ReactCurrentDispatcher,Nv=Rs.ReactCurrentOwner,ir=Rs.ReactCurrentBatchConfig,Je=0,$t=null,Rt=null,Zt=0,Mn=0,ba=zi(0),Lt=0,Qc=null,Co=0,If=0,Av=0,bc=null,In=null,kv=0,ol=1/0,ds=null,Dh=!1,kg=null,mi=null,_d=!1,li=null,Oh=0,Tc=0,Rg=null,Gd=-1,Qd=0;function xn(){return Je&6?It():Gd!==-1?Gd:Gd=It()}function gi(t){return t.mode&1?Je&2&&Zt!==0?Zt&-Zt:DD.transition!==null?(Qd===0&&(Qd=nT()),Qd):(t=it,t!==0||(t=window.event,t=t===void 0?16:cT(t.type)),t):1}function Sr(t,e,n,r){if(50<Tc)throw Tc=0,Rg=null,Error(he(185));yu(t,n,r),(!(Je&2)||t!==$t)&&(t===$t&&(!(Je&2)&&(If|=n),Lt===4&&Qs(t,Zt)),jn(t,r),n===1&&Je===0&&!(e.mode&1)&&(ol=It()+500,bf&&Bi()))}function jn(t,e){var n=t.callbackNode;Dj(t,e);var r=vh(t,t===$t?Zt:0);if(r===0)n!==null&&O_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O_(n),e===1)t.tag===0?jD(Ix.bind(null,t)):NT(Ix.bind(null,t)),AD(function(){!(Je&6)&&Bi()}),n=null;else{switch(rT(r)){case 1:n=nv;break;case 4:n=eT;break;case 16:n=yh;break;case 536870912:n=tT;break;default:n=yh}n=CS(n,wS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wS(t,e){if(Gd=-1,Qd=0,Je&6)throw Error(he(327));var n=t.callbackNode;if(ka()&&t.callbackNode!==n)return null;var r=vh(t,t===$t?Zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lh(t,r);else{e=r;var s=Je;Je|=2;var i=xS();($t!==t||Zt!==e)&&(ds=null,ol=It()+500,wo(t,e));do try{eO();break}catch(a){_S(t,a)}while(!0);mv(),jh.current=i,Je=s,Rt!==null?e=0:($t=null,Zt=0,e=Lt)}if(e!==0){if(e===2&&(s=sg(t),s!==0&&(r=s,e=Pg(t,s))),e===1)throw n=Qc,wo(t,0),Qs(t,r),jn(t,It()),n;if(e===6)Qs(t,r);else{if(s=t.current.alternate,!(r&30)&&!ZD(s)&&(e=Lh(t,r),e===2&&(i=sg(t),i!==0&&(r=i,e=Pg(t,i))),e===1))throw n=Qc,wo(t,0),Qs(t,r),jn(t,It()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(he(345));case 2:io(t,In,ds);break;case 3:if(Qs(t,r),(r&130023424)===r&&(e=kv+500-It(),10<e)){if(vh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hg(io.bind(null,t,In,ds),e);break}io(t,In,ds);break;case 4:if(Qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XD(r/1960))-r,10<r){t.timeoutHandle=hg(io.bind(null,t,In,ds),r);break}io(t,In,ds);break;case 5:io(t,In,ds);break;default:throw Error(he(329))}}}return jn(t,It()),t.callbackNode===n?wS.bind(null,t):null}function Pg(t,e){var n=bc;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=Lh(t,e),t!==2&&(e=In,In=n,e!==null&&jg(e)),t}function jg(t){In===null?In=t:In.push.apply(In,t)}function ZD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(t,e){for(e&=~Av,e&=~If,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Tr(e),r=1<<n;t[n]=-1,e&=~r}}function Ix(t){if(Je&6)throw Error(he(327));ka();var e=vh(t,0);if(!(e&1))return jn(t,It()),null;var n=Lh(t,e);if(t.tag!==0&&n===2){var r=sg(t);r!==0&&(e=r,n=Pg(t,r))}if(n===1)throw n=Qc,wo(t,0),Qs(t,e),jn(t,It()),n;if(n===6)throw Error(he(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,io(t,In,ds),jn(t,It()),null}function Rv(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(ol=It()+500,bf&&Bi())}}function Io(t){li!==null&&li.tag===0&&!(Je&6)&&ka();var e=Je;Je|=1;var n=ir.transition,r=it;try{if(ir.transition=null,it=1,t)return t()}finally{it=r,ir.transition=n,Je=e,!(Je&6)&&Bi()}}function Pv(){Mn=ba.current,ht(ba)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ND(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&bh();break;case 3:sl(),ht(Rn),ht(fn),xv();break;case 5:_v(r);break;case 4:sl();break;case 13:ht(mt);break;case 19:ht(mt);break;case 10:gv(r.type._context);break;case 22:case 23:Pv()}n=n.return}if($t=t,Rt=t=yi(t.current,null),Zt=Mn=e,Lt=0,Qc=null,Av=If=Co=0,In=bc=null,lo!==null){for(e=0;e<lo.length;e++)if(n=lo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}lo=null}return t}function _S(t,e){do{var n=Rt;try{if(mv(),Hd.current=Ph,Rh){for(var r=gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rh=!1}if(So=0,Bt=Ot=gt=null,xc=!1,qc=0,Nv.current=null,n===null||n.return===null){Lt=1,Qc=e,Rt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Zt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=px(o);if(g!==null){g.flags&=-257,mx(g,o,a,i,e),g.mode&1&&fx(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var p=new Set;p.add(c),e.updateQueue=p}else v.add(c);break e}else{if(!(e&1)){fx(i,u,e),jv();break e}c=Error(he(426))}}else if(pt&&a.mode&1){var _=px(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),mx(_,o,a,i,e),fv(il(c,a));break e}}i=c=il(c,a),Lt!==4&&(Lt=2),bc===null?bc=[i]:bc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=rS(i,c,e);ax(i,y);break e;case 1:a=c;var w=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(mi===null||!mi.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=sS(i,a,e);ax(i,I);break e}}i=i.return}while(i!==null)}bS(n)}catch(R){e=R,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function xS(){var t=jh.current;return jh.current=Ph,t===null?Ph:t}function jv(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),$t===null||!(Co&268435455)&&!(If&268435455)||Qs($t,Zt)}function Lh(t,e){var n=Je;Je|=2;var r=xS();($t!==t||Zt!==e)&&(ds=null,wo(t,e));do try{JD();break}catch(s){_S(t,s)}while(!0);if(mv(),Je=n,jh.current=r,Rt!==null)throw Error(he(261));return $t=null,Zt=0,Lt}function JD(){for(;Rt!==null;)ES(Rt)}function eO(){for(;Rt!==null&&!Sj();)ES(Rt)}function ES(t){var e=SS(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?bS(t):Rt=e,Nv.current=null}function bS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=KD(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Rt=null;return}}else if(n=qD(n,e,Mn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Lt===0&&(Lt=5)}function io(t,e,n){var r=it,s=ir.transition;try{ir.transition=null,it=1,tO(t,e,n,r)}finally{ir.transition=s,it=r}return null}function tO(t,e,n,r){do ka();while(li!==null);if(Je&6)throw Error(he(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(he(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Oj(t,i),t===$t&&(Rt=$t=null,Zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_d||(_d=!0,CS(yh,function(){return ka(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ir.transition,ir.transition=null;var o=it;it=1;var a=Je;Je|=4,Nv.current=null,QD(t,n),yS(n,t),xD(ug),wh=!!cg,ug=cg=null,t.current=n,YD(n),Cj(),Je=a,it=o,ir.transition=i}else t.current=n;if(_d&&(_d=!1,li=t,Oh=s),i=t.pendingLanes,i===0&&(mi=null),Aj(n.stateNode),jn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Dh)throw Dh=!1,t=kg,kg=null,t;return Oh&1&&t.tag!==0&&ka(),i=t.pendingLanes,i&1?t===Rg?Tc++:(Tc=0,Rg=t):Tc=0,Bi(),null}function ka(){if(li!==null){var t=rT(Oh),e=ir.transition,n=it;try{if(ir.transition=null,it=16>t?16:t,li===null)var r=!1;else{if(t=li,li=null,Oh=0,Je&6)throw Error(he(331));var s=Je;for(Je|=4,_e=t.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(_e=u;_e!==null;){var h=_e;switch(h.tag){case 0:case 11:case 15:Ec(8,h,i)}var f=h.child;if(f!==null)f.return=h,_e=f;else for(;_e!==null;){h=_e;var m=h.sibling,g=h.return;if(pS(h),h===u){_e=null;break}if(m!==null){m.return=g,_e=m;break}_e=g}}}var v=i.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var _=p.sibling;p.sibling=null,p=_}while(p!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ec(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,_e=y;break e}_e=i.return}}var w=t.current;for(_e=w;_e!==null;){o=_e;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,_e=x;else e:for(o=w;_e!==null;){if(a=_e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cf(9,a)}}catch(R){Et(a,a.return,R)}if(a===o){_e=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,_e=I;break e}_e=a.return}}if(Je=s,Bi(),Hr&&typeof Hr.onPostCommitFiberRoot=="function")try{Hr.onPostCommitFiberRoot(vf,t)}catch{}r=!0}return r}finally{it=n,ir.transition=e}}return!1}function Nx(t,e,n){e=il(n,e),e=rS(t,e,1),t=pi(t,e,1),e=xn(),t!==null&&(yu(t,1,e),jn(t,e))}function Et(t,e,n){if(t.tag===3)Nx(t,t,n);else for(;e!==null;){if(e.tag===3){Nx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))){t=il(n,t),t=sS(e,t,1),e=pi(e,t,1),t=xn(),e!==null&&(yu(e,1,t),jn(e,t));break}}e=e.return}}function nO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Zt&n)===n&&(Lt===4||Lt===3&&(Zt&130023424)===Zt&&500>It()-kv?wo(t,0):Av|=n),jn(t,e)}function TS(t,e){e===0&&(t.mode&1?(e=ud,ud<<=1,!(ud&130023424)&&(ud=4194304)):e=1);var n=xn();t=bs(t,e),t!==null&&(yu(t,e,n),jn(t,n))}function rO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),TS(t,n)}function sO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(e),TS(t,n)}var SS;SS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rn.current)kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kn=!1,HD(t,e,n);kn=!!(t.flags&131072)}else kn=!1,pt&&e.flags&1048576&&AT(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kd(t,e),t=e.pendingProps;var s=tl(e,fn.current);Aa(e,n),s=bv(null,e,r,t,s,n);var i=Tv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pn(r)?(i=!0,Th(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vv(e),s.updater=Sf,e.stateNode=s,s._reactInternals=e,wg(e,r,t,n),e=Eg(null,e,r,!0,i,n)):(e.tag=0,pt&&i&&dv(e),wn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oO(r),t=vr(r,t),s){case 0:e=xg(null,e,r,t,n);break e;case 1:e=vx(null,e,r,t,n);break e;case 11:e=gx(null,e,r,t,n);break e;case 14:e=yx(null,e,r,vr(r.type,t),n);break e}throw Error(he(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),xg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),vx(t,e,r,s,n);case 3:e:{if(lS(e),t===null)throw Error(he(387));r=e.pendingProps,i=e.memoizedState,s=i.element,OT(t,e),Ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=il(Error(he(423)),e),e=wx(t,e,r,n,s);break e}else if(r!==s){s=il(Error(he(424)),e),e=wx(t,e,r,n,s);break e}else for(Un=fi(e.stateNode.containerInfo.firstChild),$n=e,pt=!0,xr=null,n=jT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nl(),r===s){e=Ts(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return LT(e),t===null&&gg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,dg(r,s)?o=null:i!==null&&dg(r,i)&&(e.flags|=32),aS(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&gg(e),null;case 13:return cS(t,e,n);case 4:return wv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=rl(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),gx(t,e,r,s,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,lt(Ih,r._currentValue),r._currentValue=o,i!==null)if(Cr(i.value,o)){if(i.children===s.children&&!Rn.current){e=Ts(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=vs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),yg(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(he(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),yg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Aa(e,n),s=ar(s),r=r(s),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,s=vr(r,e.pendingProps),s=vr(r.type,s),yx(t,e,r,s,n);case 15:return iS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:vr(r,s),Kd(t,e),e.tag=1,Pn(r)?(t=!0,Th(e)):t=!1,Aa(e,n),nS(e,r,s),wg(e,r,s,n),Eg(null,e,r,!0,t,n);case 19:return uS(t,e,n);case 22:return oS(t,e,n)}throw Error(he(156,e.tag))};function CS(t,e){return Jb(t,e)}function iO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new iO(t,e,n,r)}function Dv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oO(t){if(typeof t=="function")return Dv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Jy)return 11;if(t===ev)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fa:return _o(n.children,s,i,e);case Zy:o=8,s|=8;break;case $m:return t=sr(12,n,e,s|2),t.elementType=$m,t.lanes=i,t;case Wm:return t=sr(13,n,e,s),t.elementType=Wm,t.lanes=i,t;case Hm:return t=sr(19,n,e,s),t.elementType=Hm,t.lanes=i,t;case Lb:return Nf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Db:o=10;break e;case Ob:o=9;break e;case Jy:o=11;break e;case ev:o=14;break e;case qs:o=16,r=null;break e}throw Error(he(130,t==null?t:typeof t,""))}return e=sr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _o(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function Nf(t,e,n,r){return t=sr(22,t,r,e),t.elementType=Lb,t.lanes=n,t.stateNode={isHidden:!1},t}function cm(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wp(0),this.expirationTimes=Wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,s,i,o,a,c){return t=new aO(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=sr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vv(i),t}function lO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function IS(t){if(!t)return Ii;t=t._reactInternals;e:{if(Wo(t)!==t||t.tag!==1)throw Error(he(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(he(171))}if(t.tag===1){var n=t.type;if(Pn(n))return IT(t,n,e)}return e}function NS(t,e,n,r,s,i,o,a,c){return t=Ov(n,r,!0,t,s,i,o,a,c),t.context=IS(null),n=t.current,r=xn(),s=gi(n),i=vs(r,s),i.callback=e??null,pi(n,i,s),t.current.lanes=s,yu(t,s,r),jn(t,r),t}function Af(t,e,n,r){var s=e.current,i=xn(),o=gi(s);return n=IS(n),e.context===null?e.context=n:e.pendingContext=n,e=vs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=pi(s,e,o),t!==null&&(Sr(t,s,o,i),Wd(t,s,o)),o}function Mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lv(t,e){Ax(t,e),(t=t.alternate)&&Ax(t,e)}function cO(){return null}var AS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mv(t){this._internalRoot=t}kf.prototype.render=Mv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(he(409));Af(t,e,null,null)};kf.prototype.unmount=Mv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Io(function(){Af(null,t,null,null)}),e[Es]=null}};function kf(t){this._internalRoot=t}kf.prototype.unstable_scheduleHydration=function(t){if(t){var e=oT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gs.length&&e!==0&&e<Gs[n].priority;n++);Gs.splice(n,0,t),n===0&&lT(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kx(){}function uO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Mh(o);i.call(u)}}var o=NS(e,r,t,0,null,!1,!1,"",kx);return t._reactRootContainer=o,t[Es]=o.current,zc(t.nodeType===8?t.parentNode:t),Io(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Mh(c);a.call(u)}}var c=Ov(t,0,!1,null,null,!1,!1,"",kx);return t._reactRootContainer=c,t[Es]=c.current,zc(t.nodeType===8?t.parentNode:t),Io(function(){Af(e,c,n,r)}),c}function Pf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Mh(o);a.call(c)}}Af(e,o,t,s)}else o=uO(n,e,t,s,r);return Mh(o)}sT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oc(e.pendingLanes);n!==0&&(rv(e,n|1),jn(e,It()),!(Je&6)&&(ol=It()+500,Bi()))}break;case 13:Io(function(){var r=bs(t,1);if(r!==null){var s=xn();Sr(r,t,1,s)}}),Lv(t,1)}};sv=function(t){if(t.tag===13){var e=bs(t,134217728);if(e!==null){var n=xn();Sr(e,t,134217728,n)}Lv(t,134217728)}};iT=function(t){if(t.tag===13){var e=gi(t),n=bs(t,e);if(n!==null){var r=xn();Sr(n,t,e,r)}Lv(t,e)}};oT=function(){return it};aT=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};tg=function(t,e,n){switch(e){case"input":if(Gm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ef(r);if(!s)throw Error(he(90));Vb(r),Gm(r,s)}}}break;case"textarea":Ub(t,n);break;case"select":e=n.value,e!=null&&Sa(t,!!n.multiple,e,!1)}};Kb=Rv;Gb=Io;var dO={usingClientEntryPoint:!1,Events:[wu,ya,Ef,Hb,qb,Rv]},ec={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hO={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Xb(t),t===null?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||cO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{vf=xd.inject(hO),Hr=xd}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dO;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(he(200));return lO(t,e,null,n)};qn.createRoot=function(t,e){if(!Vv(t))throw Error(he(299));var n=!1,r="",s=AS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,s),t[Es]=e.current,zc(t.nodeType===8?t.parentNode:t),new Mv(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(he(188)):(t=Object.keys(t).join(","),Error(he(268,t)));return t=Xb(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Io(t)};qn.hydrate=function(t,e,n){if(!Rf(e))throw Error(he(200));return Pf(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=AS;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=NS(e,null,t,1,n??null,s,!1,i,o),t[Es]=e.current,zc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new kf(e)};qn.render=function(t,e,n){if(!Rf(e))throw Error(he(200));return Pf(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!Rf(t))throw Error(he(40));return t._reactRootContainer?(Io(function(){Pf(null,null,t,!1,function(){t._reactRootContainer=null,t[Es]=null})}),!0):!1};qn.unstable_batchedUpdates=Rv;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rf(n))throw Error(he(200));if(t==null||t._reactInternals===void 0)throw Error(he(38));return Pf(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function kS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kS)}catch(t){console.error(t)}}kS(),kb.exports=qn;var Ho=kb.exports;const fO=Wy(Ho);var RS,Rx=Ho;RS=Rx.createRoot,Rx.hydrateRoot;function pO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var PS={exports:{}},jS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=b;function mO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gO=typeof Object.is=="function"?Object.is:mO,yO=al.useState,vO=al.useEffect,wO=al.useLayoutEffect,_O=al.useDebugValue;function xO(t,e){var n=e(),r=yO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return wO(function(){s.value=n,s.getSnapshot=e,dm(s)&&i({inst:s})},[t,n,e]),vO(function(){return dm(s)&&i({inst:s}),t(function(){dm(s)&&i({inst:s})})},[t]),_O(n),n}function dm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gO(t,n)}catch{return!0}}function EO(t,e){return e()}var bO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EO:xO;jS.useSyncExternalStore=al.useSyncExternalStore!==void 0?al.useSyncExternalStore:bO;PS.exports=jS;var TO=PS.exports;const SO=Nb.useInsertionEffect,CO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IO=CO?b.useLayoutEffect:b.useEffect,NO=SO||IO,DS=t=>{const e=b.useRef([t,(...n)=>e[0](...n)]).current;return NO(()=>{e[0]=t}),e[1]},AO="popstate",Fv="pushState",Uv="replaceState",kO="hashchange",Px=[AO,Fv,Uv,kO],RO=t=>{for(const e of Px)addEventListener(e,t);return()=>{for(const e of Px)removeEventListener(e,t)}},OS=(t,e)=>TO.useSyncExternalStore(RO,t,e),PO=()=>location.search,jO=({ssrSearch:t=""}={})=>OS(PO,()=>t),jx=()=>location.pathname,DO=({ssrPath:t}={})=>OS(jx,t?()=>t:jx),OO=(t,{replace:e=!1,state:n=null}={})=>history[e?Uv:Fv](n,"",t),LO=(t={})=>[DO(t),OO],Dx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Dx]>"u"){for(const t of[Fv,Uv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Dx,{value:!0})}const MO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",LS=(t="")=>t==="/"?"":t,VO=(t,e)=>t[0]==="~"?t.slice(1):LS(e)+t,FO=(t="",e)=>MO(Ox(LS(t)),Ox(e)),Ox=t=>{try{return decodeURI(t)}catch{return t}},MS={hook:LO,searchHook:jO,parser:pO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},VS=b.createContext(MS),jf=()=>b.useContext(VS),FS={},US=b.createContext(FS),UO=()=>b.useContext(US),zv=t=>{const[e,n]=t.hook(t);return[FO(t.base,e),DS((r,s)=>n(VO(r,t.base),s))]},zS=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...c]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[a]:[]]:[!1,null]},zO=({children:t,...e})=>{var h,f;const n=jf(),r=e.hook?MS:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=b.useRef({}),c=a.current,u=c;for(let m in r){const g=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===u&&g!==u[m]&&(a.current=u={...u}),u[m]=g,g!==r[m]&&(s=u)}return b.createElement(VS.Provider,{value:s,children:t})},Lx=({children:t,component:e},n)=>e?b.createElement(e,{params:n}):typeof t=="function"?t(n):t,BO=t=>{let e=b.useRef(FS),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},ro=({path:t,nest:e,match:n,...r})=>{const s=jf(),[i]=zv(s),[o,a,c]=n??zS(s.parser,t,i,e),u=BO({...UO(),...a});if(!o)return null;const h=c?b.createElement(zO,{base:c},Lx(r,u)):Lx(r,u);return b.createElement(US.Provider,{value:u,children:h})},Dg=b.forwardRef((t,e)=>{const n=jf(),[r,s]=zv(n),{to:i="",href:o=i,onClick:a,asChild:c,children:u,className:h,replace:f,state:m,...g}=t,v=DS(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(a==null||a(_),_.defaultPrevented||(_.preventDefault(),s(o,t)))}),p=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&b.isValidElement(u)?b.cloneElement(u,{onClick:v,href:p}):b.createElement("a",{...g,onClick:v,href:p,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),BS=t=>Array.isArray(t)?t.flatMap(e=>BS(e&&e.type===b.Fragment?e.props.children:e)):[t],$O=({children:t,location:e})=>{const n=jf(),[r]=zv(n);for(const s of BS(t)){let i=0;if(b.isValidElement(s)&&(i=zS(n.parser,s.props.path,e||r,s.props.nest))[0])return b.cloneElement(s,{match:i})}return null};var xu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},No=typeof window>"u"||"Deno"in globalThis;function Zn(){}function WO(t,e){return typeof t=="function"?t(e):t}function Og(t){return typeof t=="number"&&t>=0&&t!==1/0}function $S(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ra(t,e){return typeof t=="function"?t(e):t}function Er(t,e){return typeof t=="function"?t(e):t}function Mx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Bv(o,e.options))return!1}else if(!Xc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Vx(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Yc(e.options.mutationKey)!==Yc(i))return!1}else if(!Xc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Bv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Yc)(t)}function Yc(t){return JSON.stringify(t,(e,n)=>Mg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Xc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Xc(t[n],e[n])):!1}function WS(t,e){if(t===e)return t;const n=Fx(t)&&Fx(e);if(n||Mg(t)&&Mg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,c++):(a[h]=WS(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:a}return e}function Lg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Fx(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Mg(t){if(!Ux(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Ux(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Ux(t){return Object.prototype.toString.call(t)==="[object Object]"}function HO(t){return new Promise(e=>{setTimeout(e,t)})}function Vg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?WS(t,e):e}function qO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function KO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $v=Symbol();function HS(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$v?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ho,ei,za,cb,GO=(cb=class extends xu{constructor(){super();je(this,ho);je(this,ei);je(this,za);Ee(this,za,e=>{if(!No&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,ei)||this.setEventListener(G(this,za))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,ei))==null||e.call(this),Ee(this,ei,void 0))}setEventListener(e){var n;Ee(this,za,e),(n=G(this,ei))==null||n.call(this),Ee(this,ei,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,ho)!==e&&(Ee(this,ho,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,ho)=="boolean"?G(this,ho):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ho=new WeakMap,ei=new WeakMap,za=new WeakMap,cb),Wv=new GO,Ba,ti,$a,ub,QO=(ub=class extends xu{constructor(){super();je(this,Ba,!0);je(this,ti);je(this,$a);Ee(this,$a,e=>{if(!No&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,ti)||this.setEventListener(G(this,$a))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,ti))==null||e.call(this),Ee(this,ti,void 0))}setEventListener(e){var n;Ee(this,$a,e),(n=G(this,ti))==null||n.call(this),Ee(this,ti,e(this.setOnline.bind(this)))}setOnline(e){G(this,Ba)!==e&&(Ee(this,Ba,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,Ba)}},Ba=new WeakMap,ti=new WeakMap,$a=new WeakMap,ub),Vh=new QO;function Fg(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function YO(t){return Math.min(1e3*2**t,3e4)}function qS(t){return(t??"online")==="online"?Vh.isOnline():!0}var KS=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function hm(t){return t instanceof KS}function GS(t){let e=!1,n=0,r=!1,s;const i=Fg(),o=p=>{var _;r||(m(new KS(p)),(_=t.abort)==null||_.call(t))},a=()=>{e=!0},c=()=>{e=!1},u=()=>Wv.isFocused()&&(t.networkMode==="always"||Vh.isOnline())&&t.canRun(),h=()=>qS(t.networkMode)&&t.canRun(),f=p=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,p),s==null||s(),i.resolve(p))},m=p=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,p),s==null||s(),i.reject(p))},g=()=>new Promise(p=>{var _;s=y=>{(r||u())&&p(y)},(_=t.onPause)==null||_.call(t)}).then(()=>{var p;s=void 0,r||(p=t.onContinue)==null||p.call(t)}),v=()=>{if(r)return;let p;const _=n===0?t.initialPromise:void 0;try{p=_??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(f).catch(y=>{var L;if(r)return;const w=t.retry??(No?0:3),x=t.retryDelay??YO,I=typeof x=="function"?x(n,y):x,R=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!R){m(y);return}n++,(L=t.onFail)==null||L.call(t,n,y),HO(I).then(()=>u()?void 0:g()).then(()=>{e?m(y):v()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:h,start:()=>(h()?v():g().then(v),i)}}function XO(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Gt=XO(),fo,db,QS=(db=class{constructor(){je(this,fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Og(this.gcTime)&&Ee(this,fo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(No?1/0:5*60*1e3))}clearGcTimeout(){G(this,fo)&&(clearTimeout(G(this,fo)),Ee(this,fo,void 0))}},fo=new WeakMap,db),Wa,Ha,Xn,an,hu,po,wr,us,hb,ZO=(hb=class extends QS{constructor(n){super();je(this,wr);je(this,Wa);je(this,Ha);je(this,Xn);je(this,an);je(this,hu);je(this,po);Ee(this,po,!1),Ee(this,hu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,Xn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,Wa,JO(this.options)),this.state=n.state??G(this,Wa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=G(this,an))==null?void 0:n.promise}setOptions(n){this.options={...G(this,hu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Xn).remove(this)}setData(n,r){const s=Vg(this.state.data,n,this.options);return Ge(this,wr,us).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ge(this,wr,us).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=G(this,an))==null?void 0:s.promise;return(i=G(this,an))==null||i.cancel(n),r?r.then(Zn).catch(Zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Wa))}isActive(){return this.observers.some(n=>Er(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$v||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!$S(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,an))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,an))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),G(this,Xn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(G(this,an)&&(G(this,po)?G(this,an).cancel({revert:!0}):G(this,an).cancelRetry()),this.scheduleGc()),G(this,Xn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ge(this,wr,us).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,an))return G(this,an).continueRetry(),G(this,an).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ee(this,po,!0),s.signal)})},o=()=>{const m=HS(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Ee(this,po,!1),this.options.persister?this.options.persister(m,g,this):m(g)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),Ee(this,Ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Ge(this,wr,us).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=m=>{var g,v,p,_;hm(m)&&m.silent||Ge(this,wr,us).call(this,{type:"error",error:m}),hm(m)||((v=(g=G(this,Xn).config).onError)==null||v.call(g,m,this),(_=(p=G(this,Xn).config).onSettled)==null||_.call(p,this.state.data,m,this)),this.scheduleGc()};return Ee(this,an,GS({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,v,p,_;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){c(y);return}(v=(g=G(this,Xn).config).onSuccess)==null||v.call(g,m,this),(_=(p=G(this,Xn).config).onSettled)==null||_.call(p,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{Ge(this,wr,us).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{Ge(this,wr,us).call(this,{type:"pause"})},onContinue:()=>{Ge(this,wr,us).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),G(this,an).start()}},Wa=new WeakMap,Ha=new WeakMap,Xn=new WeakMap,an=new WeakMap,hu=new WeakMap,po=new WeakMap,wr=new WeakSet,us=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...YS(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return hm(i)&&i.revert&&G(this,Ha)?{...G(this,Ha),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Gt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,Xn).notify({query:this,type:"updated",action:n})})},hb);function YS(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qS(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function JO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Mr,fb,eL=(fb=class extends xu{constructor(e={}){super();je(this,Mr);this.config=e,Ee(this,Mr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Bv(s,n);let o=this.get(i);return o||(o=new ZO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Mr).has(e.queryHash)||(G(this,Mr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Mr).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Mr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Mr).get(e)}getAll(){return[...G(this,Mr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Mx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Mx(e,r)):n}notify(e){Gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Gt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mr=new WeakMap,fb),Vr,yn,mo,Fr,Ws,pb,tL=(pb=class extends QS{constructor(n){super();je(this,Fr);je(this,Vr);je(this,yn);je(this,mo);this.mutationId=n.mutationId,Ee(this,yn,n.mutationCache),Ee(this,Vr,[]),this.state=n.state||nL(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){G(this,Vr).includes(n)||(G(this,Vr).push(n),this.clearGcTimeout(),G(this,yn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Vr,G(this,Vr).filter(r=>r!==n)),this.scheduleGc(),G(this,yn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){G(this,Vr).length||(this.state.status==="pending"?this.scheduleGc():G(this,yn).remove(this))}continue(){var n;return((n=G(this,mo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,c,u,h,f,m,g,v,p,_,y,w,x,I,R,L,S,T;Ee(this,mo,GS({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,j)=>{Ge(this,Fr,Ws).call(this,{type:"failed",failureCount:C,error:j})},onPause:()=>{Ge(this,Fr,Ws).call(this,{type:"pause"})},onContinue:()=>{Ge(this,Fr,Ws).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,yn).canRun(this)}));const r=this.state.status==="pending",s=!G(this,mo).canStart();try{if(!r){Ge(this,Fr,Ws).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=G(this,yn).config).onMutate)==null?void 0:o.call(i,n,this));const j=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,n));j!==this.state.context&&Ge(this,Fr,Ws).call(this,{type:"pending",context:j,variables:n,isPaused:s})}const C=await G(this,mo).start();return await((h=(u=G(this,yn).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,C,n,this.state.context)),await((v=(g=G(this,yn).config).onSettled)==null?void 0:v.call(g,C,null,this.state.variables,this.state.context,this)),await((_=(p=this.options).onSettled)==null?void 0:_.call(p,C,null,n,this.state.context)),Ge(this,Fr,Ws).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(y=G(this,yn).config).onError)==null?void 0:w.call(y,C,n,this.state.context,this)),await((I=(x=this.options).onError)==null?void 0:I.call(x,C,n,this.state.context)),await((L=(R=G(this,yn).config).onSettled)==null?void 0:L.call(R,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,n,this.state.context)),C}finally{Ge(this,Fr,Ws).call(this,{type:"error",error:C})}}finally{G(this,yn).runNext(this)}}},Vr=new WeakMap,yn=new WeakMap,mo=new WeakMap,Fr=new WeakSet,Ws=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Gt.batch(()=>{G(this,Vr).forEach(s=>{s.onMutationUpdate(n)}),G(this,yn).notify({mutation:this,type:"updated",action:n})})},pb);function nL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ln,fu,mb,rL=(mb=class extends xu{constructor(e={}){super();je(this,Ln);je(this,fu);this.config=e,Ee(this,Ln,new Map),Ee(this,fu,Date.now())}build(e,n,r){const s=new tL({mutationCache:this,mutationId:++rd(this,fu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ed(e),r=G(this,Ln).get(n)??[];r.push(e),G(this,Ln).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ed(e);if(G(this,Ln).has(n)){const s=(r=G(this,Ln).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?G(this,Ln).delete(n):G(this,Ln).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=G(this,Ln).get(Ed(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=G(this,Ln).get(Ed(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Gt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...G(this,Ln).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Vx(n,r))}findAll(e={}){return this.getAll().filter(n=>Vx(e,n))}notify(e){Gt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Gt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zn))))}},Ln=new WeakMap,fu=new WeakMap,mb);function Ed(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function zx(t){return{onFetch:(e,n)=>{var h,f,m,g,v;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const _=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=HS(e.options,e.fetchOptions),w=async(x,I,R)=>{if(p)return Promise.reject();if(I==null&&x.pages.length)return Promise.resolve(x);const L={queryKey:e.queryKey,pageParam:I,direction:R?"backward":"forward",meta:e.options.meta};_(L);const S=await y(L),{maxPages:T}=e.options,C=R?KO:qO;return{pages:C(x.pages,S,T),pageParams:C(x.pageParams,I,T)}};if(s&&i.length){const x=s==="backward",I=x?sL:Bx,R={pages:i,pageParams:o},L=I(r,R);a=await w(R,L,x)}else{const x=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:Bx(r,a);if(c>0&&I==null)break;a=await w(a,I),c++}while(c<x)}return a};e.options.persister?e.fetchFn=()=>{var p,_;return(_=(p=e.options).persister)==null?void 0:_.call(p,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function Bx(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function sL(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xt,ni,ri,qa,Ka,si,Ga,Qa,gb,iL=(gb=class{constructor(t={}){je(this,xt);je(this,ni);je(this,ri);je(this,qa);je(this,Ka);je(this,si);je(this,Ga);je(this,Qa);Ee(this,xt,t.queryCache||new eL),Ee(this,ni,t.mutationCache||new rL),Ee(this,ri,t.defaultOptions||{}),Ee(this,qa,new Map),Ee(this,Ka,new Map),Ee(this,si,0)}mount(){rd(this,si)._++,G(this,si)===1&&(Ee(this,Ga,Wv.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,xt).onFocus())})),Ee(this,Qa,Vh.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,xt).onOnline())})))}unmount(){var t,e;rd(this,si)._--,G(this,si)===0&&((t=G(this,Ga))==null||t.call(this),Ee(this,Ga,void 0),(e=G(this,Qa))==null||e.call(this),Ee(this,Qa,void 0))}isFetching(t){return G(this,xt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,ni).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,xt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=G(this,xt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Ra(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return G(this,xt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=G(this,xt).get(r.queryHash),i=s==null?void 0:s.state.data,o=WO(e,i);if(o!==void 0)return G(this,xt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Gt.batch(()=>G(this,xt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,xt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,xt);Gt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,xt),r={type:"active",...t};return Gt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Gt.batch(()=>G(this,xt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Zn).catch(Zn)}invalidateQueries(t={},e={}){return Gt.batch(()=>{if(G(this,xt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Gt.batch(()=>G(this,xt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Zn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Zn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,xt).build(this,e);return n.isStaleByTime(Ra(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zn).catch(Zn)}fetchInfiniteQuery(t){return t.behavior=zx(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zn).catch(Zn)}ensureInfiniteQueryData(t){return t.behavior=zx(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Vh.isOnline()?G(this,ni).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,xt)}getMutationCache(){return G(this,ni)}getDefaultOptions(){return G(this,ri)}setDefaultOptions(t){Ee(this,ri,t)}setQueryDefaults(t,e){G(this,qa).set(Yc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,qa).values()];let n={};return e.forEach(r=>{Xc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){G(this,Ka).set(Yc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,Ka).values()];let n={};return e.forEach(r=>{Xc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,ri).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===$v&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,ri).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,xt).clear(),G(this,ni).clear()}},xt=new WeakMap,ni=new WeakMap,ri=new WeakMap,qa=new WeakMap,Ka=new WeakMap,si=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,gb),Sn,Qe,pu,vn,go,Ya,ii,Ur,mu,Xa,Za,yo,vo,oi,Ja,rt,lc,Ug,zg,Bg,$g,Wg,Hg,qg,XS,yb,oL=(yb=class extends xu{constructor(e,n){super();je(this,rt);je(this,Sn);je(this,Qe);je(this,pu);je(this,vn);je(this,go);je(this,Ya);je(this,ii);je(this,Ur);je(this,mu);je(this,Xa);je(this,Za);je(this,yo);je(this,vo);je(this,oi);je(this,Ja,new Set);this.options=n,Ee(this,Sn,e),Ee(this,Ur,null),Ee(this,ii,Fg()),this.options.experimental_prefetchInRender||G(this,ii).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,Qe).addObserver(this),$x(G(this,Qe),this.options)?Ge(this,rt,lc).call(this):this.updateResult(),Ge(this,rt,$g).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kg(G(this,Qe),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kg(G(this,Qe),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ge(this,rt,Wg).call(this),Ge(this,rt,Hg).call(this),G(this,Qe).removeObserver(this)}setOptions(e,n){const r=this.options,s=G(this,Qe);if(this.options=G(this,Sn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Er(this.options.enabled,G(this,Qe))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ge(this,rt,qg).call(this),G(this,Qe).setOptions(this.options),r._defaulted&&!Lg(this.options,r)&&G(this,Sn).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,Qe),observer:this});const i=this.hasListeners();i&&Wx(G(this,Qe),s,this.options,r)&&Ge(this,rt,lc).call(this),this.updateResult(n),i&&(G(this,Qe)!==s||Er(this.options.enabled,G(this,Qe))!==Er(r.enabled,G(this,Qe))||Ra(this.options.staleTime,G(this,Qe))!==Ra(r.staleTime,G(this,Qe)))&&Ge(this,rt,Ug).call(this);const o=Ge(this,rt,zg).call(this);i&&(G(this,Qe)!==s||Er(this.options.enabled,G(this,Qe))!==Er(r.enabled,G(this,Qe))||o!==G(this,oi))&&Ge(this,rt,Bg).call(this,o)}getOptimisticResult(e){const n=G(this,Sn).getQueryCache().build(G(this,Sn),e),r=this.createResult(n,e);return lL(this,r)&&(Ee(this,vn,r),Ee(this,Ya,this.options),Ee(this,go,G(this,Qe).state)),r}getCurrentResult(){return G(this,vn)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){G(this,Ja).add(e)}getCurrentQuery(){return G(this,Qe)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=G(this,Sn).defaultQueryOptions(e),r=G(this,Sn).getQueryCache().build(G(this,Sn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ge(this,rt,lc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,vn)))}createResult(e,n){var T;const r=G(this,Qe),s=this.options,i=G(this,vn),o=G(this,go),a=G(this,Ya),u=e!==r?e.state:G(this,pu),{state:h}=e;let f={...h},m=!1,g;if(n._optimisticResults){const C=this.hasListeners(),j=!C&&$x(e,n),M=C&&Wx(e,r,n,s);(j||M)&&(f={...f,...YS(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:_}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&n.select===G(this,mu))g=G(this,Xa);else try{Ee(this,mu,n.select),g=n.select(f.data),g=Vg(i==null?void 0:i.data,g,n),Ee(this,Xa,g),Ee(this,Ur,null)}catch(C){Ee(this,Ur,C)}else g=f.data;if(n.placeholderData!==void 0&&g===void 0&&_==="pending"){let C;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))C=i.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((T=G(this,Za))==null?void 0:T.state.data,G(this,Za)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),Ee(this,Ur,null)}catch(j){Ee(this,Ur,j)}C!==void 0&&(_="success",g=Vg(i==null?void 0:i.data,C,n),m=!0)}G(this,Ur)&&(v=G(this,Ur),g=G(this,Xa),p=Date.now(),_="error");const y=f.fetchStatus==="fetching",w=_==="pending",x=_==="error",I=w&&y,R=g!==void 0,S={status:_,fetchStatus:f.fetchStatus,isPending:w,isSuccess:_==="success",isError:x,isInitialLoading:I,isLoading:I,data:g,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:x&&!R,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:x&&R,isStale:Hv(e,n),refetch:this.refetch,promise:G(this,ii)};if(this.options.experimental_prefetchInRender){const C=P=>{S.status==="error"?P.reject(S.error):S.data!==void 0&&P.resolve(S.data)},j=()=>{const P=Ee(this,ii,S.promise=Fg());C(P)},M=G(this,ii);switch(M.status){case"pending":e.queryHash===r.queryHash&&C(M);break;case"fulfilled":(S.status==="error"||S.data!==M.value)&&j();break;case"rejected":(S.status!=="error"||S.error!==M.reason)&&j();break}}return S}updateResult(e){const n=G(this,vn),r=this.createResult(G(this,Qe),this.options);if(Ee(this,go,G(this,Qe).state),Ee(this,Ya,this.options),G(this,go).data!==void 0&&Ee(this,Za,G(this,Qe)),Lg(r,n))return;Ee(this,vn,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!G(this,Ja).size)return!0;const c=new Set(a??G(this,Ja));return this.options.throwOnError&&c.add("error"),Object.keys(G(this,vn)).some(u=>{const h=u;return G(this,vn)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),Ge(this,rt,XS).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ge(this,rt,$g).call(this)}},Sn=new WeakMap,Qe=new WeakMap,pu=new WeakMap,vn=new WeakMap,go=new WeakMap,Ya=new WeakMap,ii=new WeakMap,Ur=new WeakMap,mu=new WeakMap,Xa=new WeakMap,Za=new WeakMap,yo=new WeakMap,vo=new WeakMap,oi=new WeakMap,Ja=new WeakMap,rt=new WeakSet,lc=function(e){Ge(this,rt,qg).call(this);let n=G(this,Qe).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Zn)),n},Ug=function(){Ge(this,rt,Wg).call(this);const e=Ra(this.options.staleTime,G(this,Qe));if(No||G(this,vn).isStale||!Og(e))return;const r=$S(G(this,vn).dataUpdatedAt,e)+1;Ee(this,yo,setTimeout(()=>{G(this,vn).isStale||this.updateResult()},r))},zg=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,Qe)):this.options.refetchInterval)??!1},Bg=function(e){Ge(this,rt,Hg).call(this),Ee(this,oi,e),!(No||Er(this.options.enabled,G(this,Qe))===!1||!Og(G(this,oi))||G(this,oi)===0)&&Ee(this,vo,setInterval(()=>{(this.options.refetchIntervalInBackground||Wv.isFocused())&&Ge(this,rt,lc).call(this)},G(this,oi)))},$g=function(){Ge(this,rt,Ug).call(this),Ge(this,rt,Bg).call(this,Ge(this,rt,zg).call(this))},Wg=function(){G(this,yo)&&(clearTimeout(G(this,yo)),Ee(this,yo,void 0))},Hg=function(){G(this,vo)&&(clearInterval(G(this,vo)),Ee(this,vo,void 0))},qg=function(){const e=G(this,Sn).getQueryCache().build(G(this,Sn),this.options);if(e===G(this,Qe))return;const n=G(this,Qe);Ee(this,Qe,e),Ee(this,pu,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},XS=function(e){Gt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(G(this,vn))}),G(this,Sn).getQueryCache().notify({query:G(this,Qe),type:"observerResultsUpdated"})})},yb);function aL(t,e){return Er(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function $x(t,e){return aL(t,e)||t.state.data!==void 0&&Kg(t,e,e.refetchOnMount)}function Kg(t,e,n){if(Er(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Hv(t,e)}return!1}function Wx(t,e,n,r){return(t!==e||Er(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Hv(t,n)}function Hv(t,e){return Er(e.enabled,t)!==!1&&t.isStaleByTime(Ra(e.staleTime,t))}function lL(t,e){return!Lg(t.getCurrentResult(),e)}var ZS=b.createContext(void 0),cL=t=>{const e=b.useContext(ZS);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},uL=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),l.jsx(ZS.Provider,{value:t,children:e})),JS=b.createContext(!1),dL=()=>b.useContext(JS);JS.Provider;function hL(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var fL=b.createContext(hL()),pL=()=>b.useContext(fL);function mL(t,e){return typeof t=="function"?t(...e):!!t}function Hx(){}var gL=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yL=t=>{b.useEffect(()=>{t.clearReset()},[t])},vL=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&mL(n,[t.error,r]),wL=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},_L=(t,e)=>t.isLoading&&t.isFetching&&!e,xL=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,qx=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function EL(t,e,n){var h,f,m,g,v;const r=cL(),s=dL(),i=pL(),o=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",wL(o),gL(o,i),yL(i);const a=!r.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new e(r,o)),u=c.getOptimisticResult(o);if(b.useSyncExternalStore(b.useCallback(p=>{const _=s?Hx:c.subscribe(Gt.batchCalls(p));return c.updateResult(),_},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),xL(o,u))throw qx(o,c,i);if(vL({result:u,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((g=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!No&&_L(u,s)){const p=a?qx(o,c,i):(v=r.getQueryCache().get(o.queryHash))==null?void 0:v.promise;p==null||p.catch(Hx).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Fh(t,e){return EL(t,oL)}async function bL(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const TL=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await bL(n),await n.json())},SL=new iL({defaultOptions:{queries:{queryFn:TL({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),CL=1,IL=1e6;let fm=0;function NL(){return fm=(fm+1)%Number.MAX_SAFE_INTEGER,fm.toString()}const pm=new Map,Kx=t=>{if(pm.has(t))return;const e=setTimeout(()=>{pm.delete(t),Sc({type:"REMOVE_TOAST",toastId:t})},IL);pm.set(t,e)},AL=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,CL)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Kx(n):t.toasts.forEach(r=>{Kx(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Xd=[];let Zd={toasts:[]};function Sc(t){Zd=AL(Zd,t),Xd.forEach(e=>{e(Zd)})}function kL({...t}){const e=NL(),n=s=>Sc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Sc({type:"DISMISS_TOAST",toastId:e});return Sc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Gn(){const[t,e]=b.useState(Zd);return b.useEffect(()=>(Xd.push(e),()=>{const n=Xd.indexOf(e);n>-1&&Xd.splice(n,1)}),[t]),{...t,toast:kL,dismiss:n=>Sc({type:"DISMISS_TOAST",toastId:n})}}function Te(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function eC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Gx(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Gx(t[s],null)}}}}function Ye(...t){return b.useCallback(eC(...t),t)}function RL(t,e){const n=b.createContext(e),r=i=>{const{children:o,...a}=i,c=b.useMemo(()=>a,Object.values(a));return l.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function ur(t,e=[]){let n=[];function r(i,o){const a=b.createContext(o),c=n.length;n=[...n,o];const u=f=>{var y;const{scope:m,children:g,...v}=f,p=((y=m==null?void 0:m[t])==null?void 0:y[c])||a,_=b.useMemo(()=>v,Object.values(v));return l.jsx(p.Provider,{value:_,children:g})};u.displayName=i+"Provider";function h(f,m){var p;const g=((p=m==null?void 0:m[t])==null?void 0:p[c])||a,v=b.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>b.createContext(o));return function(a){const c=(a==null?void 0:a[t])||i;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:c}}),[a,c])}};return s.scopeName=t,[r,PL(s,...e)]}function PL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...a,...f}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ll(t){const e=DL(t),n=b.forwardRef((r,s)=>{const{children:i,...o}=r,a=b.Children.toArray(i),c=a.find(OL);if(c){const u=c.props.children,h=a.map(f=>f===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:f);return l.jsx(e,{...o,ref:s,children:b.isValidElement(u)?b.cloneElement(u,void 0,h):null})}return l.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var jL=ll("Slot");function DL(t){const e=b.forwardRef((n,r)=>{const{children:s,...i}=n;if(b.isValidElement(s)){const o=ML(s),a=LL(i,s.props);return s.type!==b.Fragment&&(a.ref=r?eC(r,o):o),b.cloneElement(s,a)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tC=Symbol("radix.slottable");function nC(t){const e=({children:n})=>l.jsx(l.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=tC,e}function OL(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tC}function LL(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function ML(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function qv(t){const e=t+"CollectionProvider",[n,r]=ur(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:_,children:y}=p,w=$s.useRef(null),x=$s.useRef(new Map).current;return l.jsx(s,{scope:_,itemMap:x,collectionRef:w,children:y})};o.displayName=e;const a=t+"CollectionSlot",c=ll(a),u=$s.forwardRef((p,_)=>{const{scope:y,children:w}=p,x=i(a,y),I=Ye(_,x.collectionRef);return l.jsx(c,{ref:I,children:w})});u.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ll(h),g=$s.forwardRef((p,_)=>{const{scope:y,children:w,...x}=p,I=$s.useRef(null),R=Ye(_,I),L=i(h,y);return $s.useEffect(()=>(L.itemMap.set(I,{ref:I,...x}),()=>void L.itemMap.delete(I))),l.jsx(m,{[f]:"",ref:R,children:w})});g.displayName=h;function v(p){const _=i(t+"CollectionConsumer",p);return $s.useCallback(()=>{const w=_.collectionRef.current;if(!w)return[];const x=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((L,S)=>x.indexOf(L.ref.current)-x.indexOf(S.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},v,r]}var VL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Pe=VL.reduce((t,e)=>{const n=ll(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function rC(t,e){t&&Ho.flushSync(()=>t.dispatchEvent(e))}function bt(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function FL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var UL="DismissableLayer",Gg="dismissableLayer.update",zL="dismissableLayer.pointerDownOutside",BL="dismissableLayer.focusOutside",Qx,sC=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Eu=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=t,u=b.useContext(sC),[h,f]=b.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=b.useState({}),v=Ye(e,S=>f(S)),p=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=p.indexOf(_),w=h?p.indexOf(h):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,I=w>=y,R=WL(S=>{const T=S.target,C=[...u.branches].some(j=>j.contains(T));!I||C||(s==null||s(S),o==null||o(S),S.defaultPrevented||a==null||a())},m),L=HL(S=>{const T=S.target;[...u.branches].some(j=>j.contains(T))||(i==null||i(S),o==null||o(S),S.defaultPrevented||a==null||a())},m);return FL(S=>{w===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&a&&(S.preventDefault(),a()))},m),b.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Qx=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Yx(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Qx)}},[h,m,n,u]),b.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Yx())},[h,u]),b.useEffect(()=>{const S=()=>g({});return document.addEventListener(Gg,S),()=>document.removeEventListener(Gg,S)},[]),l.jsx(Pe.div,{...c,ref:v,style:{pointerEvents:x?I?"auto":"none":void 0,...t.style},onFocusCapture:Te(t.onFocusCapture,L.onFocusCapture),onBlurCapture:Te(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:Te(t.onPointerDownCapture,R.onPointerDownCapture)})});Eu.displayName=UL;var $L="DismissableLayerBranch",iC=b.forwardRef((t,e)=>{const n=b.useContext(sC),r=b.useRef(null),s=Ye(e,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),l.jsx(Pe.div,{...t,ref:s})});iC.displayName=$L;function WL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){oC(zL,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function HL(t,e=globalThis==null?void 0:globalThis.document){const n=bt(t),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&oC(BL,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yx(){const t=new CustomEvent(Gg);document.dispatchEvent(t)}function oC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rC(s,i):s.dispatchEvent(i)}var qL=Eu,KL=iC,Dt=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},GL="Portal",Df=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=b.useState(!1);Dt(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?fO.createPortal(l.jsx(Pe.div,{...r,ref:e}),o):null});Df.displayName=GL;function QL(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var dr=t=>{const{present:e,children:n}=t,r=YL(e),s=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=Ye(r.ref,XL(s));return typeof n=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};dr.displayName="Presence";function YL(t){const[e,n]=b.useState(),r=b.useRef({}),s=b.useRef(t),i=b.useRef("none"),o=t?"mounted":"unmounted",[a,c]=QL(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=bd(r.current);i.current=a==="mounted"?u:"none"},[a]),Dt(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,g=bd(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Dt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const p=bd(r.current).includes(g.animationName);if(g.target===e&&p&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=g=>{g.target===e&&(i.current=bd(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function bd(t){return(t==null?void 0:t.animationName)||"none"}function XL(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ao({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ZL({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=bt(n),c=b.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else s(u)},[i,t,s,a]);return[o,c]}function ZL({defaultProp:t,onChange:e}){const n=b.useState(t),[r]=n,s=b.useRef(r),i=bt(e);return b.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var JL="VisuallyHidden",bu=b.forwardRef((t,e)=>l.jsx(Pe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));bu.displayName=JL;var e4=bu,Kv="ToastProvider",[Gv,t4,n4]=qv("Toast"),[aC,NW]=ur("Toast",[n4]),[r4,Of]=aC(Kv),lC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,c]=b.useState(null),[u,h]=b.useState(0),f=b.useRef(!1),m=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Kv}\`. Expected non-empty \`string\`.`),l.jsx(Gv.Provider,{scope:e,children:l.jsx(r4,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:b.useCallback(()=>h(g=>g+1),[]),onToastRemove:b.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};lC.displayName=Kv;var cC="ToastViewport",s4=["F8"],Qg="toast.viewportPause",Yg="toast.viewportResume",uC=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=s4,label:s="Notifications ({hotkey})",...i}=t,o=Of(cC,n),a=t4(n),c=b.useRef(null),u=b.useRef(null),h=b.useRef(null),f=b.useRef(null),m=Ye(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;b.useEffect(()=>{const _=y=>{var x;r.length!==0&&r.every(I=>y[I]||y.code===I)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),b.useEffect(()=>{const _=c.current,y=f.current;if(v&&_&&y){const w=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Qg);y.dispatchEvent(L),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Yg);y.dispatchEvent(L),o.isClosePausedRef.current=!1}},I=L=>{!_.contains(L.relatedTarget)&&x()},R=()=>{_.contains(document.activeElement)||x()};return _.addEventListener("focusin",w),_.addEventListener("focusout",I),_.addEventListener("pointermove",w),_.addEventListener("pointerleave",R),window.addEventListener("blur",w),window.addEventListener("focus",x),()=>{_.removeEventListener("focusin",w),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",w),_.removeEventListener("pointerleave",R),window.removeEventListener("blur",w),window.removeEventListener("focus",x)}}},[v,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:_})=>{const w=a().map(x=>{const I=x.ref.current,R=[I,...y4(I)];return _==="forwards"?R:R.reverse()});return(_==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const _=f.current;if(_){const y=w=>{var R,L,S;const x=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!x){const T=document.activeElement,C=w.shiftKey;if(w.target===_&&C){(R=u.current)==null||R.focus();return}const P=p({tabbingDirection:C?"backwards":"forwards"}),D=P.findIndex(A=>A===T);mm(P.slice(D+1))?w.preventDefault():C?(L=u.current)==null||L.focus():(S=h.current)==null||S.focus()}};return _.addEventListener("keydown",y),()=>_.removeEventListener("keydown",y)}},[a,p]),l.jsxs(KL,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&l.jsx(Xg,{ref:u,onFocusFromOutsideViewport:()=>{const _=p({tabbingDirection:"forwards"});mm(_)}}),l.jsx(Gv.Slot,{scope:n,children:l.jsx(Pe.ol,{tabIndex:-1,...i,ref:m})}),v&&l.jsx(Xg,{ref:h,onFocusFromOutsideViewport:()=>{const _=p({tabbingDirection:"backwards"});mm(_)}})]})});uC.displayName=cC;var dC="ToastFocusProxy",Xg=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Of(dC,n);return l.jsx(bu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Xg.displayName=dC;var Lf="Toast",i4="toast.swipeStart",o4="toast.swipeMove",a4="toast.swipeCancel",l4="toast.swipeEnd",hC=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,c]=Ao({prop:r,defaultProp:s,onChange:i});return l.jsx(dr,{present:n||a,children:l.jsx(d4,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:bt(t.onPause),onResume:bt(t.onResume),onSwipeStart:Te(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Te(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Te(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Te(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});hC.displayName=Lf;var[c4,u4]=aC(Lf,{onClose(){}}),d4=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...v}=t,p=Of(Lf,n),[_,y]=b.useState(null),w=Ye(e,A=>y(A)),x=b.useRef(null),I=b.useRef(null),R=s||p.duration,L=b.useRef(0),S=b.useRef(R),T=b.useRef(0),{onToastAdd:C,onToastRemove:j}=p,M=bt(()=>{var H;(_==null?void 0:_.contains(document.activeElement))&&((H=p.viewport)==null||H.focus()),o()}),P=b.useCallback(A=>{!A||A===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(M,A))},[M]);b.useEffect(()=>{const A=p.viewport;if(A){const H=()=>{P(S.current),u==null||u()},se=()=>{const X=new Date().getTime()-L.current;S.current=S.current-X,window.clearTimeout(T.current),c==null||c()};return A.addEventListener(Qg,se),A.addEventListener(Yg,H),()=>{A.removeEventListener(Qg,se),A.removeEventListener(Yg,H)}}},[p.viewport,R,c,u,P]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&P(R)},[i,R,p.isClosePausedRef,P]),b.useEffect(()=>(C(),()=>j()),[C,j]);const D=b.useMemo(()=>_?wC(_):null,[_]);return p.viewport?l.jsxs(l.Fragment,{children:[D&&l.jsx(h4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),l.jsx(c4,{scope:n,onClose:M,children:Ho.createPortal(l.jsx(Gv.ItemSlot,{scope:n,children:l.jsx(qL,{asChild:!0,onEscapeKeyDown:Te(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||M(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(Pe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Te(t.onKeyDown,A=>{A.key==="Escape"&&(a==null||a(A.nativeEvent),A.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:Te(t.onPointerDown,A=>{A.button===0&&(x.current={x:A.clientX,y:A.clientY})}),onPointerMove:Te(t.onPointerMove,A=>{if(!x.current)return;const H=A.clientX-x.current.x,se=A.clientY-x.current.y,X=!!I.current,U=["left","right"].includes(p.swipeDirection),z=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,Z=U?z(0,H):0,W=U?0:z(0,se),q=A.pointerType==="touch"?10:2,le={x:Z,y:W},ce={originalEvent:A,delta:le};X?(I.current=le,Td(o4,f,ce,{discrete:!1})):Xx(le,p.swipeDirection,q)?(I.current=le,Td(i4,h,ce,{discrete:!1}),A.target.setPointerCapture(A.pointerId)):(Math.abs(H)>q||Math.abs(se)>q)&&(x.current=null)}),onPointerUp:Te(t.onPointerUp,A=>{const H=I.current,se=A.target;if(se.hasPointerCapture(A.pointerId)&&se.releasePointerCapture(A.pointerId),I.current=null,x.current=null,H){const X=A.currentTarget,U={originalEvent:A,delta:H};Xx(H,p.swipeDirection,p.swipeThreshold)?Td(l4,g,U,{discrete:!0}):Td(a4,m,U,{discrete:!0}),X.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),h4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Of(Lf,e),[i,o]=b.useState(!1),[a,c]=b.useState(!1);return m4(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:l.jsx(Df,{asChild:!0,children:l.jsx(bu,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},f4="ToastTitle",fC=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Pe.div,{...r,ref:e})});fC.displayName=f4;var p4="ToastDescription",pC=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(Pe.div,{...r,ref:e})});pC.displayName=p4;var mC="ToastAction",gC=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(vC,{altText:n,asChild:!0,children:l.jsx(Qv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${mC}\`. Expected non-empty \`string\`.`),null)});gC.displayName=mC;var yC="ToastClose",Qv=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=u4(yC,n);return l.jsx(vC,{asChild:!0,children:l.jsx(Pe.button,{type:"button",...r,ref:e,onClick:Te(t.onClick,s.onClose)})})});Qv.displayName=yC;var vC=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(Pe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function wC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),g4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...wC(r))}}),e}function Td(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?rC(s,i):s.dispatchEvent(i)}var Xx=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function m4(t=()=>{}){const e=bt(t);Dt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function g4(t){return t.nodeType===t.ELEMENT_NODE}function y4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function mm(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var v4=lC,_C=uC,xC=hC,EC=fC,bC=pC,TC=gC,SC=Qv;function CC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=CC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function IC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=CC(t))&&(r&&(r+=" "),r+=e);return r}const Zx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Jx=IC,Mf=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Jx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=Zx(h)||Zx(f);return s[u][m]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...g}=h;return Object.entries(g).every(v=>{let[p,_]=v;return Array.isArray(_)?_.includes({...i,...a}[p]):{...i,...a}[p]===_})?[...u,f,m]:u},[]);return Jx(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>b.createElement("svg",{ref:c,..._4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:NC("lucide",s),...a},[...o.map(([u,h])=>b.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(t,e)=>{const n=b.forwardRef(({className:r,...s},i)=>b.createElement(x4,{ref:i,iconNode:e,className:NC(`lucide-${w4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Xe("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Xe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Xe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=Xe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Xe("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Xe("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=Xe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Xe("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Xe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jv="-",R4=t=>{const e=j4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(Jv);return a[0]===""&&a.length!==1&&a.shift(),jC(a,e)||P4(o)},getConflictingClassGroupIds:(o,a)=>{const c=n[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},jC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?jC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Jv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},n1=/^\[(.+)\]$/,P4=t=>{if(n1.test(t)){const e=n1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},j4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return O4(Object.entries(t.classGroups),n).forEach(([i,o])=>{ny(o,r,i,e)}),r},ny=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:r1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(D4(s)){ny(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ny(o,r1(e,i),n,r)})})},r1=(t,e)=>{let n=t;return e.split(Jv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},D4=t=>t.isThemeGetter,O4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,L4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},DC="!",M4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,h=0,f;for(let _=0;_<a.length;_++){let y=a[_];if(u===0){if(y===s&&(r||a.slice(_,_+i)===e)){c.push(a.slice(h,_)),h=_+i;continue}if(y==="/"){f=_;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?a:a.substring(h),g=m.startsWith(DC),v=g?m.substring(1):m,p=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:p}};return n?a=>n({className:a,parseClassName:o}):o},V4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},F4=t=>({cache:L4(t.cacheSize),parseClassName:M4(t),...R4(t)}),U4=/\s+/,z4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(U4);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let v=!!g,p=r(v?m.substring(0,g):m);if(!p){if(!v){a=u+(a.length>0?" "+a:a);continue}if(p=r(m),!p){a=u+(a.length>0?" "+a:a);continue}v=!1}const _=V4(h).join(":"),y=f?_+DC:_,w=y+p;if(i.includes(w))continue;i.push(w);const x=s(p,v);for(let I=0;I<x.length;++I){const R=x[I];i.push(y+R)}a=u+(a.length>0?" "+a:a)}return a};function B4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=OC(e))&&(r&&(r+=" "),r+=n);return r}const OC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=OC(t[r]))&&(n&&(n+=" "),n+=e);return n};function $4(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=F4(u),r=n.cache.get,s=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const h=z4(c,n);return s(c,h),h}return function(){return i(B4.apply(null,arguments))}}const ut=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},LC=/^\[(?:([a-z-]+):)?(.+)\]$/i,W4=/^\d+\/\d+$/,H4=new Set(["px","full","screen"]),q4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,K4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,G4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Q4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Y4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cs=t=>Pa(t)||H4.has(t)||W4.test(t),Us=t=>Tl(t,"length",sM),Pa=t=>!!t&&!Number.isNaN(Number(t)),gm=t=>Tl(t,"number",Pa),tc=t=>!!t&&Number.isInteger(Number(t)),X4=t=>t.endsWith("%")&&Pa(t.slice(0,-1)),Ve=t=>LC.test(t),zs=t=>q4.test(t),Z4=new Set(["length","size","percentage"]),J4=t=>Tl(t,Z4,MC),eM=t=>Tl(t,"position",MC),tM=new Set(["image","url"]),nM=t=>Tl(t,tM,oM),rM=t=>Tl(t,"",iM),nc=()=>!0,Tl=(t,e,n)=>{const r=LC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},sM=t=>K4.test(t)&&!G4.test(t),MC=()=>!1,iM=t=>Q4.test(t),oM=t=>Y4.test(t),aM=()=>{const t=ut("colors"),e=ut("spacing"),n=ut("blur"),r=ut("brightness"),s=ut("borderColor"),i=ut("borderRadius"),o=ut("borderSpacing"),a=ut("borderWidth"),c=ut("contrast"),u=ut("grayscale"),h=ut("hueRotate"),f=ut("invert"),m=ut("gap"),g=ut("gradientColorStops"),v=ut("gradientColorStopPositions"),p=ut("inset"),_=ut("margin"),y=ut("opacity"),w=ut("padding"),x=ut("saturate"),I=ut("scale"),R=ut("sepia"),L=ut("skew"),S=ut("space"),T=ut("translate"),C=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ve,e],P=()=>[Ve,e],D=()=>["",cs,Us],A=()=>["auto",Pa,Ve],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Ve],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Pa,Ve];return{cacheSize:500,separator:":",theme:{colors:[nc],spacing:[cs,Us],blur:["none","",zs,Ve],brightness:W(),borderColor:[t],borderRadius:["none","","full",zs,Ve],borderSpacing:P(),borderWidth:D(),contrast:W(),grayscale:z(),hueRotate:W(),invert:z(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[X4,Us],inset:M(),margin:M(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:z(),skew:W(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[zs]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Ve]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",tc,Ve]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",tc,Ve]}],"grid-cols":[{"grid-cols":[nc]}],"col-start-end":[{col:["auto",{span:["full",tc,Ve]},Ve]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[nc]}],"row-start-end":[{row:["auto",{span:[tc,Ve]},Ve]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[zs]},zs]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",zs,Us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gm]}],"font-family":[{font:[nc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",Pa,gm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",cs,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",cs,Us]}],"underline-offset":[{"underline-offset":["auto",cs,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),eM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",J4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:se()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[cs,Ve]}],"outline-w":[{outline:[cs,Us]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[cs,Us]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",zs,rM]}],"shadow-color":[{shadow:[nc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zs,Ve]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[x]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[tc,Ve]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[cs,Us,gm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lM=$4(aM);function Ne(...t){return lM(IC(t))}const cM=v4,VC=b.forwardRef(({className:t,...e},n)=>l.jsx(_C,{ref:n,className:Ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));VC.displayName=_C.displayName;const uM=Mf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),FC=b.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(xC,{ref:r,className:Ne(uM({variant:e}),t),...n}));FC.displayName=xC.displayName;const dM=b.forwardRef(({className:t,...e},n)=>l.jsx(TC,{ref:n,className:Ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));dM.displayName=TC.displayName;const UC=b.forwardRef(({className:t,...e},n)=>l.jsx(SC,{ref:n,className:Ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(bl,{className:"h-4 w-4"})}));UC.displayName=SC.displayName;const zC=b.forwardRef(({className:t,...e},n)=>l.jsx(EC,{ref:n,className:Ne("text-sm font-semibold",t),...e}));zC.displayName=EC.displayName;const BC=b.forwardRef(({className:t,...e},n)=>l.jsx(bC,{ref:n,className:Ne("text-sm opacity-90",t),...e}));BC.displayName=bC.displayName;function hM(){const{toasts:t}=Gn();return l.jsxs(cM,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return l.jsxs(FC,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(zC,{children:n}),r&&l.jsx(BC,{children:r})]}),s,l.jsx(UC,{})]},e)}),l.jsx(VC,{})]})}var fM=Nb[" useId ".trim().toString()]||(()=>{}),pM=0;function vi(t){const[e,n]=b.useState(fM());return Dt(()=>{n(r=>r??String(pM++))},[t]),e?`radix-${e}`:""}const mM=["top","right","bottom","left"],Ai=Math.min,Vn=Math.max,$h=Math.round,Sd=Math.floor,Kr=t=>({x:t,y:t}),gM={left:"right",right:"left",bottom:"top",top:"bottom"},yM={start:"end",end:"start"};function ry(t,e,n){return Vn(t,Ai(e,n))}function Ss(t,e){return typeof t=="function"?t(e):t}function Cs(t){return t.split("-")[0]}function Sl(t){return t.split("-")[1]}function e0(t){return t==="x"?"y":"x"}function t0(t){return t==="y"?"height":"width"}function ki(t){return["top","bottom"].includes(Cs(t))?"y":"x"}function n0(t){return e0(ki(t))}function vM(t,e,n){n===void 0&&(n=!1);const r=Sl(t),s=n0(t),i=t0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Wh(o)),[o,Wh(o)]}function wM(t){const e=Wh(t);return[sy(t),e,sy(e)]}function sy(t){return t.replace(/start|end/g,e=>yM[e])}function _M(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function xM(t,e,n,r){const s=Sl(t);let i=_M(Cs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(sy)))),i}function Wh(t){return t.replace(/left|right|bottom|top/g,e=>gM[e])}function EM(t){return{top:0,right:0,bottom:0,left:0,...t}}function $C(t){return typeof t!="number"?EM(t):{top:t,right:t,bottom:t,left:t}}function Hh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function s1(t,e,n){let{reference:r,floating:s}=t;const i=ki(e),o=n0(e),a=t0(o),c=Cs(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Sl(e)){case"start":g[o]-=m*(n&&u?-1:1);break;case"end":g[o]+=m*(n&&u?-1:1);break}return g}const bM=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=s1(u,r,c),m=r,g={},v=0;for(let p=0;p<a.length;p++){const{name:_,fn:y}=a[p],{x:w,y:x,data:I,reset:R}=await y({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=x??f,g={...g,[_]:{...g[_],...I}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(m=R.placement),R.rects&&(u=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:f}=s1(u,m,c)),p=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:g}};async function Jc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=Ss(e,t),v=$C(g),_=a[m?f==="floating"?"reference":"floating":f],y=Hh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),I=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},R=Hh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:c}):w);return{top:(y.top-R.top+v.top)/I.y,bottom:(R.bottom-y.bottom+v.bottom)/I.y,left:(y.left-R.left+v.left)/I.x,right:(R.right-y.right+v.right)/I.x}}const TM=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:h=0}=Ss(t,e)||{};if(u==null)return{};const f=$C(h),m={x:n,y:r},g=n0(s),v=t0(g),p=await o.getDimensions(u),_=g==="y",y=_?"top":"left",w=_?"bottom":"right",x=_?"clientHeight":"clientWidth",I=i.reference[v]+i.reference[g]-m[g]-i.floating[v],R=m[g]-i.reference[g],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=L?L[x]:0;(!S||!await(o.isElement==null?void 0:o.isElement(L)))&&(S=a.floating[x]||i.floating[v]);const T=I/2-R/2,C=S/2-p[v]/2-1,j=Ai(f[y],C),M=Ai(f[w],C),P=j,D=S-p[v]-M,A=S/2-p[v]/2+T,H=ry(P,A,D),se=!c.arrow&&Sl(s)!=null&&A!==H&&i.reference[v]/2-(A<P?j:M)-p[v]/2<0,X=se?A<P?A-P:A-D:0;return{[g]:m[g]+X,data:{[g]:H,centerOffset:A-H-X,...se&&{alignmentOffset:X}},reset:se}}}),SM=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,..._}=Ss(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=Cs(s),w=ki(a),x=Cs(a)===a,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),R=m||(x||!p?[Wh(a)]:wM(a)),L=v!=="none";!m&&L&&R.push(...xM(a,p,v,I));const S=[a,...R],T=await Jc(e,_),C=[];let j=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(T[y]),f){const A=vM(s,o,I);C.push(T[A[0]],T[A[1]])}if(j=[...j,{placement:s,overflows:C}],!C.every(A=>A<=0)){var M,P;const A=(((M=i.flip)==null?void 0:M.index)||0)+1,H=S[A];if(H)return{data:{index:A,overflows:j},reset:{placement:H}};let se=(P=j.filter(X=>X.overflows[0]<=0).sort((X,U)=>X.overflows[1]-U.overflows[1])[0])==null?void 0:P.placement;if(!se)switch(g){case"bestFit":{var D;const X=(D=j.filter(U=>{if(L){const z=ki(U.placement);return z===w||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,Z)=>z+Z,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:D[0];X&&(se=X);break}case"initialPlacement":se=a;break}if(s!==se)return{reset:{placement:se}}}return{}}}};function i1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function o1(t){return mM.some(e=>t[e]>=0)}const CM=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ss(t,e);switch(r){case"referenceHidden":{const i=await Jc(e,{...s,elementContext:"reference"}),o=i1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o1(o)}}}case"escaped":{const i=await Jc(e,{...s,altBoundary:!0}),o=i1(i,n.floating);return{data:{escapedOffsets:o,escaped:o1(o)}}}default:return{}}}}};async function IM(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Cs(n),a=Sl(n),c=ki(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Ss(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),c?{x:g*h,y:m*u}:{x:m*u,y:g*h}}const NM=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await IM(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},AM=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:y,y:w}=_;return{x:y,y:w}}},...c}=Ss(t,e),u={x:n,y:r},h=await Jc(e,c),f=ki(Cs(s)),m=e0(f);let g=u[m],v=u[f];if(i){const _=m==="y"?"top":"left",y=m==="y"?"bottom":"right",w=g+h[_],x=g-h[y];g=ry(w,g,x)}if(o){const _=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=v+h[_],x=v-h[y];v=ry(w,v,x)}const p=a.fn({...e,[m]:g,[f]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:i,[f]:o}}}}}},kM=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Ss(t,e),h={x:n,y:r},f=ki(s),m=e0(f);let g=h[m],v=h[f];const p=Ss(a,e),_=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const x=m==="y"?"height":"width",I=i.reference[m]-i.floating[x]+_.mainAxis,R=i.reference[m]+i.reference[x]-_.mainAxis;g<I?g=I:g>R&&(g=R)}if(u){var y,w;const x=m==="y"?"width":"height",I=["top","left"].includes(Cs(s)),R=i.reference[f]-i.floating[x]+(I&&((y=o.offset)==null?void 0:y[f])||0)+(I?0:_.crossAxis),L=i.reference[f]+i.reference[x]+(I?0:((w=o.offset)==null?void 0:w[f])||0)-(I?_.crossAxis:0);v<R?v=R:v>L&&(v=L)}return{[m]:g,[f]:v}}}},RM=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=Ss(t,e),h=await Jc(e,u),f=Cs(s),m=Sl(s),g=ki(s)==="y",{width:v,height:p}=i.floating;let _,y;f==="top"||f==="bottom"?(_=f,y=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=f,_=m==="end"?"top":"bottom");const w=p-h.top-h.bottom,x=v-h.left-h.right,I=Ai(p-h[_],w),R=Ai(v-h[y],x),L=!e.middlewareData.shift;let S=I,T=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),L&&!m){const j=Vn(h.left,0),M=Vn(h.right,0),P=Vn(h.top,0),D=Vn(h.bottom,0);g?T=v-2*(j!==0||M!==0?j+M:Vn(h.left,h.right)):S=p-2*(P!==0||D!==0?P+D:Vn(h.top,h.bottom))}await c({...e,availableWidth:T,availableHeight:S});const C=await o.getDimensions(a.floating);return v!==C.width||p!==C.height?{reset:{rects:!0}}:{}}}};function Vf(){return typeof window<"u"}function Cl(t){return WC(t)?(t.nodeName||"").toLowerCase():"#document"}function Wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function rs(t){var e;return(e=(WC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function WC(t){return Vf()?t instanceof Node||t instanceof Wn(t).Node:!1}function Nr(t){return Vf()?t instanceof Element||t instanceof Wn(t).Element:!1}function ts(t){return Vf()?t instanceof HTMLElement||t instanceof Wn(t).HTMLElement:!1}function a1(t){return!Vf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wn(t).ShadowRoot}function Tu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Ar(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function PM(t){return["table","td","th"].includes(Cl(t))}function Ff(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function r0(t){const e=s0(),n=Nr(t)?Ar(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function jM(t){let e=Ri(t);for(;ts(e)&&!dl(e);){if(r0(e))return e;if(Ff(e))return null;e=Ri(e)}return null}function s0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function dl(t){return["html","body","#document"].includes(Cl(t))}function Ar(t){return Wn(t).getComputedStyle(t)}function Uf(t){return Nr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ri(t){if(Cl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||a1(t)&&t.host||rs(t);return a1(e)?e.host:e}function HC(t){const e=Ri(t);return dl(e)?t.ownerDocument?t.ownerDocument.body:t.body:ts(e)&&Tu(e)?e:HC(e)}function eu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=HC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Wn(s);if(i){const a=iy(o);return e.concat(o,o.visualViewport||[],Tu(s)?s:[],a&&n?eu(a):[])}return e.concat(s,eu(s,[],n))}function iy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function qC(t){const e=Ar(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ts(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=$h(n)!==i||$h(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function i0(t){return Nr(t)?t:t.contextElement}function ja(t){const e=i0(t);if(!ts(e))return Kr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=qC(e);let o=(i?$h(n.width):n.width)/r,a=(i?$h(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const DM=Kr(0);function KC(t){const e=Wn(t);return!s0()||!e.visualViewport?DM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OM(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Wn(t)?!1:e}function Po(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=i0(t);let o=Kr(1);e&&(r?Nr(r)&&(o=ja(r)):o=ja(t));const a=OM(i,n,r)?KC(i):Kr(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=Wn(i),g=r&&Nr(r)?Wn(r):r;let v=m,p=iy(v);for(;p&&r&&g!==v;){const _=ja(p),y=p.getBoundingClientRect(),w=Ar(p),x=y.left+(p.clientLeft+parseFloat(w.paddingLeft))*_.x,I=y.top+(p.clientTop+parseFloat(w.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,f*=_.y,c+=x,u+=I,v=Wn(p),p=iy(v)}}return Hh({width:h,height:f,x:c,y:u})}function o0(t,e){const n=Uf(t).scrollLeft;return e?e.left+n:Po(rs(t)).left+n}function GC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:o0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function LM(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=rs(r),a=e?Ff(e.floating):!1;if(r===o||a&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Kr(1);const h=Kr(0),f=ts(r);if((f||!f&&!i)&&((Cl(r)!=="body"||Tu(o))&&(c=Uf(r)),ts(r))){const g=Po(r);u=ja(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const m=o&&!f&&!i?GC(o,c,!0):Kr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function MM(t){return Array.from(t.getClientRects())}function VM(t){const e=rs(t),n=Uf(t),r=t.ownerDocument.body,s=Vn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+o0(t);const a=-n.scrollTop;return Ar(r).direction==="rtl"&&(o+=Vn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function FM(t,e){const n=Wn(t),r=rs(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=s0();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}function UM(t,e){const n=Po(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ts(t)?ja(t):Kr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function l1(t,e,n){let r;if(e==="viewport")r=FM(t,n);else if(e==="document")r=VM(rs(t));else if(Nr(e))r=UM(e,n);else{const s=KC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Hh(r)}function QC(t,e){const n=Ri(t);return n===e||!Nr(n)||dl(n)?!1:Ar(n).position==="fixed"||QC(n,e)}function zM(t,e){const n=e.get(t);if(n)return n;let r=eu(t,[],!1).filter(a=>Nr(a)&&Cl(a)!=="body"),s=null;const i=Ar(t).position==="fixed";let o=i?Ri(t):t;for(;Nr(o)&&!dl(o);){const a=Ar(o),c=r0(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Tu(o)&&!c&&QC(t,o))?r=r.filter(h=>h!==o):s=a,o=Ri(o)}return e.set(t,r),r}function BM(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Ff(e)?[]:zM(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((u,h)=>{const f=l1(e,h,s);return u.top=Vn(f.top,u.top),u.right=Ai(f.right,u.right),u.bottom=Ai(f.bottom,u.bottom),u.left=Vn(f.left,u.left),u},l1(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $M(t){const{width:e,height:n}=qC(t);return{width:e,height:n}}function WM(t,e,n){const r=ts(e),s=rs(e),i=n==="fixed",o=Po(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=Kr(0);if(r||!r&&!i)if((Cl(e)!=="body"||Tu(s))&&(a=Uf(e)),r){const m=Po(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=o0(s));const u=s&&!r&&!i?GC(s,a):Kr(0),h=o.left+a.scrollLeft-c.x-u.x,f=o.top+a.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function ym(t){return Ar(t).position==="static"}function c1(t,e){if(!ts(t)||Ar(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return rs(t)===n&&(n=n.ownerDocument.body),n}function YC(t,e){const n=Wn(t);if(Ff(t))return n;if(!ts(t)){let s=Ri(t);for(;s&&!dl(s);){if(Nr(s)&&!ym(s))return s;s=Ri(s)}return n}let r=c1(t,e);for(;r&&PM(r)&&ym(r);)r=c1(r,e);return r&&dl(r)&&ym(r)&&!r0(r)?n:r||jM(t)||n}const HM=async function(t){const e=this.getOffsetParent||YC,n=this.getDimensions,r=await n(t.floating);return{reference:WM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qM(t){return Ar(t).direction==="rtl"}const KM={convertOffsetParentRelativeRectToViewportRelativeRect:LM,getDocumentElement:rs,getClippingRect:BM,getOffsetParent:YC,getElementRects:HM,getClientRects:MM,getDimensions:$M,getScale:ja,isElement:Nr,isRTL:qM};function XC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function GM(t,e){let n=null,r;const s=rs(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:g}=u;if(a||e(),!m||!g)return;const v=Sd(f),p=Sd(s.clientWidth-(h+m)),_=Sd(s.clientHeight-(f+g)),y=Sd(h),x={rootMargin:-v+"px "+-p+"px "+-_+"px "+-y+"px",threshold:Vn(0,Ai(1,c))||1};let I=!0;function R(L){const S=L[0].intersectionRatio;if(S!==c){if(!I)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!XC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(R,{...x,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,x)}n.observe(t)}return o(!0),i}function QM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=i0(t),h=s||i?[...u?eu(u):[],...eu(e)]:[];h.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),i&&y.addEventListener("resize",n)});const f=u&&a?GM(u,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let v,p=c?Po(t):null;c&&_();function _(){const y=Po(t);p&&!XC(p,y)&&n(),p=y,v=requestAnimationFrame(_)}return n(),()=>{var y;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const YM=NM,XM=AM,ZM=SM,JM=RM,e3=CM,u1=TM,t3=kM,n3=(t,e,n)=>{const r=new Map,s={platform:KM,...n},i={...s.platform,_c:r};return bM(t,e,{...s,platform:i})};var eh=typeof document<"u"?b.useLayoutEffect:b.useEffect;function qh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!qh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!qh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function ZC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function d1(t,e){const n=ZC(t);return Math.round(e*n)/n}function vm(t){const e=b.useRef(t);return eh(()=>{e.current=t}),e}function r3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=t,[h,f]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=b.useState(r);qh(m,r)||g(r);const[v,p]=b.useState(null),[_,y]=b.useState(null),w=b.useCallback(U=>{U!==L.current&&(L.current=U,p(U))},[]),x=b.useCallback(U=>{U!==S.current&&(S.current=U,y(U))},[]),I=i||v,R=o||_,L=b.useRef(null),S=b.useRef(null),T=b.useRef(h),C=c!=null,j=vm(c),M=vm(s),P=vm(u),D=b.useCallback(()=>{if(!L.current||!S.current)return;const U={placement:e,strategy:n,middleware:m};M.current&&(U.platform=M.current),n3(L.current,S.current,U).then(z=>{const Z={...z,isPositioned:P.current!==!1};A.current&&!qh(T.current,Z)&&(T.current=Z,Ho.flushSync(()=>{f(Z)}))})},[m,e,n,M,P]);eh(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const A=b.useRef(!1);eh(()=>(A.current=!0,()=>{A.current=!1}),[]),eh(()=>{if(I&&(L.current=I),R&&(S.current=R),I&&R){if(j.current)return j.current(I,R,D);D()}},[I,R,D,j,C]);const H=b.useMemo(()=>({reference:L,floating:S,setReference:w,setFloating:x}),[w,x]),se=b.useMemo(()=>({reference:I,floating:R}),[I,R]),X=b.useMemo(()=>{const U={position:n,left:0,top:0};if(!se.floating)return U;const z=d1(se.floating,h.x),Z=d1(se.floating,h.y);return a?{...U,transform:"translate("+z+"px, "+Z+"px)",...ZC(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:Z}},[n,a,se.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:D,refs:H,elements:se,floatingStyles:X}),[h,D,H,se,X])}const s3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?u1({element:r.current,padding:s}).fn(n):{}:r?u1({element:r,padding:s}).fn(n):{}}}},i3=(t,e)=>({...YM(t),options:[t,e]}),o3=(t,e)=>({...XM(t),options:[t,e]}),a3=(t,e)=>({...t3(t),options:[t,e]}),l3=(t,e)=>({...ZM(t),options:[t,e]}),c3=(t,e)=>({...JM(t),options:[t,e]}),u3=(t,e)=>({...e3(t),options:[t,e]}),d3=(t,e)=>({...s3(t),options:[t,e]});var h3="Arrow",JC=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return l.jsx(Pe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});JC.displayName=h3;var f3=JC;function eI(t){const[e,n]=b.useState(void 0);return Dt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var a0="Popper",[tI,zf]=ur(a0),[p3,nI]=tI(a0),rI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=b.useState(null);return l.jsx(p3,{scope:e,anchor:r,onAnchorChange:s,children:n})};rI.displayName=a0;var sI="PopperAnchor",iI=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=nI(sI,n),o=b.useRef(null),a=Ye(e,o);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:l.jsx(Pe.div,{...s,ref:a})});iI.displayName=sI;var l0="PopperContent",[m3,g3]=tI(l0),oI=b.forwardRef((t,e)=>{var fe,ee,ye,xe,be,Ae;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...p}=t,_=nI(l0,n),[y,w]=b.useState(null),x=Ye(e,Be=>w(Be)),[I,R]=b.useState(null),L=eI(I),S=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,C=r+(i!=="center"?"-"+i:""),j=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],P=M.length>0,D={padding:j,boundary:M.filter(v3),altBoundary:P},{refs:A,floatingStyles:H,placement:se,isPositioned:X,middlewareData:U}=r3({strategy:"fixed",placement:C,whileElementsMounted:(...Be)=>QM(...Be,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[i3({mainAxis:s+T,alignmentAxis:o}),c&&o3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?a3():void 0,...D}),c&&l3({...D}),c3({...D,apply:({elements:Be,rects:k,availableWidth:$,availableHeight:K})=>{const{width:O,height:F}=k.reference,B=Be.floating.style;B.setProperty("--radix-popper-available-width",`${$}px`),B.setProperty("--radix-popper-available-height",`${K}px`),B.setProperty("--radix-popper-anchor-width",`${O}px`),B.setProperty("--radix-popper-anchor-height",`${F}px`)}}),I&&d3({element:I,padding:a}),w3({arrowWidth:S,arrowHeight:T}),m&&u3({strategy:"referenceHidden",...D})]}),[z,Z]=cI(se),W=bt(v);Dt(()=>{X&&(W==null||W())},[X,W]);const q=(fe=U.arrow)==null?void 0:fe.x,le=(ee=U.arrow)==null?void 0:ee.y,ce=((ye=U.arrow)==null?void 0:ye.centerOffset)!==0,[oe,Se]=b.useState();return Dt(()=>{y&&Se(window.getComputedStyle(y).zIndex)},[y]),l.jsx("div",{ref:A.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:X?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(xe=U.transformOrigin)==null?void 0:xe.x,(be=U.transformOrigin)==null?void 0:be.y].join(" "),...((Ae=U.hide)==null?void 0:Ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(m3,{scope:n,placedSide:z,onArrowChange:R,arrowX:q,arrowY:le,shouldHideArrow:ce,children:l.jsx(Pe.div,{"data-side":z,"data-align":Z,...p,ref:x,style:{...p.style,animation:X?void 0:"none"}})})})});oI.displayName=l0;var aI="PopperArrow",y3={top:"bottom",right:"left",bottom:"top",left:"right"},lI=b.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=g3(aI,r),o=y3[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(f3,{...s,ref:n,style:{...s.style,display:"block"}})})});lI.displayName=aI;function v3(t){return t!==null}var w3=t=>({name:"transformOrigin",options:t,fn(e){var _,y,w;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,a=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=cI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=o?f:`${m}px`,p=`${-c}px`):u==="top"?(v=o?f:`${m}px`,p=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=o?f:`${g}px`):u==="left"&&(v=`${r.floating.width+c}px`,p=o?f:`${g}px`),{data:{x:v,y:p}}}});function cI(t){const[e,n="center"]=t.split("-");return[e,n]}var _3=rI,uI=iI,dI=oI,hI=lI,[Bf,AW]=ur("Tooltip",[zf]),c0=zf(),fI="TooltipProvider",x3=700,h1="tooltip.open",[E3,pI]=Bf(fI),mI=t=>{const{__scopeTooltip:e,delayDuration:n=x3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=b.useRef(!0),a=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(E3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};mI.displayName=fI;var gI="Tooltip",[kW,$f]=Bf(gI),oy="TooltipTrigger",b3=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=$f(oy,n),i=pI(oy,n),o=c0(n),a=b.useRef(null),c=Ye(e,a,s.onTriggerChange),u=b.useRef(!1),h=b.useRef(!1),f=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),l.jsx(uI,{asChild:!0,...o,children:l.jsx(Pe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Te(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Te(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Te(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Te(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Te(t.onBlur,s.onClose),onClick:Te(t.onClick,s.onClose)})})});b3.displayName=oy;var T3="TooltipPortal",[RW,S3]=Bf(T3,{forceMount:void 0}),hl="TooltipContent",yI=b.forwardRef((t,e)=>{const n=S3(hl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=$f(hl,t.__scopeTooltip);return l.jsx(dr,{present:r||o.open,children:o.disableHoverableContent?l.jsx(vI,{side:s,...i,ref:e}):l.jsx(C3,{side:s,...i,ref:e})})}),C3=b.forwardRef((t,e)=>{const n=$f(hl,t.__scopeTooltip),r=pI(hl,t.__scopeTooltip),s=b.useRef(null),i=Ye(e,s),[o,a]=b.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=b.useCallback(()=>{a(null),f(!1)},[f]),g=b.useCallback((v,p)=>{const _=v.currentTarget,y={x:v.clientX,y:v.clientY},w=R3(y,_.getBoundingClientRect()),x=P3(y,w),I=j3(p.getBoundingClientRect()),R=O3([...x,...I]);a(R),f(!0)},[f]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(c&&h){const v=_=>g(_,h),p=_=>g(_,c);return c.addEventListener("pointerleave",v),h.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",p)}}},[c,h,g,m]),b.useEffect(()=>{if(o){const v=p=>{const _=p.target,y={x:p.clientX,y:p.clientY},w=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),x=!D3(y,o);w?m():x&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,h,o,u,m]),l.jsx(vI,{...t,ref:i})}),[I3,N3]=Bf(gI,{isInside:!1}),A3=nC("TooltipContent"),vI=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,c=$f(hl,n),u=c0(n),{onClose:h}=c;return b.useEffect(()=>(document.addEventListener(h1,h),()=>document.removeEventListener(h1,h)),[h]),b.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),l.jsx(Eu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:l.jsxs(dI,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(A3,{children:r}),l.jsx(I3,{scope:n,isInside:!0,children:l.jsx(e4,{id:c.contentId,role:"tooltip",children:s||r})})]})})});yI.displayName=hl;var wI="TooltipArrow",k3=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=c0(n);return N3(wI,n).isInside?null:l.jsx(hI,{...s,...r,ref:e})});k3.displayName=wI;function R3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function P3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function j3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function D3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-a)*(r-c)/(h-c)+a&&(s=!s)}return s}function O3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),L3(e)}function L3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var M3=mI,_I=yI;const V3=M3,F3=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(_I,{ref:r,sideOffset:e,className:Ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));F3.displayName=_I.displayName;function qo(){const[t,e]=b.useState(null),[n,r]=b.useState(!0);b.useEffect(()=>{(()=>{const c=localStorage.getItem("currentUser");if(c)try{const u=JSON.parse(c);return console.log("Using stored user session:",u),e(u),r(!1),!0}catch(u){console.error("Error parsing stored user:",u),localStorage.removeItem("currentUser")}return!1})()||s()},[]);const s=async()=>{try{console.log("Checking auth status with Firebase..."),console.log("❌ No authenticated user found"),e(null),localStorage.removeItem("currentUser")}catch(a){console.error("Error checking auth status:",a),e(null),localStorage.removeItem("currentUser")}finally{r(!1)}};return{userData:t,isLoading:n,isAuthenticated:!!t,login:()=>{window.location.href="/login"},logout:()=>{console.log("🔓 Logging out user..."),localStorage.removeItem("currentUser"),e(null),window.location.href="/login"}}}const u0=Mf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?jL:"button";return l.jsx(o,{className:Ne(u0({variant:e,size:n,className:t})),ref:i,...s})});we.displayName="Button";const tt=b.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:Ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));tt.displayName="Input";var U3="Label",xI=b.forwardRef((t,e)=>l.jsx(Pe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xI.displayName=U3;var EI=xI;const z3=Mf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ie=b.forwardRef(({className:t,...e},n)=>l.jsx(EI,{ref:n,className:Ne(z3(),t),...e}));Ie.displayName=EI.displayName;const Ue=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ue.displayName="Card";const Mt=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("flex flex-col space-y-1.5 p-6",t),...e}));Mt.displayName="CardHeader";const Vt=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("text-2xl font-semibold leading-none tracking-tight",t),...e}));Vt.displayName="CardTitle";const bI=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("text-sm text-muted-foreground",t),...e}));bI.displayName="CardDescription";const qe=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("p-6 pt-0",t),...e}));qe.displayName="CardContent";const B3=b.forwardRef(({className:t,...e},n)=>l.jsx("div",{ref:n,className:Ne("flex items-center p-6 pt-0",t),...e}));B3.displayName="CardFooter";const $3=()=>{};var f1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},W3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},SI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new H3;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class H3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q3=function(t){const e=TI(t);return SI.encodeByteArray(e,!0)},Kh=function(t){return q3(t).replace(/\./g,"")},CI=function(t){try{return SI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=()=>K3().__FIREBASE_DEFAULTS__,Q3=()=>{if(typeof process>"u"||typeof f1>"u")return;const t=f1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Y3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CI(t[1]);return e&&JSON.parse(e)},Wf=()=>{try{return $3()||G3()||Q3()||Y3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},II=t=>{var e,n;return(n=(e=Wf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},NI=t=>{const e=II(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AI=()=>{var t;return(t=Wf())==null?void 0:t.config},kI=t=>{var e;return(e=Wf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kh(JSON.stringify(n)),Kh(JSON.stringify(o)),""].join(".")}const Cc={};function Z3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cc))Cc[e]?t.emulator.push(e):t.prod.push(e);return t}function J3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let p1=!1;function h0(t,e){if(typeof window>"u"||typeof document>"u"||!$i(window.location.host)||Cc[t]===e||Cc[t]||p1)return;Cc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=Z3().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{p1=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=J3(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),p=n("learnmore"),_=document.getElementById(p)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;a(x),h(_,p);const I=u();c(w,y),x.append(w,v,_,I),document.body.appendChild(x)}i?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function e6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function t6(){var e;const t=(e=Wf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function n6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function r6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i6(){const t=pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function o6(){return!t6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a6(){try{return typeof indexedDB=="object"}catch{return!1}}function l6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="FirebaseError";class ss extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=c6,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?u6(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ss(s,a,r)}}function u6(t,e){return t.replace(d6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const d6=/\{\$([^}]+)}/g;function h6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(m1(i)&&m1(o)){if(!jo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function m1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function uc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function f6(t,e){const n=new p6(t,e);return n.subscribe.bind(n)}class p6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");m6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=wm),s.error===void 0&&(s.error=wm),s.complete===void 0&&(s.complete=wm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function m6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){return t&&t._delegate?t._delegate:t}class Pi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new X3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v6(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y6(t){return t===oo?void 0:t}function v6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new g6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const _6={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},x6=$e.INFO,E6={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},b6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=E6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class f0{constructor(e){this.name=e,this._logLevel=x6,this._logHandler=b6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const T6=(t,e)=>e.some(n=>t instanceof n);let g1,y1;function S6(){return g1||(g1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C6(){return y1||(y1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const PI=new WeakMap,ay=new WeakMap,jI=new WeakMap,_m=new WeakMap,p0=new WeakMap;function I6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(wi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&PI.set(n,t)}).catch(()=>{}),p0.set(e,t),e}function N6(t){if(ay.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ay.set(t,e)}let ly={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function A6(t){ly=t(ly)}function k6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xm(this),e,...n);return jI.set(r,e.sort?e.sort():[e]),wi(r)}:C6().includes(t)?function(...e){return t.apply(xm(this),e),wi(PI.get(this))}:function(...e){return wi(t.apply(xm(this),e))}}function R6(t){return typeof t=="function"?k6(t):(t instanceof IDBTransaction&&N6(t),T6(t,S6())?new Proxy(t,ly):t)}function wi(t){if(t instanceof IDBRequest)return I6(t);if(_m.has(t))return _m.get(t);const e=R6(t);return e!==t&&(_m.set(t,e),p0.set(e,t)),e}const xm=t=>p0.get(t);function P6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=wi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(wi(o.result),c.oldVersion,c.newVersion,wi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const j6=["get","getKey","getAll","getAllKeys","count"],D6=["put","add","delete","clear"],Em=new Map;function v1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=D6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||j6.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Em.set(e,i),i}A6(t=>({...t,get:(e,n,r)=>v1(e,n)||t.get(e,n,r),has:(e,n)=>!!v1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(L6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function L6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cy="@firebase/app",w1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new f0("@firebase/app"),M6="@firebase/app-compat",V6="@firebase/analytics-compat",F6="@firebase/analytics",U6="@firebase/app-check-compat",z6="@firebase/app-check",B6="@firebase/auth",$6="@firebase/auth-compat",W6="@firebase/database",H6="@firebase/data-connect",q6="@firebase/database-compat",K6="@firebase/functions",G6="@firebase/functions-compat",Q6="@firebase/installations",Y6="@firebase/installations-compat",X6="@firebase/messaging",Z6="@firebase/messaging-compat",J6="@firebase/performance",e5="@firebase/performance-compat",t5="@firebase/remote-config",n5="@firebase/remote-config-compat",r5="@firebase/storage",s5="@firebase/storage-compat",i5="@firebase/firestore",o5="@firebase/ai",a5="@firebase/firestore-compat",l5="firebase",c5="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="[DEFAULT]",u5={[cy]:"fire-core",[M6]:"fire-core-compat",[F6]:"fire-analytics",[V6]:"fire-analytics-compat",[z6]:"fire-app-check",[U6]:"fire-app-check-compat",[B6]:"fire-auth",[$6]:"fire-auth-compat",[W6]:"fire-rtdb",[H6]:"fire-data-connect",[q6]:"fire-rtdb-compat",[K6]:"fire-fn",[G6]:"fire-fn-compat",[Q6]:"fire-iid",[Y6]:"fire-iid-compat",[X6]:"fire-fcm",[Z6]:"fire-fcm-compat",[J6]:"fire-perf",[e5]:"fire-perf-compat",[t5]:"fire-rc",[n5]:"fire-rc-compat",[r5]:"fire-gcs",[s5]:"fire-gcs-compat",[i5]:"fire-fst",[a5]:"fire-fst-compat",[o5]:"fire-vertex","fire-js":"fire-js",[l5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Map,d5=new Map,dy=new Map;function _1(t,e){try{t.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Do(t){const e=t.name;if(dy.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;dy.set(e,t);for(const n of tu.values())_1(n,t);for(const n of d5.values())_1(n,t);return!0}function Hf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new Su("app","Firebase",h5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=c5;function DI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:uy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _i.create("bad-app-name",{appName:String(s)});if(n||(n=AI()),!n)throw _i.create("no-options");const i=tu.get(s);if(i){if(jo(n,i.options)&&jo(r,i.config))return i;throw _i.create("duplicate-app",{appName:s})}const o=new w6(s);for(const c of dy.values())o.addComponent(c);const a=new f5(n,r,o);return tu.set(s,a),a}function m0(t=uy){const e=tu.get(t);if(!e&&t===uy&&AI())return DI();if(!e)throw _i.create("no-app",{appName:t});return e}function x1(){return Array.from(tu.values())}function Gr(t,e,n){let r=u5[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(o.join(" "));return}Do(new Pi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="firebase-heartbeat-database",m5=1,nu="firebase-heartbeat-store";let bm=null;function OI(){return bm||(bm=P6(p5,m5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw _i.create("idb-open",{originalErrorMessage:t.message})})),bm}async function g5(t){try{const n=(await OI()).transaction(nu),r=await n.objectStore(nu).get(LI(t));return await n.done,r}catch(e){if(e instanceof ss)Is.warn(e.message);else{const n=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(n.message)}}}async function E1(t,e){try{const r=(await OI()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,LI(t)),await r.done}catch(n){if(n instanceof ss)Is.warn(n.message);else{const r=_i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Is.warn(r.message)}}}function LI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=1024,v5=30;class w5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new x5(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>v5){const o=E5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Is.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b1(),{heartbeatsToSend:r,unsentEntries:s}=_5(this._heartbeatsCache.heartbeats),i=Kh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Is.warn(n),""}}}function b1(){return new Date().toISOString().substring(0,10)}function _5(t,e=y5){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),T1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),T1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class x5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return a6()?l6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await g5(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function T1(t){return Kh(JSON.stringify({version:2,heartbeats:t})).length}function E5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){Do(new Pi("platform-logger",e=>new O6(e),"PRIVATE")),Do(new Pi("heartbeat",e=>new w5(e),"PRIVATE")),Gr(cy,w1,t),Gr(cy,w1,"esm2020"),Gr("fire-js","")}b5("");function MI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const T5=MI,VI=new Su("auth","Firebase",MI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new f0("@firebase/auth");function S5(t,...e){Gh.logLevel<=$e.WARN&&Gh.warn(`Auth (${Ko}): ${t}`,...e)}function th(t,...e){Gh.logLevel<=$e.ERROR&&Gh.error(`Auth (${Ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,...e){throw g0(t,...e)}function Qr(t,...e){return g0(t,...e)}function FI(t,e,n){const r={...T5(),[e]:n};return new Su("auth","Firebase",r).create(e,{appName:t.name})}function ws(t){return FI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VI.create(t,...e)}function ke(t,e,...n){if(!t)throw g0(e,...n)}function gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw th(e),new Error(e)}function Ns(t,e){t||gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function C5(){return S1()==="http:"||S1()==="https:"}function S1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C5()||r6()||"connection"in navigator)?navigator.onLine:!0}function N5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ns(n>e,"Short delay should be less than long delay!"),this.isMobile=e6()||s6()}get(){return I5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e){Ns(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R5=new Iu(3e4,6e4);function Wi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hi(t,e,n,r,s={}){return zI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Cu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return n6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&$i(t.emulatorConfig.host)&&(u.credentials="include"),UI.fetch()(await BI(t,t.config.apiHost,n,a),u)})}async function zI(t,e,n){t._canInitEmulator=!1;const r={...A5,...e};try{const s=new j5(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Cd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Cd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Cd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw FI(t,h,u);kr(t,h)}}catch(s){if(s instanceof ss)throw s;kr(t,"network-request-failed",{message:String(s)})}}async function Nu(t,e,n,r,s={}){const i=await Hi(t,e,n,r,s);return"mfaPendingCredential"in i&&kr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function BI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?y0(t.config,s):`${t.config.apiScheme}://${s}`;return k5.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function P5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),R5.get())})}}function Cd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qr(t,e,r);return s.customData._tokenResponse=n,s}function C1(t){return t!==void 0&&t.enterprise!==void 0}class D5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return P5(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function O5(t,e){return Hi(t,"GET","/v2/recaptchaConfig",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L5(t,e){return Hi(t,"POST","/v1/accounts:delete",e)}async function Qh(t,e){return Hi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M5(t,e=!1){const n=vt(t),r=await n.getIdToken(e),s=v0(r);ke(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ic(Tm(s.auth_time)),issuedAtTime:Ic(Tm(s.iat)),expirationTime:Ic(Tm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Tm(t){return Number(t)*1e3}function v0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const s=CI(n);return s?JSON.parse(s):(th("Failed to decode base64 JWT payload"),null)}catch(s){return th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function I1(t){const e=v0(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ss&&V5(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function V5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ru(t,Qh(e,{idToken:n}));ke(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?$I(s.providerUserInfo):[],o=z5(t.providerData,i),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function U5(t){const e=vt(t);await Yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function z5(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $I(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(t,e){const n=await zI(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await BI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&$i(t.emulatorConfig.host)&&(c.credentials="include"),UI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $5(t,e){return Hi(t,"POST","/v2/accounts:revokeToken",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const n=I1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await B5(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Da;return r&&(ke(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ke(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ke(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new F5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ru(this,this.stsTokenManager.getToken(this.auth,e));return ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M5(this,e)}reload(){return U5(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await ru(this,L5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:v,stsTokenManager:p}=n;ke(f&&p,e,"internal-error");const _=Da.fromJSON(this.name,p);ke(typeof f=="string",e,"internal-error"),Bs(r,e.name),Bs(s,e.name),ke(typeof m=="boolean",e,"internal-error"),ke(typeof g=="boolean",e,"internal-error"),Bs(i,e.name),Bs(o,e.name),Bs(a,e.name),Bs(c,e.name),Bs(u,e.name),Bs(h,e.name);const y=new br({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:_,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(y.providerData=v.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new Da;s.updateFromServerResponse(n);const i=new br({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ke(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$I(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Da;a.updateFromIdToken(r);const c=new br({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new fy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=new Map;function ys(t){Ns(t instanceof Function,"Expected a class definition");let e=N1.get(t);return e?(Ns(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,N1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WI.type="NONE";const A1=WI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e,n){return`firebase:${t}:${e}:${n}`}class Oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nh(this.userKey,s.apiKey,i),this.fullPersistenceKey=nh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qh(this.auth,{idToken:e}).catch(()=>{});return n?br._fromGetAccountInfoResponse(this.auth,n,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oa(ys(A1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ys(A1);const o=nh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Qh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await br._fromGetAccountInfoResponse(e,m,h)}else f=br._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Oa(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Oa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YI(e))return"Blackberry";if(XI(e))return"Webos";if(qI(e))return"Safari";if((e.includes("chrome/")||KI(e))&&!e.includes("edge/"))return"Chrome";if(QI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HI(t=pn()){return/firefox\//i.test(t)}function qI(t=pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KI(t=pn()){return/crios\//i.test(t)}function GI(t=pn()){return/iemobile/i.test(t)}function QI(t=pn()){return/android/i.test(t)}function YI(t=pn()){return/blackberry/i.test(t)}function XI(t=pn()){return/webos/i.test(t)}function w0(t=pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function W5(t=pn()){var e;return w0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function H5(){return i6()&&document.documentMode===10}function ZI(t=pn()){return w0(t)||QI(t)||XI(t)||YI(t)||/windows phone/i.test(t)||GI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e=[]){let n;switch(t){case"Browser":n=k1(pn());break;case"Worker":n=`${k1(pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ko}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e={}){return Hi(t,"GET","/v2/passwordPolicy",Wi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=6;class Q5{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??G5,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R1(this),this.idTokenSubscription=new R1(this),this.beforeStateQueue=new q5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ys(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qh(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(ws(this));const n=e?vt(e):null;return n&&ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await K5(this),n=new Q5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $5(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ys(e)||this._popupRedirectResolver;ke(n,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[ys(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&S5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Go(t){return vt(t)}class R1{constructor(e){this.auth=e,this.observer=null,this.addObserver=f6(n=>this.observer=n)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X5(t){qf=t}function eN(t){return qf.loadJS(t)}function Z5(){return qf.recaptchaEnterpriseScript}function J5(){return qf.gapiScript}function eV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class tV{constructor(){this.enterprise=new nV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class nV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const rV="recaptcha-enterprise",tN="NO_RECAPTCHA";class sV{constructor(e){this.type=rV,this.auth=Go(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{O5(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new D5(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;C1(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(tN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tV().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&C1(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Z5();c.length!==0&&(c+=a),eN(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function P1(t,e,n,r=!1,s=!1){const i=new sV(t);let o;if(s)o=tN;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function py(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await P1(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await P1(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e){const n=Hf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(jo(i,e??{}))return s;kr(s,"already-initialized")}return n.initialize({options:e})}function oV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ys);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aV(t,e,n){const r=Go(t);ke(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=nN(e),{host:o,port:a}=lV(e),c=a===null?"":`:${a}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ke(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ke(jo(u,r.config.emulator)&&jo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,$i(o)?(d0(`${i}//${o}${c}`),h0("Auth",!0)):cV()}function nN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lV(t){const e=nN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:j1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:j1(o)}}}function j1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gs("not implemented")}_getIdTokenResponse(e){return gs("not implemented")}_linkToIdToken(e,n){return gs("not implemented")}_getReauthenticationResolver(e){return gs("not implemented")}}async function uV(t,e){return Hi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e){return Nu(t,"POST","/v1/accounts:signInWithPassword",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){return Nu(t,"POST","/v1/accounts:signInWithEmailLink",Wi(t,e))}async function fV(t,e){return Nu(t,"POST","/v1/accounts:signInWithEmailLink",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends _0{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new su(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new su(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(e,n,"signInWithPassword",dV);case"emailLink":return hV(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(e,r,"signUpPassword",uV);case"emailLink":return fV(e,{idToken:n,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e){return Nu(t,"POST","/v1/accounts:signInWithIdp",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="http://localhost";class Oo extends _0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Oo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return La(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,La(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,La(e,n)}buildRequest(){const e={requestUri:pV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gV(t){const e=cc(uc(t)).link,n=e?cc(uc(e)).deep_link_id:null,r=cc(uc(t)).deep_link_id;return(r?cc(uc(r)).link:null)||r||n||e||t}class x0{constructor(e){const n=cc(uc(e)),r=n.apiKey??null,s=n.oobCode??null,i=mV(n.mode??null);ke(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gV(e);try{return new x0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,n){return su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=x0.parseLink(n);return ke(r,"argument-error"),su._fromEmailAndCode(e,r.code,r.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends rN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends Au{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ys.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return fs.credential(n,r)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Au{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com";Xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Au{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zs.credential(n,r)}catch{return null}}}Zs.TWITTER_SIGN_IN_METHOD="twitter.com";Zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e){return Nu(t,"POST","/v1/accounts:signUp",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await br._fromIdTokenResponse(e,r,s),o=D1(r);return new Lo({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=D1(r);return new Lo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function D1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends ss{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Xh(e,n,r,s)}}function sN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(t,i,e,r):i})}async function vV(t,e,n=!1){const r=await ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Lo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(t,e,n=!1){const{auth:r}=t;if(Fn(r.app))return Promise.reject(ws(r));const s="reauthenticate";try{const i=await ru(t,sN(r,s,e,t),n);ke(i.idToken,r,"internal-error");const o=v0(i.idToken);ke(o,r,"internal-error");const{sub:a}=o;return ke(t.uid===a,r,"user-mismatch"),Lo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&kr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e,n=!1){if(Fn(t.app))return Promise.reject(ws(t));const r="signIn",s=await sN(t,r,e),i=await Lo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function _V(t,e){return iN(Go(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t){const e=Go(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xV(t,e,n){if(Fn(t.app))return Promise.reject(ws(t));const r=Go(t),o=await py(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yV).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&oN(t),c}),a=await Lo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function EV(t,e,n){return Fn(t.app)?Promise.reject(ws(t)):_V(vt(t),Il.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oN(t),r})}function bV(t,e,n,r){return vt(t).onIdTokenChanged(e,n,r)}function TV(t,e,n){return vt(t).beforeAuthStateChanged(e,n)}function SV(t){return vt(t).signOut()}const Zh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zh,"1"),this.storage.removeItem(Zh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=1e3,IV=10;class lN extends aN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);H5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lN.type="LOCAL";const NV=lN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN extends aN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cN.type="SESSION";const uN=cN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await AV(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=E0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function RV(t){Yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function PV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function DV(){return dN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebaseLocalStorageDb",OV=1,Jh="firebaseLocalStorage",fN="fbase_key";class ku{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gf(t,e){return t.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function LV(){const t=indexedDB.deleteDatabase(hN);return new ku(t).toPromise()}function my(){const t=indexedDB.open(hN,OV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jh,{keyPath:fN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),await LV(),e(await my()))})})}async function O1(t,e,n){const r=Gf(t,!0).put({[fN]:e,value:n});return new ku(r).toPromise()}async function MV(t,e){const n=Gf(t,!1).get(e),r=await new ku(n).toPromise();return r===void 0?null:r.value}function L1(t,e){const n=Gf(t,!0).delete(e);return new ku(n).toPromise()}const VV=800,FV=3;class pN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await my(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(DV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await PV(),!this.activeServiceWorker)return;this.sender=new kV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await my();return await O1(e,Zh,"1"),await L1(e,Zh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Gf(s,!1).getAll();return new ku(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pN.type="LOCAL";const UV=pN;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e){return e?ys(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0 extends _0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,n){return La(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BV(t){return iN(t.auth,new b0(t),t.bypassAuthState)}function $V(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),wV(n,new b0(t),t.bypassAuthState)}async function WV(t){const{auth:e,user:n}=t;return ke(n,e,"internal-error"),vV(n,new b0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BV;case"linkViaPopup":case"linkViaRedirect":return WV;case"reauthViaPopup":case"reauthViaRedirect":return $V;default:kr(this.auth,"internal-error")}}resolve(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new Iu(2e3,1e4);class Ta extends mN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Ns(this.filter.length===1,"Popup operations only handle one event");const e=E0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HV.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="pendingRedirect",rh=new Map;class KV extends mN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rh.get(this.auth._key());if(!e){try{const r=await GV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rh.set(this.auth._key(),e)}return this.bypassAuthState||rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GV(t,e){const n=XV(e),r=YV(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QV(t,e){rh.set(t._key(),e)}function YV(t){return ys(t._redirectPersistence)}function XV(t){return nh(qV,t.config.apiKey,t.name)}async function ZV(t,e,n=!1){if(Fn(t.app))return Promise.reject(ws(t));const r=Go(t),s=zV(r,e),o=await new KV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=10*60*1e3;class eF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JV&&this.cachedEventUids.clear(),this.cachedEventUids.has(M1(e))}saveEventToCache(e){this.cachedEventUids.add(M1(e)),this.lastProcessedEventTime=Date.now()}}function M1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e={}){return Hi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sF=/^https?/;async function iF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nF(t);for(const n of e)try{if(oF(n))return}catch{}kr(t,"unauthorized-domain")}function oF(t){const e=hy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sF.test(n))return!1;if(rF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=new Iu(3e4,6e4);function V1(){const t=Yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lF(t){return new Promise((e,n)=>{var s,i,o;function r(){V1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V1(),n(Qr(t,"network-request-failed"))},timeout:aF.get()})}if((i=(s=Yr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Yr().gapi)!=null&&o.load)r();else{const a=eV("iframefcb");return Yr()[a]=()=>{gapi.load?r():n(Qr(t,"network-request-failed"))},eN(`${J5()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw sh=null,e})}let sh=null;function cF(t){return sh=sh||lF(t),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new Iu(5e3,15e3),dF="__/auth/iframe",hF="emulator/auth/iframe",fF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mF(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y0(e,hF):`https://${t.config.authDomain}/${dF}`,r={apiKey:e.apiKey,appName:t.name,v:Ko},s=pF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Cu(r).slice(1)}`}async function gF(t){const e=await cF(t),n=Yr().gapi;return ke(n,t,"internal-error"),e.open({where:document.body,url:mF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qr(t,"network-request-failed"),a=Yr().setTimeout(()=>{i(o)},uF.get());function c(){Yr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vF=500,wF=600,_F="_blank",xF="http://localhost";class F1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EF(t,e,n,r=vF,s=wF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...yF,width:r.toString(),height:s.toString(),top:i,left:o},u=pn().toLowerCase();n&&(a=KI(u)?_F:n),HI(u)&&(e=e||xF,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(W5(u)&&a!=="_self")return bF(e||"",a),new F1(null);const f=window.open(e||"",a,h);ke(f,t,"popup-blocked");try{f.focus()}catch{}return new F1(f)}function bF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="__/auth/handler",SF="emulator/auth/handler",CF=encodeURIComponent("fac");async function U1(t,e,n,r,s,i){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ko,eventId:s};if(e instanceof rN){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",h6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Au){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${CF}=${encodeURIComponent(c)}`:"";return`${IF(t)}?${Cu(a).slice(1)}${u}`}function IF({config:t}){return t.emulator?y0(t,SF):`https://${t.authDomain}/${TF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class NF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uN,this._completeRedirectFn=ZV,this._overrideRedirectResult=QV}async _openPopup(e,n,r,s){var o;Ns((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await U1(e,n,r,hy(),s);return EF(e,i,E0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await U1(e,n,r,hy(),s);return RV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ns(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gF(e),r=new eF(e);return n.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sm,{type:Sm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Sm];i!==void 0&&n(!!i),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZI()||qI()||w0()}}const AF=NF;var z1="@firebase/auth",B1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PF(t){Do(new Pi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JI(t)},u=new Y5(r,s,i,c);return oV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Do(new Pi("auth-internal",e=>{const n=Go(e.getProvider("auth").getImmediate());return(r=>new kF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gr(z1,B1,RF(t)),Gr(z1,B1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=5*60,DF=kI("authIdTokenMaxAge")||jF;let $1=null;const OF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DF)return;const s=n==null?void 0:n.token;$1!==s&&($1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LF(t=m0()){const e=Hf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iV(t,{popupRedirectResolver:AF,persistence:[UV,NV,uN]}),r=kI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=OF(i.toString());TV(n,o,()=>o(n.currentUser)),bV(n,a=>o(a))}}const s=II("auth");return s&&aV(n,`http://${s}`),n}function MF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}X5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",MF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PF("Browser");var W1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,yN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function C(){}C.prototype=T.prototype,S.D=T.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(j,M,P){for(var D=Array(arguments.length-2),A=2;A<arguments.length;A++)D[A-2]=arguments[A];return T.prototype[M].apply(j,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,C){C||(C=0);var j=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)j[M]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(M=0;16>M;++M)j[M]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=S.g[0],C=S.g[1],M=S.g[2];var P=S.g[3],D=T+(P^C&(M^P))+j[0]+3614090360&4294967295;T=C+(D<<7&4294967295|D>>>25),D=P+(M^T&(C^M))+j[1]+3905402710&4294967295,P=T+(D<<12&4294967295|D>>>20),D=M+(C^P&(T^C))+j[2]+606105819&4294967295,M=P+(D<<17&4294967295|D>>>15),D=C+(T^M&(P^T))+j[3]+3250441966&4294967295,C=M+(D<<22&4294967295|D>>>10),D=T+(P^C&(M^P))+j[4]+4118548399&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(M^T&(C^M))+j[5]+1200080426&4294967295,P=T+(D<<12&4294967295|D>>>20),D=M+(C^P&(T^C))+j[6]+2821735955&4294967295,M=P+(D<<17&4294967295|D>>>15),D=C+(T^M&(P^T))+j[7]+4249261313&4294967295,C=M+(D<<22&4294967295|D>>>10),D=T+(P^C&(M^P))+j[8]+1770035416&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(M^T&(C^M))+j[9]+2336552879&4294967295,P=T+(D<<12&4294967295|D>>>20),D=M+(C^P&(T^C))+j[10]+4294925233&4294967295,M=P+(D<<17&4294967295|D>>>15),D=C+(T^M&(P^T))+j[11]+2304563134&4294967295,C=M+(D<<22&4294967295|D>>>10),D=T+(P^C&(M^P))+j[12]+1804603682&4294967295,T=C+(D<<7&4294967295|D>>>25),D=P+(M^T&(C^M))+j[13]+4254626195&4294967295,P=T+(D<<12&4294967295|D>>>20),D=M+(C^P&(T^C))+j[14]+2792965006&4294967295,M=P+(D<<17&4294967295|D>>>15),D=C+(T^M&(P^T))+j[15]+1236535329&4294967295,C=M+(D<<22&4294967295|D>>>10),D=T+(M^P&(C^M))+j[1]+4129170786&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^M&(T^C))+j[6]+3225465664&4294967295,P=T+(D<<9&4294967295|D>>>23),D=M+(T^C&(P^T))+j[11]+643717713&4294967295,M=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(M^P))+j[0]+3921069994&4294967295,C=M+(D<<20&4294967295|D>>>12),D=T+(M^P&(C^M))+j[5]+3593408605&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^M&(T^C))+j[10]+38016083&4294967295,P=T+(D<<9&4294967295|D>>>23),D=M+(T^C&(P^T))+j[15]+3634488961&4294967295,M=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(M^P))+j[4]+3889429448&4294967295,C=M+(D<<20&4294967295|D>>>12),D=T+(M^P&(C^M))+j[9]+568446438&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^M&(T^C))+j[14]+3275163606&4294967295,P=T+(D<<9&4294967295|D>>>23),D=M+(T^C&(P^T))+j[3]+4107603335&4294967295,M=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(M^P))+j[8]+1163531501&4294967295,C=M+(D<<20&4294967295|D>>>12),D=T+(M^P&(C^M))+j[13]+2850285829&4294967295,T=C+(D<<5&4294967295|D>>>27),D=P+(C^M&(T^C))+j[2]+4243563512&4294967295,P=T+(D<<9&4294967295|D>>>23),D=M+(T^C&(P^T))+j[7]+1735328473&4294967295,M=P+(D<<14&4294967295|D>>>18),D=C+(P^T&(M^P))+j[12]+2368359562&4294967295,C=M+(D<<20&4294967295|D>>>12),D=T+(C^M^P)+j[5]+4294588738&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^M)+j[8]+2272392833&4294967295,P=T+(D<<11&4294967295|D>>>21),D=M+(P^T^C)+j[11]+1839030562&4294967295,M=P+(D<<16&4294967295|D>>>16),D=C+(M^P^T)+j[14]+4259657740&4294967295,C=M+(D<<23&4294967295|D>>>9),D=T+(C^M^P)+j[1]+2763975236&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^M)+j[4]+1272893353&4294967295,P=T+(D<<11&4294967295|D>>>21),D=M+(P^T^C)+j[7]+4139469664&4294967295,M=P+(D<<16&4294967295|D>>>16),D=C+(M^P^T)+j[10]+3200236656&4294967295,C=M+(D<<23&4294967295|D>>>9),D=T+(C^M^P)+j[13]+681279174&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^M)+j[0]+3936430074&4294967295,P=T+(D<<11&4294967295|D>>>21),D=M+(P^T^C)+j[3]+3572445317&4294967295,M=P+(D<<16&4294967295|D>>>16),D=C+(M^P^T)+j[6]+76029189&4294967295,C=M+(D<<23&4294967295|D>>>9),D=T+(C^M^P)+j[9]+3654602809&4294967295,T=C+(D<<4&4294967295|D>>>28),D=P+(T^C^M)+j[12]+3873151461&4294967295,P=T+(D<<11&4294967295|D>>>21),D=M+(P^T^C)+j[15]+530742520&4294967295,M=P+(D<<16&4294967295|D>>>16),D=C+(M^P^T)+j[2]+3299628645&4294967295,C=M+(D<<23&4294967295|D>>>9),D=T+(M^(C|~P))+j[0]+4096336452&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~M))+j[7]+1126891415&4294967295,P=T+(D<<10&4294967295|D>>>22),D=M+(T^(P|~C))+j[14]+2878612391&4294967295,M=P+(D<<15&4294967295|D>>>17),D=C+(P^(M|~T))+j[5]+4237533241&4294967295,C=M+(D<<21&4294967295|D>>>11),D=T+(M^(C|~P))+j[12]+1700485571&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~M))+j[3]+2399980690&4294967295,P=T+(D<<10&4294967295|D>>>22),D=M+(T^(P|~C))+j[10]+4293915773&4294967295,M=P+(D<<15&4294967295|D>>>17),D=C+(P^(M|~T))+j[1]+2240044497&4294967295,C=M+(D<<21&4294967295|D>>>11),D=T+(M^(C|~P))+j[8]+1873313359&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~M))+j[15]+4264355552&4294967295,P=T+(D<<10&4294967295|D>>>22),D=M+(T^(P|~C))+j[6]+2734768916&4294967295,M=P+(D<<15&4294967295|D>>>17),D=C+(P^(M|~T))+j[13]+1309151649&4294967295,C=M+(D<<21&4294967295|D>>>11),D=T+(M^(C|~P))+j[4]+4149444226&4294967295,T=C+(D<<6&4294967295|D>>>26),D=P+(C^(T|~M))+j[11]+3174756917&4294967295,P=T+(D<<10&4294967295|D>>>22),D=M+(T^(P|~C))+j[2]+718787259&4294967295,M=P+(D<<15&4294967295|D>>>17),D=C+(P^(M|~T))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+P&4294967295}r.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var C=T-this.blockSize,j=this.B,M=this.h,P=0;P<T;){if(M==0)for(;P<=C;)s(this,S,P),P+=this.blockSize;if(typeof S=="string"){for(;P<T;)if(j[M++]=S.charCodeAt(P++),M==this.blockSize){s(this,j),M=0;break}}else for(;P<T;)if(j[M++]=S[P++],M==this.blockSize){s(this,j),M=0;break}}this.h=M,this.o+=T},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var C=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=C&255,C/=256;for(this.u(S),S=Array(16),T=C=0;4>T;++T)for(var j=0;32>j;j+=8)S[C++]=this.g[T]>>>j&255;return S};function i(S,T){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=T(S)}function o(S,T){this.h=T;for(var C=[],j=!0,M=S.length-1;0<=M;M--){var P=S[M]|0;j&&P==T||(C[M]=P,j=!1)}this.g=C}var a={};function c(S){return-128<=S&&128>S?i(S,function(T){return new o([T|0],0>T?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return _(u(-S));for(var T=[],C=1,j=0;S>=C;j++)T[j]=S/C|0,C*=4294967296;return new o(T,0)}function h(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return _(h(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(T,8)),j=f,M=0;M<S.length;M+=8){var P=Math.min(8,S.length-M),D=parseInt(S.substring(M,M+P),T);8>P?(P=u(Math.pow(T,P)),j=j.j(P).add(u(D))):(j=j.j(C),j=j.add(u(D)))}return j}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(p(this))return-_(this).m();for(var S=0,T=1,C=0;C<this.g.length;C++){var j=this.i(C);S+=(0<=j?j:4294967296+j)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(p(this))return"-"+_(this).toString(S);for(var T=u(Math.pow(S,6)),C=this,j="";;){var M=I(C,T).g;C=y(C,M.j(T));var P=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=M,v(C))return P+j;for(;6>P.length;)P="0"+P;j=P+j}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function p(S){return S.h==-1}t.l=function(S){return S=y(this,S),p(S)?-1:v(S)?0:1};function _(S){for(var T=S.g.length,C=[],j=0;j<T;j++)C[j]=~S.g[j];return new o(C,~S.h).add(m)}t.abs=function(){return p(this)?_(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),C=[],j=0,M=0;M<=T;M++){var P=j+(this.i(M)&65535)+(S.i(M)&65535),D=(P>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);j=D>>>16,P&=65535,D&=65535,C[M]=D<<16|P}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,T){return S.add(_(T))}t.j=function(S){if(v(this)||v(S))return f;if(p(this))return p(S)?_(this).j(_(S)):_(_(this).j(S));if(p(S))return _(this.j(_(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var T=this.g.length+S.g.length,C=[],j=0;j<2*T;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(var M=0;M<S.g.length;M++){var P=this.i(j)>>>16,D=this.i(j)&65535,A=S.i(M)>>>16,H=S.i(M)&65535;C[2*j+2*M]+=D*H,w(C,2*j+2*M),C[2*j+2*M+1]+=P*H,w(C,2*j+2*M+1),C[2*j+2*M+1]+=D*A,w(C,2*j+2*M+1),C[2*j+2*M+2]+=P*A,w(C,2*j+2*M+2)}for(j=0;j<T;j++)C[j]=C[2*j+1]<<16|C[2*j];for(j=T;j<2*T;j++)C[j]=0;return new o(C,0)};function w(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function x(S,T){this.g=S,this.h=T}function I(S,T){if(v(T))throw Error("division by zero");if(v(S))return new x(f,f);if(p(S))return T=I(_(S),T),new x(_(T.g),_(T.h));if(p(T))return T=I(S,_(T)),new x(_(T.g),T.h);if(30<S.g.length){if(p(S)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var C=m,j=T;0>=j.l(S);)C=R(C),j=R(j);var M=L(C,1),P=L(j,1);for(j=L(j,2),C=L(C,2);!v(j);){var D=P.add(j);0>=D.l(S)&&(M=M.add(C),P=D),j=L(j,1),C=L(C,1)}return T=y(S,M.j(T)),new x(M,T)}for(M=f;0<=S.l(T);){for(C=Math.max(1,Math.floor(S.m()/T.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),P=u(C),D=P.j(T);p(D)||0<D.l(S);)C-=j,P=u(C),D=P.j(T);v(P)&&(P=m),M=M.add(P),S=y(S,D)}return new x(M,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),C=[],j=0;j<T;j++)C[j]=this.i(j)&S.i(j);return new o(C,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),C=[],j=0;j<T;j++)C[j]=this.i(j)|S.i(j);return new o(C,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),C=[],j=0;j<T;j++)C[j]=this.i(j)^S.i(j);return new o(C,this.h^S.h)};function R(S){for(var T=S.g.length+1,C=[],j=0;j<T;j++)C[j]=S.i(j)<<1|S.i(j-1)>>>31;return new o(C,S.h)}function L(S,T){var C=T>>5;T%=32;for(var j=S.g.length-C,M=[],P=0;P<j;P++)M[P]=0<T?S.i(P+C)>>>T|S.i(P+C+1)<<32-T:S.i(P+C);return new o(M,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xi=o}).apply(typeof W1<"u"?W1:typeof self<"u"?self:typeof window<"u"?window:{});var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vN,dc,wN,ih,gy,_N,xN,EN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,E,N){return d==Array.prototype||d==Object.prototype||(d[E]=N.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Id=="object"&&Id];for(var E=0;E<d.length;++E){var N=d[E];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function s(d,E){if(E)e:{var N=r;d=d.split(".");for(var V=0;V<d.length-1;V++){var Y=d[V];if(!(Y in N))break e;N=N[Y]}d=d[d.length-1],V=N[d],E=E(V),E!=V&&E!=null&&e(N,d,{configurable:!0,writable:!0,value:E})}}function i(d,E){d instanceof String&&(d+="");var N=0,V=!1,Y={next:function(){if(!V&&N<d.length){var J=N++;return{value:E(J,d[J]),done:!1}}return V=!0,{done:!0,value:void 0}}};return Y[Symbol.iterator]=function(){return Y},Y}s("Array.prototype.values",function(d){return d||function(){return i(this,function(E,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(d){var E=typeof d;return E=E!="object"?E:d?Array.isArray(d)?"array":E:"null",E=="array"||E=="object"&&typeof d.length=="number"}function u(d){var E=typeof d;return E=="object"&&d!=null||E=="function"}function h(d,E,N){return d.call.apply(d.bind,arguments)}function f(d,E,N){if(!d)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var Y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Y,V),d.apply(E,Y)}}return function(){return d.apply(E,arguments)}}function m(d,E,N){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,E){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),d.apply(this,V)}}function v(d,E){function N(){}N.prototype=E.prototype,d.aa=E.prototype,d.prototype=new N,d.prototype.constructor=d,d.Qb=function(V,Y,J){for(var pe=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)pe[ot-2]=arguments[ot];return E.prototype[Y].apply(V,pe)}}function p(d){const E=d.length;if(0<E){const N=Array(E);for(let V=0;V<E;V++)N[V]=d[V];return N}return[]}function _(d,E){for(let N=1;N<arguments.length;N++){const V=arguments[N];if(c(V)){const Y=d.length||0,J=V.length||0;d.length=Y+J;for(let pe=0;pe<J;pe++)d[Y+pe]=V[pe]}else d.push(V)}}class y{constructor(E,N){this.i=E,this.j=N,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function w(d){return/^[\s\xa0]*$/.test(d)}function x(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var R=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function L(d,E,N){for(const V in d)E.call(N,d[V],V,d)}function S(d,E){for(const N in d)E.call(void 0,d[N],N,d)}function T(d){const E={};for(const N in d)E[N]=d[N];return E}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,E){let N,V;for(let Y=1;Y<arguments.length;Y++){V=arguments[Y];for(N in V)d[N]=V[N];for(let J=0;J<C.length;J++)N=C[J],Object.prototype.hasOwnProperty.call(V,N)&&(d[N]=V[N])}}function M(d){var E=1;d=d.split(":");const N=[];for(;0<E&&d.length;)N.push(d.shift()),E--;return d.length&&N.push(d.join(":")),N}function P(d){a.setTimeout(()=>{throw d},0)}function D(){var d=z;let E=null;return d.g&&(E=d.g,d.g=d.g.next,d.g||(d.h=null),E.next=null),E}class A{constructor(){this.h=this.g=null}add(E,N){const V=H.get();V.set(E,N),this.h?this.h.next=V:this.g=V,this.h=V}}var H=new y(()=>new se,d=>d.reset());class se{constructor(){this.next=this.g=this.h=null}set(E,N){this.h=E,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let X,U=!1,z=new A,Z=()=>{const d=a.Promise.resolve(void 0);X=()=>{d.then(W)}};var W=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(N){P(N)}var E=H;E.j(d),100>E.h&&(E.h++,d.next=E.g,E.g=d)}U=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,E){this.type=d,this.g=this.target=E,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,E=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const N=()=>{};a.addEventListener("test",N,E),a.removeEventListener("test",N,E)}catch{}return d}();function oe(d,E){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var N=this.type=d.type,V=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=E,E=d.relatedTarget){if(R){e:{try{I(E.nodeName);var Y=!0;break e}catch{}Y=!1}Y||(E=null)}}else N=="mouseover"?E=d.fromElement:N=="mouseout"&&(E=d.toElement);this.relatedTarget=E,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Se[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&oe.aa.h.call(this)}}v(oe,le);var Se={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ee=0;function ye(d,E,N,V,Y){this.listener=d,this.proxy=null,this.src=E,this.type=N,this.capture=!!V,this.ha=Y,this.key=++ee,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function be(d){this.src=d,this.g={},this.h=0}be.prototype.add=function(d,E,N,V,Y){var J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);var pe=Be(d,E,V,Y);return-1<pe?(E=d[pe],N||(E.fa=!1)):(E=new ye(E,this.src,J,!!V,Y),E.fa=N,d.push(E)),E};function Ae(d,E){var N=E.type;if(N in d.g){var V=d.g[N],Y=Array.prototype.indexOf.call(V,E,void 0),J;(J=0<=Y)&&Array.prototype.splice.call(V,Y,1),J&&(xe(E),d.g[N].length==0&&(delete d.g[N],d.h--))}}function Be(d,E,N,V){for(var Y=0;Y<d.length;++Y){var J=d[Y];if(!J.da&&J.listener==E&&J.capture==!!N&&J.ha==V)return Y}return-1}var k="closure_lm_"+(1e6*Math.random()|0),$={};function K(d,E,N,V,Y){if(Array.isArray(E)){for(var J=0;J<E.length;J++)K(d,E[J],N,V,Y);return null}return N=ue(N),d&&d[fe]?d.K(E,N,u(V)?!!V.capture:!!V,Y):O(d,E,N,!1,V,Y)}function O(d,E,N,V,Y,J){if(!E)throw Error("Invalid event type");var pe=u(Y)?!!Y.capture:!!Y,ot=de(d);if(ot||(d[k]=ot=new be(d)),N=ot.add(E,N,V,pe,J),N.proxy)return N;if(V=F(),N.proxy=V,V.src=d,V.listener=N,d.addEventListener)ce||(Y=pe),Y===void 0&&(Y=!1),d.addEventListener(E.toString(),V,Y);else if(d.attachEvent)d.attachEvent(ie(E.toString()),V);else if(d.addListener&&d.removeListener)d.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function F(){function d(N){return E.call(d.src,d.listener,N)}const E=Q;return d}function B(d,E,N,V,Y){if(Array.isArray(E))for(var J=0;J<E.length;J++)B(d,E[J],N,V,Y);else V=u(V)?!!V.capture:!!V,N=ue(N),d&&d[fe]?(d=d.i,E=String(E).toString(),E in d.g&&(J=d.g[E],N=Be(J,N,V,Y),-1<N&&(xe(J[N]),Array.prototype.splice.call(J,N,1),J.length==0&&(delete d.g[E],d.h--)))):d&&(d=de(d))&&(E=d.g[E.toString()],d=-1,E&&(d=Be(E,N,V,Y)),(N=-1<d?E[d]:null)&&ne(N))}function ne(d){if(typeof d!="number"&&d&&!d.da){var E=d.src;if(E&&E[fe])Ae(E.i,d);else{var N=d.type,V=d.proxy;E.removeEventListener?E.removeEventListener(N,V,d.capture):E.detachEvent?E.detachEvent(ie(N),V):E.addListener&&E.removeListener&&E.removeListener(V),(N=de(E))?(Ae(N,d),N.h==0&&(N.src=null,E[k]=null)):xe(d)}}}function ie(d){return d in $?$[d]:$[d]="on"+d}function Q(d,E){if(d.da)d=!0;else{E=new oe(E,this);var N=d.listener,V=d.ha||d.src;d.fa&&ne(d),d=N.call(V,E)}return d}function de(d){return d=d[k],d instanceof be?d:null}var te="__closure_events_fn_"+(1e9*Math.random()>>>0);function ue(d){return typeof d=="function"?d:(d[te]||(d[te]=function(E){return d.handleEvent(E)}),d[te])}function me(){q.call(this),this.i=new be(this),this.M=this,this.F=null}v(me,q),me.prototype[fe]=!0,me.prototype.removeEventListener=function(d,E,N,V){B(this,d,E,N,V)};function De(d,E){var N,V=d.F;if(V)for(N=[];V;V=V.F)N.push(V);if(d=d.M,V=E.type||E,typeof E=="string")E=new le(E,d);else if(E instanceof le)E.target=E.target||d;else{var Y=E;E=new le(V,d),j(E,Y)}if(Y=!0,N)for(var J=N.length-1;0<=J;J--){var pe=E.g=N[J];Y=Me(pe,V,!0,E)&&Y}if(pe=E.g=d,Y=Me(pe,V,!0,E)&&Y,Y=Me(pe,V,!1,E)&&Y,N)for(J=0;J<N.length;J++)pe=E.g=N[J],Y=Me(pe,V,!1,E)&&Y}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var d=this.i,E;for(E in d.g){for(var N=d.g[E],V=0;V<N.length;V++)xe(N[V]);delete d.g[E],d.h--}}this.F=null},me.prototype.K=function(d,E,N,V){return this.i.add(String(d),E,!1,N,V)},me.prototype.L=function(d,E,N,V){return this.i.add(String(d),E,!0,N,V)};function Me(d,E,N,V){if(E=d.i.g[String(E)],!E)return!0;E=E.concat();for(var Y=!0,J=0;J<E.length;++J){var pe=E[J];if(pe&&!pe.da&&pe.capture==N){var ot=pe.listener,Ht=pe.ha||pe.src;pe.fa&&Ae(d.i,pe),Y=ot.call(Ht,V)!==!1&&Y}}return Y&&!V.defaultPrevented}function Ut(d,E,N){if(typeof d=="function")N&&(d=m(d,N));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(d,E||0)}function js(d){d.g=Ut(()=>{d.g=null,d.i&&(d.i=!1,js(d))},d.l);const E=d.h;d.h=null,d.m.apply(null,E)}class Qn extends q{constructor(E,N){super(),this.m=E,this.l=N,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:js(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(d){q.call(this),this.h=d,this.g={}}v(fr,q);var ft=[];function Xi(d){L(d.g,function(E,N){this.g.hasOwnProperty(N)&&ne(E)},d),d.g={}}fr.prototype.N=function(){fr.aa.N.call(this),Xi(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zi=a.JSON.stringify,pr=a.JSON.parse,Fu=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Ol(){}Ol.prototype.h=null;function Uu(d){return d.h||(d.h=d.i())}function zu(){}var Ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function os(){le.call(this,"d")}v(os,le);function Os(){le.call(this,"c")}v(Os,le);var Ji={},jw=null;function Bu(){return jw=jw||new me}Ji.La="serverreachability";function Dw(d){le.call(this,Ji.La,d)}v(Dw,le);function Ll(d){const E=Bu();De(E,new Dw(E))}Ji.STAT_EVENT="statevent";function Ow(d,E){le.call(this,Ji.STAT_EVENT,d),this.stat=E}v(Ow,le);function mn(d){const E=Bu();De(E,new Ow(E,d))}Ji.Ma="timingevent";function Lw(d,E){le.call(this,Ji.Ma,d),this.size=E}v(Lw,le);function Ml(d,E){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},E)}function Vl(){this.g=!0}Vl.prototype.xa=function(){this.g=!1};function vP(d,E,N,V,Y,J){d.info(function(){if(d.g)if(J)for(var pe="",ot=J.split("&"),Ht=0;Ht<ot.length;Ht++){var et=ot[Ht].split("=");if(1<et.length){var tn=et[0];et=et[1];var nn=tn.split("_");pe=2<=nn.length&&nn[1]=="type"?pe+(tn+"="+et+"&"):pe+(tn+"=redacted&")}}else pe=null;else pe=J;return"XMLHTTP REQ ("+V+") [attempt "+Y+"]: "+E+`
`+N+`
`+pe})}function wP(d,E,N,V,Y,J,pe){d.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+Y+"]: "+E+`
`+N+`
`+J+" "+pe})}function Jo(d,E,N,V){d.info(function(){return"XMLHTTP TEXT ("+E+"): "+xP(d,N)+(V?" "+V:"")})}function _P(d,E){d.info(function(){return"TIMEOUT: "+E})}Vl.prototype.info=function(){};function xP(d,E){if(!d.g)return E;if(!E)return null;try{var N=JSON.parse(E);if(N){for(d=0;d<N.length;d++)if(Array.isArray(N[d])){var V=N[d];if(!(2>V.length)){var Y=V[1];if(Array.isArray(Y)&&!(1>Y.length)){var J=Y[0];if(J!="noop"&&J!="stop"&&J!="close")for(var pe=1;pe<Y.length;pe++)Y[pe]=""}}}}return Zi(N)}catch{return E}}var $u={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cp;function Wu(){}v(Wu,Ol),Wu.prototype.g=function(){return new XMLHttpRequest},Wu.prototype.i=function(){return{}},Cp=new Wu;function Ls(d,E,N,V){this.j=d,this.i=E,this.l=N,this.R=V||1,this.U=new fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vw}function Vw(){this.i=null,this.g="",this.h=!1}var Fw={},Ip={};function Np(d,E,N){d.L=1,d.v=Gu(as(E)),d.m=N,d.P=!0,Uw(d,null)}function Uw(d,E){d.F=Date.now(),Hu(d),d.A=as(d.v);var N=d.A,V=d.R;Array.isArray(V)||(V=[String(V)]),e_(N.i,"t",V),d.C=0,N=d.j.J,d.h=new Vw,d.g=v_(d.j,N?E:null,!d.m),0<d.O&&(d.M=new Qn(m(d.Y,d,d.g),d.O)),E=d.U,N=d.g,V=d.ca;var Y="readystatechange";Array.isArray(Y)||(Y&&(ft[0]=Y.toString()),Y=ft);for(var J=0;J<Y.length;J++){var pe=K(N,Y[J],V||E.handleEvent,!1,E.h||E);if(!pe)break;E.g[pe.key]=pe}E=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,E)):(d.u="GET",d.g.ea(d.A,d.u,null,E)),Ll(),vP(d.i,d.u,d.A,d.l,d.R,d.m)}Ls.prototype.ca=function(d){d=d.target;const E=this.M;E&&ls(d)==3?E.j():this.Y(d)},Ls.prototype.Y=function(d){try{if(d==this.g)e:{const nn=ls(this.g);var E=this.g.Ba();const na=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||a_(this.g)))){this.J||nn!=4||E==7||(E==8||0>=na?Ll(3):Ll(2)),Ap(this);var N=this.g.Z();this.X=N;t:if(zw(this)){var V=a_(this.g);d="";var Y=V.length,J=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){eo(this),Fl(this);var pe="";break t}this.h.i=new a.TextDecoder}for(E=0;E<Y;E++)this.h.h=!0,d+=this.h.i.decode(V[E],{stream:!(J&&E==Y-1)});V.length=0,this.h.g+=d,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=N==200,wP(this.i,this.u,this.A,this.l,this.R,nn,N),this.o){if(this.T&&!this.K){t:{if(this.g){var ot,Ht=this.g;if((ot=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ot)){var et=ot;break t}}et=null}if(N=et)Jo(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kp(this,N);else{this.o=!1,this.s=3,mn(12),eo(this),Fl(this);break e}}if(this.P){N=!0;let mr;for(;!this.J&&this.C<pe.length;)if(mr=EP(this,pe),mr==Ip){nn==4&&(this.s=4,mn(14),N=!1),Jo(this.i,this.l,null,"[Incomplete Response]");break}else if(mr==Fw){this.s=4,mn(15),Jo(this.i,this.l,pe,"[Invalid Chunk]"),N=!1;break}else Jo(this.i,this.l,mr,null),kp(this,mr);if(zw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||pe.length!=0||this.h.h||(this.s=1,mn(16),N=!1),this.o=this.o&&N,!N)Jo(this.i,this.l,pe,"[Invalid Chunked Response]"),eo(this),Fl(this);else if(0<pe.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),Lp(tn),tn.M=!0,mn(11))}}else Jo(this.i,this.l,pe,null),kp(this,pe);nn==4&&eo(this),this.o&&!this.J&&(nn==4?p_(this.j,this):(this.o=!1,Hu(this)))}else FP(this.g),N==400&&0<pe.indexOf("Unknown SID")?(this.s=3,mn(12)):(this.s=0,mn(13)),eo(this),Fl(this)}}}catch{}finally{}};function zw(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function EP(d,E){var N=d.C,V=E.indexOf(`
`,N);return V==-1?Ip:(N=Number(E.substring(N,V)),isNaN(N)?Fw:(V+=1,V+N>E.length?Ip:(E=E.slice(V,V+N),d.C=V+N,E)))}Ls.prototype.cancel=function(){this.J=!0,eo(this)};function Hu(d){d.S=Date.now()+d.I,Bw(d,d.I)}function Bw(d,E){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ml(m(d.ba,d),E)}function Ap(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ls.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(_P(this.i,this.A),this.L!=2&&(Ll(),mn(17)),eo(this),this.s=2,Fl(this)):Bw(this,this.S-d)};function Fl(d){d.j.G==0||d.J||p_(d.j,d)}function eo(d){Ap(d);var E=d.M;E&&typeof E.ma=="function"&&E.ma(),d.M=null,Xi(d.U),d.g&&(E=d.g,d.g=null,E.abort(),E.ma())}function kp(d,E){try{var N=d.j;if(N.G!=0&&(N.g==d||Rp(N.h,d))){if(!d.K&&Rp(N.h,d)&&N.G==3){try{var V=N.Da.g.parse(E)}catch{V=null}if(Array.isArray(V)&&V.length==3){var Y=V;if(Y[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<d.F)ed(N),Zu(N);else break e;Op(N),mn(18)}}else N.za=Y[1],0<N.za-N.T&&37500>Y[2]&&N.F&&N.v==0&&!N.C&&(N.C=Ml(m(N.Za,N),6e3));if(1>=Hw(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else no(N,11)}else if((d.K||N.g==d)&&ed(N),!w(E))for(Y=N.Da.g.parse(E),E=0;E<Y.length;E++){let et=Y[E];if(N.T=et[0],et=et[1],N.G==2)if(et[0]=="c"){N.K=et[1],N.ia=et[2];const tn=et[3];tn!=null&&(N.la=tn,N.j.info("VER="+N.la));const nn=et[4];nn!=null&&(N.Aa=nn,N.j.info("SVER="+N.Aa));const na=et[5];na!=null&&typeof na=="number"&&0<na&&(V=1.5*na,N.L=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const mr=d.g;if(mr){const nd=mr.g?mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nd){var J=V.h;J.g||nd.indexOf("spdy")==-1&&nd.indexOf("quic")==-1&&nd.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Pp(J,J.h),J.h=null))}if(V.D){const Mp=mr.g?mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Mp&&(V.ya=Mp,ct(V.I,V.D,Mp))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-d.F,N.j.info("Handshake RTT: "+N.R+"ms")),V=N;var pe=d;if(V.qa=y_(V,V.J?V.ia:null,V.W),pe.K){qw(V.h,pe);var ot=pe,Ht=V.L;Ht&&(ot.I=Ht),ot.B&&(Ap(ot),Hu(ot)),V.g=pe}else h_(V);0<N.i.length&&Ju(N)}else et[0]!="stop"&&et[0]!="close"||no(N,7);else N.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?no(N,7):Dp(N):et[0]!="noop"&&N.l&&N.l.ta(et),N.v=0)}}Ll(4)}catch{}}var bP=class{constructor(d,E){this.g=d,this.map=E}};function $w(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ww(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hw(d){return d.h?1:d.g?d.g.size:0}function Rp(d,E){return d.h?d.h==E:d.g?d.g.has(E):!1}function Pp(d,E){d.g?d.g.add(E):d.h=E}function qw(d,E){d.h&&d.h==E?d.h=null:d.g&&d.g.has(E)&&d.g.delete(E)}$w.prototype.cancel=function(){if(this.i=Kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Kw(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let E=d.i;for(const N of d.g.values())E=E.concat(N.D);return E}return p(d.i)}function TP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var E=[],N=d.length,V=0;V<N;V++)E.push(d[V]);return E}E=[],N=0;for(V in d)E[N++]=d[V];return E}function SP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var E=[];d=d.length;for(var N=0;N<d;N++)E.push(N);return E}E=[],N=0;for(const V in d)E[N++]=V;return E}}}function Gw(d,E){if(d.forEach&&typeof d.forEach=="function")d.forEach(E,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,E,void 0);else for(var N=SP(d),V=TP(d),Y=V.length,J=0;J<Y;J++)E.call(void 0,V[J],N&&N[J],d)}var Qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CP(d,E){if(d){d=d.split("&");for(var N=0;N<d.length;N++){var V=d[N].indexOf("="),Y=null;if(0<=V){var J=d[N].substring(0,V);Y=d[N].substring(V+1)}else J=d[N];E(J,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function to(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof to){this.h=d.h,qu(this,d.j),this.o=d.o,this.g=d.g,Ku(this,d.s),this.l=d.l;var E=d.i,N=new Bl;N.i=E.i,E.g&&(N.g=new Map(E.g),N.h=E.h),Yw(this,N),this.m=d.m}else d&&(E=String(d).match(Qw))?(this.h=!1,qu(this,E[1]||"",!0),this.o=Ul(E[2]||""),this.g=Ul(E[3]||"",!0),Ku(this,E[4]),this.l=Ul(E[5]||"",!0),Yw(this,E[6]||"",!0),this.m=Ul(E[7]||"")):(this.h=!1,this.i=new Bl(null,this.h))}to.prototype.toString=function(){var d=[],E=this.j;E&&d.push(zl(E,Xw,!0),":");var N=this.g;return(N||E=="file")&&(d.push("//"),(E=this.o)&&d.push(zl(E,Xw,!0),"@"),d.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&d.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&d.push("/"),d.push(zl(N,N.charAt(0)=="/"?AP:NP,!0))),(N=this.i.toString())&&d.push("?",N),(N=this.m)&&d.push("#",zl(N,RP)),d.join("")};function as(d){return new to(d)}function qu(d,E,N){d.j=N?Ul(E,!0):E,d.j&&(d.j=d.j.replace(/:$/,""))}function Ku(d,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);d.s=E}else d.s=null}function Yw(d,E,N){E instanceof Bl?(d.i=E,PP(d.i,d.h)):(N||(E=zl(E,kP)),d.i=new Bl(E,d.h))}function ct(d,E,N){d.i.set(E,N)}function Gu(d){return ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ul(d,E){return d?E?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zl(d,E,N){return typeof d=="string"?(d=encodeURI(d).replace(E,IP),N&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function IP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xw=/[#\/\?@]/g,NP=/[#\?:]/g,AP=/[#\?]/g,kP=/[#\?@]/g,RP=/#/g;function Bl(d,E){this.h=this.g=null,this.i=d||null,this.j=!!E}function Ms(d){d.g||(d.g=new Map,d.h=0,d.i&&CP(d.i,function(E,N){d.add(decodeURIComponent(E.replace(/\+/g," ")),N)}))}t=Bl.prototype,t.add=function(d,E){Ms(this),this.i=null,d=ea(this,d);var N=this.g.get(d);return N||this.g.set(d,N=[]),N.push(E),this.h+=1,this};function Zw(d,E){Ms(d),E=ea(d,E),d.g.has(E)&&(d.i=null,d.h-=d.g.get(E).length,d.g.delete(E))}function Jw(d,E){return Ms(d),E=ea(d,E),d.g.has(E)}t.forEach=function(d,E){Ms(this),this.g.forEach(function(N,V){N.forEach(function(Y){d.call(E,Y,V,this)},this)},this)},t.na=function(){Ms(this);const d=Array.from(this.g.values()),E=Array.from(this.g.keys()),N=[];for(let V=0;V<E.length;V++){const Y=d[V];for(let J=0;J<Y.length;J++)N.push(E[V])}return N},t.V=function(d){Ms(this);let E=[];if(typeof d=="string")Jw(this,d)&&(E=E.concat(this.g.get(ea(this,d))));else{d=Array.from(this.g.values());for(let N=0;N<d.length;N++)E=E.concat(d[N])}return E},t.set=function(d,E){return Ms(this),this.i=null,d=ea(this,d),Jw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[E]),this.h+=1,this},t.get=function(d,E){return d?(d=this.V(d),0<d.length?String(d[0]):E):E};function e_(d,E,N){Zw(d,E),0<N.length&&(d.i=null,d.g.set(ea(d,E),p(N)),d.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],E=Array.from(this.g.keys());for(var N=0;N<E.length;N++){var V=E[N];const J=encodeURIComponent(String(V)),pe=this.V(V);for(V=0;V<pe.length;V++){var Y=J;pe[V]!==""&&(Y+="="+encodeURIComponent(String(pe[V]))),d.push(Y)}}return this.i=d.join("&")};function ea(d,E){return E=String(E),d.j&&(E=E.toLowerCase()),E}function PP(d,E){E&&!d.j&&(Ms(d),d.i=null,d.g.forEach(function(N,V){var Y=V.toLowerCase();V!=Y&&(Zw(this,V),e_(this,Y,N))},d)),d.j=E}function jP(d,E){const N=new Vl;if(a.Image){const V=new Image;V.onload=g(Vs,N,"TestLoadImage: loaded",!0,E,V),V.onerror=g(Vs,N,"TestLoadImage: error",!1,E,V),V.onabort=g(Vs,N,"TestLoadImage: abort",!1,E,V),V.ontimeout=g(Vs,N,"TestLoadImage: timeout",!1,E,V),a.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=d}else E(!1)}function DP(d,E){const N=new Vl,V=new AbortController,Y=setTimeout(()=>{V.abort(),Vs(N,"TestPingServer: timeout",!1,E)},1e4);fetch(d,{signal:V.signal}).then(J=>{clearTimeout(Y),J.ok?Vs(N,"TestPingServer: ok",!0,E):Vs(N,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Vs(N,"TestPingServer: error",!1,E)})}function Vs(d,E,N,V,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),V(N)}catch{}}function OP(){this.g=new Fu}function LP(d,E,N){const V=N||"";try{Gw(d,function(Y,J){let pe=Y;u(Y)&&(pe=Zi(Y)),E.push(V+J+"="+encodeURIComponent(pe))})}catch(Y){throw E.push(V+"type="+encodeURIComponent("_badmap")),Y}}function Qu(d){this.l=d.Ub||null,this.j=d.eb||!1}v(Qu,Ol),Qu.prototype.g=function(){return new Yu(this.l,this.j)},Qu.prototype.i=function(d){return function(){return d}}({});function Yu(d,E){me.call(this),this.D=d,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Yu,me),t=Yu.prototype,t.open=function(d,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=E,this.readyState=1,Wl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(E.body=d),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$l(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Wl(this)),this.g&&(this.readyState=3,Wl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;t_(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function t_(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var E=d.value?d.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!d.done}))&&(this.response=this.responseText+=E)}d.done?$l(this):Wl(this),this.readyState==3&&t_(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,$l(this))},t.Qa=function(d){this.g&&(this.response=d,$l(this))},t.ga=function(){this.g&&$l(this)};function $l(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Wl(d)}t.setRequestHeader=function(d,E){this.u.append(d,E)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],E=this.h.entries();for(var N=E.next();!N.done;)N=N.value,d.push(N[0]+": "+N[1]),N=E.next();return d.join(`\r
`)};function Wl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function n_(d){let E="";return L(d,function(N,V){E+=V,E+=":",E+=N,E+=`\r
`}),E}function jp(d,E,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=n_(N),typeof d=="string"?N!=null&&encodeURIComponent(String(N)):ct(d,E,N))}function _t(d){me.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(_t,me);var MP=/^https?$/i,VP=["POST","PUT"];t=_t.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,E,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);E=E?E.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cp.g(),this.v=this.o?Uu(this.o):Uu(Cp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(d),!0),this.B=!1}catch(J){r_(this,J);return}if(d=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var Y in V)N.set(Y,V[Y]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const J of V.keys())N.set(J,V.get(J));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(J=>J.toLowerCase()=="content-type"),Y=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(VP,E,void 0))||V||Y||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of N)this.g.setRequestHeader(J,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{o_(this),this.u=!0,this.g.send(d),this.u=!1}catch(J){r_(this,J)}};function r_(d,E){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=E,d.m=5,s_(d),Xu(d)}function s_(d){d.A||(d.A=!0,De(d,"complete"),De(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,De(this,"complete"),De(this,"abort"),Xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xu(this,!0)),_t.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?i_(this):this.bb())},t.bb=function(){i_(this)};function i_(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ls(d)!=4||d.Z()!=2)){if(d.u&&ls(d)==4)Ut(d.Ea,0,d);else if(De(d,"readystatechange"),ls(d)==4){d.h=!1;try{const pe=d.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var N;if(!(N=E)){var V;if(V=pe===0){var Y=String(d.D).match(Qw)[1]||null;!Y&&a.self&&a.self.location&&(Y=a.self.location.protocol.slice(0,-1)),V=!MP.test(Y?Y.toLowerCase():"")}N=V}if(N)De(d,"complete"),De(d,"success");else{d.m=6;try{var J=2<ls(d)?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.Z()+"]",s_(d)}}finally{Xu(d)}}}}function Xu(d,E){if(d.g){o_(d);const N=d.g,V=d.v[0]?()=>{}:null;d.g=null,d.v=null,E||De(d,"ready");try{N.onreadystatechange=V}catch{}}}function o_(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ls(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var E=this.g.responseText;return d&&E.indexOf(d)==0&&(E=E.substring(d.length)),pr(E)}};function a_(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function FP(d){const E={};d=(d.g&&2<=ls(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<d.length;V++){if(w(d[V]))continue;var N=M(d[V]);const Y=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const J=E[Y]||[];E[Y]=J,J.push(N)}S(E,function(V){return V.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hl(d,E,N){return N&&N.internalChannelParams&&N.internalChannelParams[d]||E}function l_(d){this.Aa=0,this.i=[],this.j=new Vl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hl("baseRetryDelayMs",5e3,d),this.cb=Hl("retryDelaySeedMs",1e4,d),this.Wa=Hl("forwardChannelMaxRetries",2,d),this.wa=Hl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $w(d&&d.concurrentRequestLimit),this.Da=new OP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=l_.prototype,t.la=8,t.G=1,t.connect=function(d,E,N,V){mn(0),this.W=d,this.H=E||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.I=y_(this,null,this.W),Ju(this)};function Dp(d){if(c_(d),d.G==3){var E=d.U++,N=as(d.I);if(ct(N,"SID",d.K),ct(N,"RID",E),ct(N,"TYPE","terminate"),ql(d,N),E=new Ls(d,d.j,E),E.L=2,E.v=Gu(as(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!N&&a.Image&&(new Image().src=E.v,N=!0),N||(E.g=v_(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Hu(E)}g_(d)}function Zu(d){d.g&&(Lp(d),d.g.cancel(),d.g=null)}function c_(d){Zu(d),d.u&&(a.clearTimeout(d.u),d.u=null),ed(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Ju(d){if(!Ww(d.h)&&!d.s){d.s=!0;var E=d.Ga;X||Z(),U||(X(),U=!0),z.add(E,d),d.B=0}}function UP(d,E){return Hw(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=E.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ml(m(d.Ga,d,E),m_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const Y=new Ls(this,this.j,d);let J=this.o;if(this.S&&(J?(J=T(J),j(J,this.S)):J=this.S),this.m!==null||this.O||(Y.H=J,J=null),this.P)e:{for(var E=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(E+=V,4096<E){E=N;break e}if(E===4096||N===this.i.length-1){E=N+1;break e}}E=1e3}else E=1e3;E=d_(this,Y,E),N=as(this.I),ct(N,"RID",d),ct(N,"CVER",22),this.D&&ct(N,"X-HTTP-Session-Id",this.D),ql(this,N),J&&(this.O?E="headers="+encodeURIComponent(String(n_(J)))+"&"+E:this.m&&jp(N,this.m,J)),Pp(this.h,Y),this.Ua&&ct(N,"TYPE","init"),this.P?(ct(N,"$req",E),ct(N,"SID","null"),Y.T=!0,Np(Y,N,null)):Np(Y,N,E),this.G=2}}else this.G==3&&(d?u_(this,d):this.i.length==0||Ww(this.h)||u_(this))};function u_(d,E){var N;E?N=E.l:N=d.U++;const V=as(d.I);ct(V,"SID",d.K),ct(V,"RID",N),ct(V,"AID",d.T),ql(d,V),d.m&&d.o&&jp(V,d.m,d.o),N=new Ls(d,d.j,N,d.B+1),d.m===null&&(N.H=d.o),E&&(d.i=E.D.concat(d.i)),E=d_(d,N,1e3),N.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Pp(d.h,N),Np(N,V,E)}function ql(d,E){d.H&&L(d.H,function(N,V){ct(E,V,N)}),d.l&&Gw({},function(N,V){ct(E,V,N)})}function d_(d,E,N){N=Math.min(d.i.length,N);var V=d.l?m(d.l.Na,d.l,d):null;e:{var Y=d.i;let J=-1;for(;;){const pe=["count="+N];J==-1?0<N?(J=Y[0].g,pe.push("ofs="+J)):J=0:pe.push("ofs="+J);let ot=!0;for(let Ht=0;Ht<N;Ht++){let et=Y[Ht].g;const tn=Y[Ht].map;if(et-=J,0>et)J=Math.max(0,Y[Ht].g-100),ot=!1;else try{LP(tn,pe,"req"+et+"_")}catch{V&&V(tn)}}if(ot){V=pe.join("&");break e}}}return d=d.i.splice(0,N),E.D=d,V}function h_(d){if(!d.g&&!d.u){d.Y=1;var E=d.Fa;X||Z(),U||(X(),U=!0),z.add(E,d),d.v=0}}function Op(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ml(m(d.Fa,d),m_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,f_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ml(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mn(10),Zu(this),f_(this))};function Lp(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function f_(d){d.g=new Ls(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var E=as(d.qa);ct(E,"RID","rpc"),ct(E,"SID",d.K),ct(E,"AID",d.T),ct(E,"CI",d.F?"0":"1"),!d.F&&d.ja&&ct(E,"TO",d.ja),ct(E,"TYPE","xmlhttp"),ql(d,E),d.m&&d.o&&jp(E,d.m,d.o),d.L&&(d.g.I=d.L);var N=d.g;d=d.ia,N.L=1,N.v=Gu(as(E)),N.m=null,N.P=!0,Uw(N,d)}t.Za=function(){this.C!=null&&(this.C=null,Zu(this),Op(this),mn(19))};function ed(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function p_(d,E){var N=null;if(d.g==E){ed(d),Lp(d),d.g=null;var V=2}else if(Rp(d.h,E))N=E.D,qw(d.h,E),V=1;else return;if(d.G!=0){if(E.o)if(V==1){N=E.m?E.m.length:0,E=Date.now()-E.F;var Y=d.B;V=Bu(),De(V,new Lw(V,N)),Ju(d)}else h_(d);else if(Y=E.s,Y==3||Y==0&&0<E.X||!(V==1&&UP(d,E)||V==2&&Op(d)))switch(N&&0<N.length&&(E=d.h,E.i=E.i.concat(N)),Y){case 1:no(d,5);break;case 4:no(d,10);break;case 3:no(d,6);break;default:no(d,2)}}}function m_(d,E){let N=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(N*=2),N*E}function no(d,E){if(d.j.info("Error code "+E),E==2){var N=m(d.fb,d),V=d.Xa;const Y=!V;V=new to(V||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qu(V,"https"),Gu(V),Y?jP(V.toString(),N):DP(V.toString(),N)}else mn(2);d.G=0,d.l&&d.l.sa(E),g_(d),c_(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),mn(2)):(this.j.info("Failed to ping google.com"),mn(1))};function g_(d){if(d.G=0,d.ka=[],d.l){const E=Kw(d.h);(E.length!=0||d.i.length!=0)&&(_(d.ka,E),_(d.ka,d.i),d.h.i.length=0,p(d.i),d.i.length=0),d.l.ra()}}function y_(d,E,N){var V=N instanceof to?as(N):new to(N);if(V.g!="")E&&(V.g=E+"."+V.g),Ku(V,V.s);else{var Y=a.location;V=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;var J=new to(null);V&&qu(J,V),E&&(J.g=E),Y&&Ku(J,Y),N&&(J.l=N),V=J}return N=d.D,E=d.ya,N&&E&&ct(V,N,E),ct(V,"VER",d.la),ql(d,V),V}function v_(d,E,N){if(E&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=d.Ca&&!d.pa?new _t(new Qu({eb:N})):new _t(d.pa),E.Ha(d.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function w_(){}t=w_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function td(){}td.prototype.g=function(d,E){return new On(d,E)};function On(d,E){me.call(this),this.g=new l_(E),this.l=d,this.h=E&&E.messageUrlParams||null,d=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(d?d["X-WebChannel-Content-Type"]=E.messageContentType:d={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(d?d["X-WebChannel-Client-Profile"]=E.va:d={"X-WebChannel-Client-Profile":E.va}),this.g.S=d,(d=E&&E.Sb)&&!w(d)&&(this.g.m=d),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!w(E)&&(this.g.D=E,d=this.h,d!==null&&E in d&&(d=this.h,E in d&&delete d[E])),this.j=new ta(this)}v(On,me),On.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},On.prototype.close=function(){Dp(this.g)},On.prototype.o=function(d){var E=this.g;if(typeof d=="string"){var N={};N.__data__=d,d=N}else this.u&&(N={},N.__data__=Zi(d),d=N);E.i.push(new bP(E.Ya++,d)),E.G==3&&Ju(E)},On.prototype.N=function(){this.g.l=null,delete this.j,Dp(this.g),delete this.g,On.aa.N.call(this)};function __(d){os.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var E=d.__sm__;if(E){e:{for(const N in E){d=N;break e}d=void 0}(this.i=d)&&(d=this.i,E=E!==null&&d in E?E[d]:void 0),this.data=E}else this.data=d}v(__,os);function x_(){Os.call(this),this.status=1}v(x_,Os);function ta(d){this.g=d}v(ta,w_),ta.prototype.ua=function(){De(this.g,"a")},ta.prototype.ta=function(d){De(this.g,new __(d))},ta.prototype.sa=function(d){De(this.g,new x_)},ta.prototype.ra=function(){De(this.g,"b")},td.prototype.createWebChannel=td.prototype.g,On.prototype.send=On.prototype.o,On.prototype.open=On.prototype.m,On.prototype.close=On.prototype.close,EN=function(){return new td},xN=function(){return Bu()},_N=Ji,gy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$u.NO_ERROR=0,$u.TIMEOUT=8,$u.HTTP_ERROR=6,ih=$u,Mw.COMPLETE="complete",wN=Mw,zu.EventType=Ds,Ds.OPEN="a",Ds.CLOSE="b",Ds.ERROR="c",Ds.MESSAGE="d",me.prototype.listen=me.prototype.K,dc=zu,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,vN=_t}).apply(typeof Id<"u"?Id:typeof self<"u"?self:typeof window<"u"?window:{});const H1="@firebase/firestore",q1="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new f0("@firebase/firestore");function aa(){return Mo.logLevel}function ve(t,...e){if(Mo.logLevel<=$e.DEBUG){const n=e.map(T0);Mo.debug(`Firestore (${Nl}): ${t}`,...n)}}function As(t,...e){if(Mo.logLevel<=$e.ERROR){const n=e.map(T0);Mo.error(`Firestore (${Nl}): ${t}`,...n)}}function fl(t,...e){if(Mo.logLevel<=$e.WARN){const n=e.map(T0);Mo.warn(`Firestore (${Nl}): ${t}`,...n)}}function T0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bN(t,r,n)}function bN(t,e,n){let r=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw As(r),new Error(r)}function st(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||bN(e,s,r)}function Le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ss{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VF{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class FF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class UF{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){st(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _s,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _s)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(st(typeof r.accessToken=="string",31837,{l:r}),new TN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class zF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new zF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $F{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){st(this.o===void 0,3512);const r=i=>{i.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new K1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(st(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new K1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=WF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function We(t,e){return t<e?-1:t>e?1:0}function yy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Cm(s)===Cm(i)?We(s,i):Cm(s)?1:-1}return We(t.length,e.length)}const HF=55296,qF=57343;function Cm(t){const e=t.charCodeAt(0);return e>=HF&&e<=qF}function pl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="__name__";class Lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Re(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Lr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return We(e.length,n.length)}static compareSegments(e,n){const r=Lr.isNumericId(e),s=Lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Lr.extractNumericId(e).compare(Lr.extractNumericId(n)):yy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class at extends Lr{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new at(n)}static emptyPath(){return new at([])}}const KF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Lr{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return KF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G1}static keyField(){return new Qt([G1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(at.fromString(e))}static fromName(e){return new Ce(at.fromString(e).popFirst(5))}static empty(){return new Ce(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e,n){if(!n)throw new ge(re.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GF(t,e,n,r){if(e===!0&&r===!0)throw new ge(re.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Q1(t){if(!Ce.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Y1(t){if(Ce.isDocumentKey(t))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function CN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Qf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qf(t);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ru(t,e){if(!CN(t))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ge(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=-62135596800,Z1=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Z1);return new nt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<X1)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z1}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:jt("string",nt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new nt(0,0))}static max(){return new Oe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function QF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Oe.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new ji(s,Ce.empty(),e)}function YF(t){return new ji(t.readTime,t.key,iu)}class ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ji(Oe.min(),Ce.empty(),iu)}static max(){return new ji(Oe.max(),Ce.empty(),iu)}}function XF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){if(t.code!==re.FAILED_PRECONDITION||t.message!==ZF)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ae.reject(n)}static resolve(e){return new ae((n,r)=>{n(e)})}static reject(e){return new ae((n,r)=>{r(e)})}static waitFor(e){return new ae((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=ae.resolve(!1);for(const r of e)n=n.next(s=>s?ae.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new ae((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new ae((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function eU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=-1;function Xf(t){return t==null}function ef(t){return t===0&&1/t==-1/0}function tU(t){return typeof t=="number"&&Number.isInteger(t)&&!ef(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="";function nU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=J1(e)),e=rU(t.get(n),e);return J1(e)}function rU(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case IN:n+="";break;default:n+=i}}return n}function J1(t){return t+IN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||Kt.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nd(this.root,e,this.comparator,!0)}}class Nd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Kt.RED,this.left=s??Kt.EMPTY,this.right=i??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tE(this.data.getIterator())}getIteratorFrom(e){return new tE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class tE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Ft(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AN("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const sU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Di(t){if(st(!!t,39018),typeof t=="string"){let e=0;const n=sU.exec(t);if(st(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(t.seconds),nanos:Ct(t.nanos)}}function Ct(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="server_timestamp",RN="__type__",PN="__previous_value__",jN="__local_write_time__";function I0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RN])==null?void 0:r.stringValue)===kN}function Zf(t){const e=t.mapValue.fields[PN];return I0(e)?Zf(e):e}function ou(t){const e=Di(t.mapValue.fields[jN].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e,n,r,s,i,o,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const tf="(default)";class au{constructor(e,n){this.projectId=e,this.database=n||tf}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===tf}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="__type__",ON="__max__",Ad={mapValue:{fields:{__type__:{stringValue:ON}}}},LN="__vector__",nf="value";function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?I0(t)?4:aU(t)?9007199254740991:oU(t)?10:11:Re(28295,{value:t})}function ns(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ou(t).isEqual(ou(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Di(s.timestampValue),a=Di(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Oi(s.bytesValue).isEqual(Oi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ct(s.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ct(s.integerValue)===Ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ct(s.doubleValue),a=Ct(i.doubleValue);return o===a?ef(o)===ef(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pl(t.arrayValue.values||[],e.arrayValue.values||[],ns);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(eE(o)!==eE(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ns(o[c],a[c])))return!1;return!0}(t,e);default:return Re(52216,{left:t})}}function lu(t,e){return(t.values||[]).find(n=>ns(n,e))!==void 0}function ml(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return We(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ct(i.integerValue||i.doubleValue),c=Ct(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return nE(t.timestampValue,e.timestampValue);case 4:return nE(ou(t),ou(e));case 5:return yy(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Oi(i),c=Oi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=We(a[u],c[u]);if(h!==0)return h}return We(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=We(Ct(i.latitude),Ct(o.latitude));return a!==0?a:We(Ct(i.longitude),Ct(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return rE(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,g,v,p;const a=i.fields||{},c=o.fields||{},u=(m=a[nf])==null?void 0:m.arrayValue,h=(g=c[nf])==null?void 0:g.arrayValue,f=We(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((p=h==null?void 0:h.values)==null?void 0:p.length)||0);return f!==0?f:rE(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ad.mapValue&&o===Ad.mapValue)return 0;if(i===Ad.mapValue)return 1;if(o===Ad.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=yy(c[f],h[f]);if(m!==0)return m;const g=ml(a[c[f]],u[h[f]]);if(g!==0)return g}return We(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function nE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Di(t),r=Di(e),s=We(n.seconds,r.seconds);return s!==0?s:We(n.nanos,r.nanos)}function rE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ml(n[s],r[s]);if(i)return i}return We(n.length,r.length)}function gl(t){return vy(t)}function vy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Di(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${vy(n.fields[o])}`;return s+"}"}(t.mapValue):Re(61005,{value:t})}function oh(t){switch(Li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zf(t);return e?16+oh(e):16;case 5:return 2*t.stringValue.length;case 6:return Oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+oh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return qi(r.fields,(i,o)=>{s+=i.length+oh(o)}),s}(t.mapValue);default:throw Re(13486,{value:t})}}function sE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wy(t){return!!t&&"integerValue"in t}function N0(t){return!!t&&"arrayValue"in t}function iE(t){return!!t&&"nullValue"in t}function oE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function oU(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[DN])==null?void 0:r.stringValue)===LN}function Nc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nc(t.arrayValue.values[n]);return e}return{...t}}function aU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ON}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(n)}setAll(e){let n=Qt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Nc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ah(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){qi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Nn(Nc(this.value))}}function MN(t){const e=[];return qi(t.fields,(n,r)=>{const s=new Qt([n]);if(ah(r)){const i=MN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Oe.min(),Oe.min(),Oe.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,s){return new un(e,1,n,Oe.min(),r,s,0)}static newNoDocument(e,n){return new un(e,2,n,Oe.min(),Oe.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Oe.min(),Oe.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n){this.position=e,this.inclusive=n}}function aE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),n.key):r=ml(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function lE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function lU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{}class Pt extends VN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uU(e,n,r):n==="array-contains"?new fU(e,r):n==="in"?new pU(e,r):n==="not-in"?new mU(e,r):n==="array-contains-any"?new gU(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dU(e,r):new hU(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ml(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(ml(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends VN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pr(e,n)}matches(e){return FN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function FN(t){return t.op==="and"}function UN(t){return cU(t)&&FN(t)}function cU(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function _y(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(UN(t))return t.filters.map(e=>_y(e)).join(",");{const e=t.filters.map(n=>_y(n)).join(",");return`${t.op}(${e})`}}function zN(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&ns(r.value,s.value)}(t,e):t instanceof Pr?function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zN(o,s.filters[a]),!0):!1}(t,e):void Re(19439)}function BN(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(BN).join(" ,")+"}"}(t):"Filter"}class uU extends Pt{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class dU extends Pt{constructor(e,n){super(e,"in",n),this.keys=$N("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hU extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=$N("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $N(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class fU extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return N0(n)&&lu(n.arrayValue,this.value)}}class pU extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&lu(this.value.arrayValue,n)}}class mU extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!lu(this.value.arrayValue,n)}}class gU extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!N0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>lu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function cE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yU(t,e,n,r,s,i,o)}function A0(t){const e=Le(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_y(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>gl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>gl(r)).join(",")),e.Te=n}return e.Te}function k0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lE(t.startAt,e.startAt)&&lE(t.endAt,e.endAt)}function xy(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vU(t,e,n,r,s,i,o,a){return new Rl(t,e,n,r,s,i,o,a)}function R0(t){return new Rl(t)}function uE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WN(t){return t.collectionGroup!==null}function Ac(t){const e=Le(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ft(Qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new cu(i,r))}),n.has(Qt.keyField().canonicalString())||e.Ie.push(new cu(Qt.keyField(),r))}return e.Ie}function Xr(t){const e=Le(t);return e.Ee||(e.Ee=wU(e,Ac(t))),e.Ee}function wU(t,e){if(t.limitType==="F")return cE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new cu(s.field,i)});const n=t.endAt?new rf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rf(t.startAt.position,t.startAt.inclusive):null;return cE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){const n=t.filters.concat([e]);return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function by(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jf(t,e){return k0(Xr(t),Xr(e))&&t.limitType===e.limitType}function HN(t){return`${A0(Xr(t))}|lt:${t.limitType}`}function la(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>BN(s)).join(", ")}]`),Xf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>gl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>gl(s)).join(",")),`Target(${r})`}(Xr(t))}; limitType=${t.limitType})`}function ep(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ce.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ac(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=aE(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Ac(r),s)||r.endAt&&!function(o,a,c){const u=aE(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Ac(r),s))}(t,e)}function _U(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qN(t){return(e,n)=>{let r=!1;for(const s of Ac(t)){const i=xU(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xU(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?ml(c,u):Re(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return NN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU=new wt(Ce.comparator);function ks(){return EU}const KN=new wt(Ce.comparator);function hc(...t){let e=KN;for(const n of t)e=e.insert(n.key,n);return e}function GN(t){let e=KN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function uo(){return kc()}function QN(){return kc()}function kc(){return new Qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const bU=new wt(Ce.comparator),TU=new Ft(Ce.comparator);function He(...t){let e=TU;for(const n of t)e=e.add(n);return e}const SU=new Ft(We);function CU(){return SU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ef(e)?"-0":e}}function YN(t){return{integerValue:""+t}}function IU(t,e){return tU(e)?YN(e):P0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(){this._=void 0}}function NU(t,e,n){return t instanceof sf?function(s,i){const o={fields:{[RN]:{stringValue:kN},[jN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&I0(i)&&(i=Zf(i)),i&&(o.fields[PN]=i),{mapValue:o}}(n,e):t instanceof uu?ZN(t,e):t instanceof du?JN(t,e):function(s,i){const o=XN(s,i),a=dE(o)+dE(s.Ae);return wy(o)&&wy(s.Ae)?YN(a):P0(s.serializer,a)}(t,e)}function AU(t,e,n){return t instanceof uu?ZN(t,e):t instanceof du?JN(t,e):n}function XN(t,e){return t instanceof of?function(r){return wy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sf extends tp{}class uu extends tp{constructor(e){super(),this.elements=e}}function ZN(t,e){const n=eA(e);for(const r of t.elements)n.some(s=>ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class du extends tp{constructor(e){super(),this.elements=e}}function JN(t,e){let n=eA(e);for(const r of t.elements)n=n.filter(s=>!ns(s,r));return{arrayValue:{values:n}}}class of extends tp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function dE(t){return Ct(t.integerValue||t.doubleValue)}function eA(t){return N0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kU(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uu&&s instanceof uu||r instanceof du&&s instanceof du?pl(r.elements,s.elements,ns):r instanceof of&&s instanceof of?ns(r.Ae,s.Ae):r instanceof sf&&s instanceof sf}(t.transform,e.transform)}class RU{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class np{}function tA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rp(t.key,Dn.none()):new Pu(t.key,t.data,Dn.none());{const n=t.data,r=Nn.empty();let s=new Ft(Qt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ki(t.key,r,new zn(s.toArray()),Dn.none())}}function PU(t,e,n){t instanceof Pu?function(s,i,o){const a=s.value.clone(),c=fE(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ki?function(s,i,o){if(!lh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=fE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(nA(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Rc(t,e,n,r){return t instanceof Pu?function(i,o,a,c){if(!lh(i.precondition,o))return a;const u=i.value.clone(),h=pE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ki?function(i,o,a,c){if(!lh(i.precondition,o))return a;const u=pE(i.fieldTransforms,c,o),h=o.data;return h.setAll(nA(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return lh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jU(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=XN(r.transform,s||null);i!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,i))}return n||null}function hE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&pl(r,s,(i,o)=>kU(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends np{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ki extends np{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function fE(t,e,n){const r=new Map;st(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,AU(o,a,n[s]))}return r}function pE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,NU(i,o,e))}return r}class rp extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DU extends np{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PU(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=tA(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),He())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(n,r)=>hE(n,r))&&pl(this.baseMutations,e.baseMutations,(n,r)=>hE(n,r))}}class j0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){st(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return bU}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new j0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LU=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ze;function VU(t){switch(t){case re.OK:return Re(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function rA(t){if(t===void 0)return As("GRPC error has no .code"),re.UNKNOWN;switch(t){case kt.OK:return re.OK;case kt.CANCELLED:return re.CANCELLED;case kt.UNKNOWN:return re.UNKNOWN;case kt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case kt.INTERNAL:return re.INTERNAL;case kt.UNAVAILABLE:return re.UNAVAILABLE;case kt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case kt.NOT_FOUND:return re.NOT_FOUND;case kt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case kt.ABORTED:return re.ABORTED;case kt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case kt.DATA_LOSS:return re.DATA_LOSS;default:return Re(39323,{code:t})}}(Ze=kt||(kt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=new xi([4294967295,4294967295],0);function mE(t){const e=FU().encode(t),n=new yN;return n.update(e),new Uint8Array(n.digest())}function gE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xi([n,r],0),new xi([s,i],0)]}class D0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(r<0)throw new fc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(xi.fromNumber(r)));return s.compare(UU)===1&&(s=new xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=mE(e),[r,s]=gE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new D0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=mE(e),[r,s]=gE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ju.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sp(Oe.min(),s,new wt(We),ks(),He())}}class ju{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ju(r,n,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class sA{constructor(e,n){this.targetId=e,this.Ce=n}}class iA{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class yE{constructor(){this.ve=0,this.Fe=vE(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),n=He(),r=He();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Re(38017,{changeType:i})}}),new ju(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=vE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zU{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=kd(),this.He=kd(),this.Ye=new wt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(xy(i))if(r===0){const o=new Ce(i.path);this.et(n,o,un.newNoDocument(o,Oe.min()))}else st(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Oi(r).toUint8Array()}catch(c){if(c instanceof AN)return fl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new D0(o,s,i)}catch(c){return fl(c instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&xy(a.target)){const c=new Ce(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,un.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=He();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new sp(e,n,this.Ye,this.je,r);return this.je=ks(),this.Je=kd(),this.He=kd(),this.Ye=new wt(We),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new yE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function kd(){return new wt(Ce.comparator)}function vE(){return new wt(Ce.comparator)}const BU={asc:"ASCENDING",desc:"DESCENDING"},$U={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WU={and:"AND",or:"OR"};class HU{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ty(t,e){return t.useProto3Json||Xf(e)?e:{value:e}}function af(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qU(t,e){return af(t,e.toTimestamp())}function Zr(t){return st(!!t,49232),Oe.fromTimestamp(function(n){const r=Di(n);return new nt(r.seconds,r.nanos)}(t))}function O0(t,e){return Sy(t,e).canonicalString()}function Sy(t,e){const n=function(s){return new at(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aA(t){const e=at.fromString(t);return st(hA(e),10190,{key:e.toString()}),e}function Cy(t,e){return O0(t.databaseId,e.path)}function Im(t,e){const n=aA(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(cA(n))}function lA(t,e){return O0(t.databaseId,e)}function KU(t){const e=aA(t);return e.length===4?at.emptyPath():cA(e)}function Iy(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cA(t){return st(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wE(t,e,n){return{name:Cy(t,e),fields:n.value.mapValue.fields}}function GU(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Re(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(st(h===void 0||typeof h=="string",58123),en.fromBase64String(h||"")):(st(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),en.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?re.UNKNOWN:rA(u.code);return new ge(h,u.message||"")}(o);n=new iA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Im(t,r.document.name),i=Zr(r.document.updateTime),o=r.document.createTime?Zr(r.document.createTime):Oe.min(),a=new Nn({mapValue:{fields:r.document.fields}}),c=un.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new ch(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Im(t,r.document),i=r.readTime?Zr(r.readTime):Oe.min(),o=un.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ch([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Im(t,r.document),i=r.removedTargetIds||[];n=new ch([],i,s,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MU(s,i),a=r.targetId;n=new sA(a,o)}}return n}function QU(t,e){let n;if(e instanceof Pu)n={update:wE(t,e.key,e.value)};else if(e instanceof rp)n={delete:Cy(t,e.key)};else if(e instanceof Ki)n={update:wE(t,e.key,e.data),updateMask:s8(e.fieldMask)};else{if(!(e instanceof DU))return Re(16599,{Vt:e.type});n={verify:Cy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof sf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof du)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof of)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:qU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re(27497)}(t,e.precondition)),n}function YU(t,e){return t&&t.length>0?(st(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Zr(s.updateTime):Zr(i);return o.isEqual(Oe.min())&&(o=Zr(i)),new RU(o,s.transformResults||[])}(n,e))):[]}function XU(t,e){return{documents:[lA(t,e.path)]}}function ZU(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lA(t,s);const i=function(u){if(u.length!==0)return dA(Pr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:ca(m.field),direction:t8(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ty(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function JU(t){let e=KU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){st(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=uA(f);return m instanceof Pr&&UN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(v){return new cu(ua(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Xf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new rf(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new rf(g,m)}(n.endAt)),vU(e,s,o,i,a,"F",c,u)}function e8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ua(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ua(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ua(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ua(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(ua(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>uA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(t):Re(30097,{filter:t})}function t8(t){return BU[t]}function n8(t){return $U[t]}function r8(t){return WU[t]}function ca(t){return{fieldPath:t.canonicalString()}}function ua(t){return Qt.fromServerFormat(t.fieldPath)}function dA(t){return t instanceof Pt?function(n){if(n.op==="=="){if(oE(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NAN"}};if(iE(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(oE(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NAN"}};if(iE(n.value))return{unaryFilter:{field:ca(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ca(n.field),op:n8(n.op),value:n.value}}}(t):t instanceof Pr?function(n){const r=n.getFilters().map(s=>dA(s));return r.length===1?r[0]:{compositeFilter:{op:r8(n.op),filters:r}}}(t):Re(54877,{filter:t})}function s8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n,r,s,i=Oe.min(),o=Oe.min(),a=en.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.yt=e}}function o8(t){const e=JU({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?by(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(){this.Cn=new l8}addToCollectionParentIndex(e,n){return this.Cn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(ji.min())}updateCollectionGroup(e,n,r){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class l8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(at.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fA=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(fA,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new yl(0)}static cr(){return new yl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="LruGarbageCollector",c8=1048576;function EE([t,e],[n,r]){const s=We(t,n);return s===0?We(e,r):s}class u8{constructor(e){this.Ir=e,this.buffer=new Ft(EE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();EE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(xE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kl(n)?ve(xE,"Ignoring IndexedDB error during garbage collection: ",n):await Al(n)}await this.Vr(3e5)})}}class h8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(Yf.ce);const r=new u8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(_E)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_E):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),aa()<=$e.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function f8(t,e){return new h8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(){this.changes=new Qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ae.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Rc(r.mutation,s,zn.empty(),nt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,He()).next(()=>r))}getLocalViewOfDocuments(e,n,r=He()){const s=uo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=hc();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,He()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ks();const o=kc(),a=function(){return kc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Ki)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Rc(h.mutation,u,h.mutation.getFieldMask(),nt.now())):o.set(u.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new m8(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=kc();let s=new wt((o,a)=>o-a),i=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||zn.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||He()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=QN();h.forEach(m=>{if(!i.has(m)){const g=tA(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ae.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):ae.resolve(uo());let a=iu,c=i;return o.next(u=>ae.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?ae.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,He())).next(h=>({batchId:a,changes:GN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(r=>{let s=hc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=hc();return this.indexManager.getCollectionParents(e,i).next(a=>ae.forEach(a,c=>{const u=function(f,m){return new Rl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,un.newInvalidDocument(h)))});let a=hc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Rc(h.mutation,u,zn.empty(),nt.now()),ep(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ae.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zr(s.createTime)}}(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:o8(s.bundledQuery),readTime:Zr(s.readTime)}}(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.overlays=new wt(Ce.comparator),this.qr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uo();return ae.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),ae.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),ae.resolve()}getOverlaysForCollection(e,n,r){const s=uo(),i=n.length+1,o=new Ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ae.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new wt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=uo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=uo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return ae.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LU(n,r));let i=this.qr.get(n);i===void 0&&(i=He(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.Qr=new Ft(zt.$r),this.Ur=new Ft(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new zt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ce(new at([])),r=new zt(n,e),s=new zt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ce(new at([])),r=new zt(n,e),s=new zt(n,e+1);let i=He();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new zt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ce.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(zt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OU(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new zt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ae.resolve(o)}lookupMutationBatch(e,n){return ae.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return ae.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?C0:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),ae.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(We);return n.forEach(s=>{const i=new zt(s,0),o=new zt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),ae.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Ce.isDocumentKey(i)||(i=i.child(""));const o=new zt(new Ce(i),0);let a=new Ft(We);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Yr)),!0)},o),ae.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){st(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ae.forEach(n.mutations,s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new zt(n,0),s=this.Zr.firstAfterOrEqual(r);return ae.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.ri=e,this.docs=function(){return new wt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ae.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ks();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():un.newInvalidDocument(s))}),ae.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ks();const o=n.path,a=new Ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||XF(YF(h),r)<=0||(s.has(h.key)||ep(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return ae.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Re(9500)}ii(e,n){return ae.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new E8(this)}getSize(e){return ae.resolve(this.size)}}class E8 extends p8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),ae.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.persistence=e,this.si=new Qo(n=>A0(n),k0),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new L0,this.targetCount=0,this.ai=yl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ae.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.Pr(n),ae.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),ae.waitFor(i).next(()=>s)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ae.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ae.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),ae.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ae.resolve(r)}containsKey(e,n){return ae.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yf(0),this.li=!1,this.li=!0,this.hi=new w8,this.referenceDelegate=e(this),this.Pi=new b8(this),this.indexManager=new a8,this.remoteDocumentCache=function(s){return new x8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new i8(n),this.Ii=new y8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new v8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ve("MemoryPersistence","Starting transaction:",e);const s=new T8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return ae.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class T8 extends JF{constructor(e){super(),this.currentSequenceNumber=e}}class M0{constructor(e){this.persistence=e,this.Ri=new L0,this.Vi=null}static mi(e){return new M0(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ae.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,r=>{const s=Ce.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class lf{constructor(e,n){this.persistence=e,this.pi=new Qo(r=>nU(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=f8(this,n)}static mi(e,n){return new lf(e,n)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ae.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?ae.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ae.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}br(e,n,r){return ae.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ae.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=He(),s=He();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new V0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return o6()?8:eU(pn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new S8;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(aa()<=$e.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",la(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(aa()<=$e.DEBUG&&ve("QueryEngine","Query:",la(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(aa()<=$e.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",la(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(n))):ae.resolve())}ys(e,n){if(uE(n))return ae.resolve(null);let r=Xr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=by(n,null,"F"),r=Xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=He(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,a);return this.Cs(n,u,o,c.readTime)?this.ys(e,by(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return uE(n)||s.isEqual(Oe.min())?ae.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?ae.resolve(null):(aa()<=$e.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),la(n)),this.vs(e,o,n,QF(s,iu)).next(a=>a))})}Ds(e,n){let r=new Ft(qN(e));return n.forEach((s,i)=>{ep(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return aa()<=$e.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",la(n)),this.ps.getDocumentsMatchingQuery(e,n,ji.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="LocalStore",I8=3e8;class N8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new wt(We),this.xs=new Qo(i=>A0(i),k0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function A8(t,e,n,r){return new N8(t,e,n,r)}async function mA(t,e){const n=Le(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=He();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function k8(t,e){const n=Le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,m=f.keys();let g=ae.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(c,v)).next(p=>{const _=u.docVersions.get(v);st(_!==null,48541),p.version.compareTo(_)<0&&(f.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),h.addEntry(p)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=He();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function gA(t){const e=Le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function R8(t,e){const n=Le(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(en.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(p,_,y){return p.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=I8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,h)&&a.push(n.Pi.updateTargetData(i,g))});let c=ks(),u=He();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(P8(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Oe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return ae.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function P8(t,e,n){let r=He(),s=He();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ks();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(Oe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ve(F0,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function j8(t,e){const n=Le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=C0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D8(t,e){const n=Le(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,ae.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ci(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ny(t,e,n){const r=Le(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!kl(o))throw o;ve(F0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function bE(t,e,n){const r=Le(t);let s=Oe.min(),i=He();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Le(c),m=f.xs.get(h);return m!==void 0?ae.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(r,o,Xr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Oe.min(),n?i:He())).next(a=>(O8(r,_U(e),a),{documents:a,Qs:i})))}function O8(t,e,n){let r=t.Os.get(e)||Oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class TE{constructor(){this.activeTargetIds=CU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class L8{constructor(){this.Mo=new TE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new TE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="ConnectivityMonitor";class CE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(SE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(SE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd=null;function Ay(){return Rd===null?Rd=function(){return 268435456+Math.round(2147483648*Math.random())}():Rd++,"0x"+Rd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",V8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===tf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ay(),a=this.zo(e,n.toUriEncodedString());ve(Nm,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(a),h=$i(u);return this.Jo(e,a,c,r,h).then(f=>(ve(Nm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw fl(Nm,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=V8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class z8 extends F8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ay();return new Promise((a,c)=>{const u=new vN;u.setWithCredentials(!0),u.listenOnce(wN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ih.NO_ERROR:const f=u.getResponseJson();ve(on,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case ih.TIMEOUT:ve(on,`RPC '${e}' ${o} timed out`),c(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const m=u.getStatus();if(ve(on,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const p=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(w)>=0?w:re.UNKNOWN}(v.status);c(new ge(p,v.message))}else c(new ge(re.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ve(on,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ve(on,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Ay(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=EN(),a=xN(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ve(on,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,g=!1;const v=new U8({Yo:_=>{g?ve(on,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(ve(on,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),ve(on,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Zo:()=>f.close()}),p=(_,y,w)=>{_.listen(y,x=>{try{w(x)}catch(I){setTimeout(()=>{throw I},0)}})};return p(f,dc.EventType.OPEN,()=>{g||(ve(on,`RPC '${e}' stream ${s} transport opened.`),v.o_())}),p(f,dc.EventType.CLOSE,()=>{g||(g=!0,ve(on,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(f))}),p(f,dc.EventType.ERROR,_=>{g||(g=!0,fl(on,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),v.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))}),p(f,dc.EventType.MESSAGE,_=>{var y;if(!g){const w=_.data[0];st(!!w,16349);const x=w,I=(x==null?void 0:x.error)||((y=x[0])==null?void 0:y.error);if(I){ve(on,`RPC '${e}' stream ${s} received error:`,I);const R=I.status;let L=function(C){const j=kt[C];if(j!==void 0)return rA(j)}(R),S=I.message;L===void 0&&(L=re.INTERNAL,S="Unknown error status: "+R+" with message "+I.message),g=!0,v.a_(new ge(L,S)),f.close()}else ve(on,`RPC '${e}' stream ${s} received:`,w),v.u_(w)}}),p(a,_N.STAT_EVENT,_=>{_.stat===gy.PROXY?ve(on,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===gy.NOPROXY&&ve(on,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Am(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){return new HU(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="PersistentStream";class vA{constructor(e,n,r,s,i,o,a,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(As(n.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ge(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ve(IE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ve(IE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class B8 extends vA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GU(this.serializer,e),r=function(i){if(!("targetChange"in i))return Oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?Zr(o.readTime):Oe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Iy(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=xy(c)?{documents:XU(i,c)}:{query:ZU(i,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oA(i,o.resumeToken);const u=Ty(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Oe.min())>0){a.readTime=af(i,o.snapshotVersion.toTimestamp());const u=Ty(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=e8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Iy(this.serializer),n.removeTarget=e,this.q_(n)}}class $8 extends vA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=YU(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Iy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>QU(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{}class H8 extends W8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Sy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(re.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Sy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(re.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class q8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo="RemoteStore";class K8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Yo(this)&&(ve(Vo,"Restarting streams for network reachability change."),await async function(c){const u=Le(c);u.Ea.add(4),await Du(u),u.Ra.set("Unknown"),u.Ea.delete(4),await op(u)}(this))})}),this.Ra=new q8(r,s)}}async function op(t){if(Yo(t))for(const e of t.da)await e(!0)}async function Du(t){for(const e of t.da)await e(!1)}function wA(t,e){const n=Le(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$0(n)?B0(n):Pl(n).O_()&&z0(n,e))}function U0(t,e){const n=Le(t),r=Pl(n);n.Ia.delete(e),r.O_()&&_A(n,e),n.Ia.size===0&&(r.O_()?r.L_():Yo(n)&&n.Ra.set("Unknown"))}function z0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).Y_(e)}function _A(t,e){t.Va.Ue(e),Pl(t).Z_(e)}function B0(t){t.Va=new zU({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.Ra.ua()}function $0(t){return Yo(t)&&!Pl(t).x_()&&t.Ia.size>0}function Yo(t){return Le(t).Ea.size===0}function xA(t){t.Va=void 0}async function G8(t){t.Ra.set("Online")}async function Q8(t){t.Ia.forEach((e,n)=>{z0(t,e)})}async function Y8(t,e){xA(t),$0(t)?(t.Ra.ha(e),B0(t)):t.Ra.set("Unknown")}async function X8(t,e,n){if(t.Ra.set("Online"),e instanceof iA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){ve(Vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cf(t,r)}else if(e instanceof ch?t.Va.Ze(e):e instanceof sA?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const r=await gA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(en.EMPTY_BYTE_STRING,h.snapshotVersion)),_A(i,c);const f=new ci(h.target,c,u,h.sequenceNumber);z0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ve(Vo,"Failed to raise snapshot:",r),await cf(t,r)}}async function cf(t,e,n){if(!kl(e))throw e;t.Ea.add(1),await Du(t),t.Ra.set("Offline"),n||(n=()=>gA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve(Vo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await op(t)})}function EA(t,e){return e().catch(n=>cf(t,n,e))}async function ap(t){const e=Le(t),n=Mi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:C0;for(;Z8(e);)try{const s=await j8(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,J8(e,s)}catch(s){await cf(e,s)}bA(e)&&TA(e)}function Z8(t){return Yo(t)&&t.Ta.length<10}function J8(t,e){t.Ta.push(e);const n=Mi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function bA(t){return Yo(t)&&!Mi(t).x_()&&t.Ta.length>0}function TA(t){Mi(t).start()}async function e9(t){Mi(t).ra()}async function t9(t){const e=Mi(t);for(const n of t.Ta)e.ea(n.mutations)}async function n9(t,e,n){const r=t.Ta.shift(),s=j0.from(r,e,n);await EA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ap(t)}async function r9(t,e){e&&Mi(t).X_&&await async function(r,s){if(function(o){return VU(o)&&o!==re.ABORTED}(s.code)){const i=r.Ta.shift();Mi(r).B_(),await EA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ap(r)}}(t,e),bA(t)&&TA(t)}async function NE(t,e){const n=Le(t);n.asyncQueue.verifyOperationInProgress(),ve(Vo,"RemoteStore received new credentials");const r=Yo(n);n.Ea.add(3),await Du(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await op(n)}async function s9(t,e){const n=Le(t);e?(n.Ea.delete(2),await op(n)):e||(n.Ea.add(2),await Du(n),n.Ra.set("Unknown"))}function Pl(t){return t.ma||(t.ma=function(n,r,s){const i=Le(n);return i.sa(),new B8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:G8.bind(null,t),t_:Q8.bind(null,t),r_:Y8.bind(null,t),H_:X8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$0(t)?B0(t):t.Ra.set("Unknown")):(await t.ma.stop(),xA(t))})),t.ma}function Mi(t){return t.fa||(t.fa=function(n,r,s){const i=Le(n);return i.sa(),new $8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:e9.bind(null,t),r_:r9.bind(null,t),ta:t9.bind(null,t),na:n9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ap(t)):(await t.fa.stop(),t.Ta.length>0&&(ve(Vo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new W0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function H0(t,e){if(As("AsyncQueue",`${e}: ${t}`),kl(t))return new ge(re.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ce.comparator(n.key,r.key):(n,r)=>Ce.comparator(n.key,r.key),this.keyedMap=hc(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.ga=new wt(Ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class vl{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vl(e,n,Ma.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class o9{constructor(){this.queries=kE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Le(n),i=s.queries;s.queries=kE(),i.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function kE(){return new Qo(t=>HN(t),Jf)}async function SA(t,e){const n=Le(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new i9,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=H0(o,`Initialization of query '${la(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&q0(n)}async function CA(t,e){const n=Le(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function a9(t,e){const n=Le(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&q0(n)}function l9(t,e,n){const r=Le(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function q0(t){t.Ca.forEach(e=>{e.next()})}var ky,RE;(RE=ky||(ky={})).Ma="default",RE.Cache="cache";class IA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.key=e}}class AA{constructor(e){this.key=e}}class c9{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=qN(e),this.tu=new Ma(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new AE,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=ep(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?v!==p&&(r.track({type:3,doc:g}),_=!0):this.su(m,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),_=!0):m&&!g&&(r.track({type:1,doc:m}),_=!0,(c||u)&&(a=!0)),_&&(g?(o=o.add(g),i=p?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,v){const p=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:_})}};return p(g)-p(v)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new vl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new AA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new NA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=He();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const K0="SyncEngine";class u9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class d9{constructor(e){this.key=e,this.hu=!1}}class h9{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Qo(a=>HN(a),Jf),this.Iu=new Map,this.Eu=new Set,this.du=new wt(Ce.comparator),this.Au=new Map,this.Ru=new L0,this.Vu={},this.mu=new Map,this.fu=yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function f9(t,e,n=!0){const r=OA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await kA(r,e,n,!0),s}async function p9(t,e){const n=OA(t);await kA(n,e,!0,!1)}async function kA(t,e,n,r){const s=await D8(t.localStore,Xr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await m9(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&wA(t.remoteStore,s),a}async function m9(t,e,n,r,s){t.pu=(f,m,g)=>async function(p,_,y,w){let x=_.view.ru(y);x.Cs&&(x=await bE(p.localStore,_.query,!1).then(({documents:S})=>_.view.ru(S,x)));const I=w&&w.targetChanges.get(_.targetId),R=w&&w.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(x,p.isPrimaryClient,I,R);return jE(p,_.targetId,L.au),L.snapshot}(t,f,m,g);const i=await bE(t.localStore,e,!0),o=new c9(e,i.Qs),a=o.ru(i.documents),c=ju.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);jE(t,n,u.au);const h=new u9(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function g9(t,e,n){const r=Le(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Jf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ny(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&U0(r.remoteStore,s.targetId),Ry(r,s.targetId)}).catch(Al)):(Ry(r,s.targetId),await Ny(r.localStore,s.targetId,!0))}async function y9(t,e){const n=Le(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),U0(n.remoteStore,r.targetId))}async function v9(t,e,n){const r=S9(t);try{const s=await function(o,a){const c=Le(o),u=nt.now(),h=a.reduce((g,v)=>g.add(v.key),He());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=ks(),p=He();return c.Ns.getEntries(g,h).next(_=>{v=_,v.forEach((y,w)=>{w.isValidDocument()||(p=p.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(_=>{f=_;const y=[];for(const w of a){const x=jU(w,f.get(w.key).overlayedDocument);x!=null&&y.push(new Ki(w.key,x,MN(x.value.mapValue),Dn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,y,a)}).next(_=>{m=_;const y=_.applyToLocalDocumentSet(f,p);return c.documentOverlayCache.saveOverlays(g,_.batchId,y)})}).then(()=>({batchId:m.batchId,changes:GN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new wt(We)),u=u.insert(a,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Ou(r,s.changes),await ap(r.remoteStore)}catch(s){const i=H0(s,"Failed to persist write");n.reject(i)}}async function RA(t,e){const n=Le(t);try{const r=await R8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(st(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?st(o.hu,14607):s.removedDocuments.size>0&&(st(o.hu,42227),o.hu=!1))}),await Ou(n,r,e)}catch(r){await Al(r)}}function PE(t,e,n){const r=Le(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Le(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(a)&&(u=!0)}),u&&q0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w9(t,e,n){const r=Le(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new wt(Ce.comparator);o=o.insert(i,un.newNoDocument(i,Oe.min()));const a=He().add(i),c=new sp(Oe.min(),new Map,new wt(We),o,a);await RA(r,c),r.du=r.du.remove(i),r.Au.delete(e),G0(r)}else await Ny(r.localStore,e,!1).then(()=>Ry(r,e,n)).catch(Al)}async function _9(t,e){const n=Le(t),r=e.batch.batchId;try{const s=await k8(n.localStore,e);jA(n,r,null),PA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ou(n,s)}catch(s){await Al(s)}}async function x9(t,e,n){const r=Le(t);try{const s=await function(o,a){const c=Le(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(st(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);jA(r,e,n),PA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ou(r,s)}catch(s){await Al(s)}}function PA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jA(t,e,n){const r=Le(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||DA(t,r)})}function DA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(U0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),G0(t))}function jE(t,e,n){for(const r of n)r instanceof NA?(t.Ru.addReference(r.key,e),E9(t,r)):r instanceof AA?(ve(K0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||DA(t,r.key)):Re(19791,{wu:r})}function E9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ve(K0,"New document in limbo: "+n),t.Eu.add(r),G0(t))}function G0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ce(at.fromString(e)),r=t.fu.next();t.Au.set(r,new d9(n)),t.du=t.du.insert(n,r),wA(t.remoteStore,new ci(Xr(R0(n.path)),r,"TargetPurposeLimboResolution",Yf.ce))}}async function Ou(t,e,n){const r=Le(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=V0.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=Le(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ae.forEach(u,m=>ae.forEach(m.Es,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>ae.forEach(m.ds,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!kl(f))throw f;ve(F0,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ms.get(m),v=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(m,p)}}}(r.localStore,i))}async function b9(t,e){const n=Le(t);if(!n.currentUser.isEqual(e)){ve(K0,"User change. New user:",e.toKey());const r=await mA(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(c=>{c.reject(new ge(re.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ou(n,r.Ls)}}function T9(t,e){const n=Le(t),r=n.Au.get(e);if(r&&r.hu)return He().add(r.key);{let s=He();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function OA(t){const e=Le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w9.bind(null,e),e.Pu.H_=a9.bind(null,e.eventManager),e.Pu.yu=l9.bind(null,e.eventManager),e}function S9(t){const e=Le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x9.bind(null,e),e}class uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ip(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return A8(this.persistence,new C8,e.initialUser,this.serializer)}Cu(e){return new pA(M0.mi,this.serializer)}Du(e){return new L8}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uf.provider={build:()=>new uf};class C9 extends uf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){st(this.persistence.referenceDelegate instanceof lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new d8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new pA(r=>lf.mi(r,n),this.serializer)}}class Py{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=b9.bind(null,this.syncEngine),await s9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o9}()}createDatastore(e){const n=ip(e.databaseInfo.databaseId),r=function(i){return new z8(i)}(e.databaseInfo);return function(i,o,a,c){return new H8(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new K8(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>PE(this.syncEngine,n,0),function(){return CE.v()?new CE:new M8}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new h9(s,i,o,a,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Le(s);ve(Vo,"RemoteStore shutting down."),i.Ea.add(5),await Du(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Py.provider={build:()=>new Py};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="FirestoreClient";class I9{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=S0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ve(Vi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ve(Vi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=H0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function km(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Vi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function DE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N9(t);ve(Vi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>NE(e.remoteStore,s)),t._onlineComponents=e}async function N9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Vi,"Using user provided OfflineComponentProvider");try{await km(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await km(t,new uf)}}else ve(Vi,"Using default OfflineComponentProvider"),await km(t,new C9(void 0));return t._offlineComponents}async function MA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Vi,"Using user provided OnlineComponentProvider"),await DE(t,t._uninitializedComponentsProvider._online)):(ve(Vi,"Using default OnlineComponentProvider"),await DE(t,new Py))),t._onlineComponents}function A9(t){return MA(t).then(e=>e.syncEngine)}async function VA(t){const e=await MA(t),n=e.eventManager;return n.onListen=f9.bind(null,e.syncEngine),n.onUnlisten=g9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=p9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=y9.bind(null,e.syncEngine),n}function k9(t,e,n={}){const r=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new LA({next:m=>{h.Nu(),o.enqueueAndForget(()=>CA(i,f));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new IA(R0(a.path),h,{includeMetadataChanges:!0,qa:!0});return SA(i,f)}(await VA(t),t.asyncQueue,e,n,r)),r.promise}function R9(t,e,n={}){const r=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new LA({next:m=>{h.Nu(),o.enqueueAndForget(()=>CA(i,f)),m.fromCache&&c.source==="server"?u.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new IA(a,h,{includeMetadataChanges:!0,qa:!0});return SA(i,f)}(await VA(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firestore.googleapis.com",LE=!0;class ME{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UA,this.ssl=LE}else this.host=e.host,this.ssl=e.ssl??LE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<c8)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VF;switch(r.type){case"firstParty":return new BF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=OE.get(n);r&&(ve("ComponentProvider","Removing Datastore"),OE.delete(n),r.terminate())}(this),Promise.resolve()}}function P9(t,e,n,r={}){var u;t=Rr(t,lp);const s=$i(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(d0(`https://${a}`),h0("Firestore",!0)),i.host!==UA&&i.host!==a&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!jo(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=ln.MOCK_USER;else{h=RI(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ln(m)}t._authCredentials=new FF(new TN(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}toJSON(){return{type:Nt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ru(n,Nt._jsonSchema))return new Nt(e,r||null,new Ce(at.fromString(n.referencePath)))}}Nt._jsonSchemaVersion="firestore/documentReference/1.0",Nt._jsonSchema={type:jt("string",Nt._jsonSchemaVersion),referencePath:jt("string")};class Ei extends Xo{constructor(e,n,r){super(e,n,R0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new Ce(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function At(t,e,...n){if(t=vt(t),SN("collection","path",e),t instanceof lp){const r=at.fromString(e,...n);return Y1(r),new Ei(t,null,r)}{if(!(t instanceof Nt||t instanceof Ei))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return Y1(r),new Ei(t.firestore,null,r)}}function Wt(t,e,...n){if(t=vt(t),arguments.length===1&&(e=S0.newId()),SN("doc","path",e),t instanceof lp){const r=at.fromString(e,...n);return Q1(r),new Nt(t,null,new Ce(r))}{if(!(t instanceof Nt||t instanceof Ei))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return Q1(r),new Nt(t.firestore,t instanceof Ei?t.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="AsyncQueue";class FE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yA(this,"async_queue_retry"),this._c=()=>{const r=Am();r&&ve(VE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Am();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Am();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!kl(e))throw e;ve(VE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",UE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=W0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Re(47125,{Pc:UE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zo extends lp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new FE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new FE(e),this._firestoreClient=void 0,await e}}}function j9(t,e){const n=typeof t=="object"?t:m0(),r=typeof t=="string"?t:tf,s=Hf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NI("firestore");i&&P9(s,...i)}return s}function cp(t){if(t._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||D9(t),t._firestoreClient}function D9(t){var r,s,i;const e=t._freezeSettings(),n=function(a,c,u,h){return new iU(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,FA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new I9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rr(en.fromBase64String(e))}catch(n){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rr(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,rr._jsonSchema))return rr.fromBase64String(e.bytes)}}rr._jsonSchemaVersion="firestore/bytes/1.0",rr._jsonSchema={type:jt("string",rr._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jr._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Jr._jsonSchema))return new Jr(e.latitude,e.longitude)}}Jr._jsonSchemaVersion="firestore/geoPoint/1.0",Jr._jsonSchema={type:jt("string",Jr._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:es._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,es._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new es(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}es._jsonSchemaVersion="firestore/vectorValue/1.0",es._jsonSchema={type:jt("string",es._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=/^__.*__$/;class L9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class zA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ki(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class Y0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Y0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return df(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(BA(this.Ac)&&O9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class M9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ip(e)}Cc(e,n,r,s=!1){return new Y0({Ac:e,methodName:n,Dc:r,path:Qt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function up(t){const e=t._freezeSettings(),n=ip(t._databaseId);return new M9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $A(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);X0("Data must be an object, but it was:",o,r);const a=qA(r,o);let c,u;if(i.merge)c=new zn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=jy(e,f,n);if(!o.contains(m))throw new ge(re.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);GA(h,m)||h.push(m)}c=new zn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new L9(new Nn(a),c,u)}class dp extends Q0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dp}}function WA(t,e,n,r){const s=t.Cc(1,e,n);X0("Data must be an object, but it was:",s,r);const i=[],o=Nn.empty();qi(r,(c,u)=>{const h=Z0(e,c,n);u=vt(u);const f=s.yc(h);if(u instanceof dp)i.push(h);else{const m=Mu(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new zn(i);return new zA(o,a,s.fieldTransforms)}function HA(t,e,n,r,s,i){const o=t.Cc(1,e,n),a=[jy(e,r,n)],c=[s];if(i.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(jy(e,i[m])),c.push(i[m+1]);const u=[],h=Nn.empty();for(let m=a.length-1;m>=0;--m)if(!GA(u,a[m])){const g=a[m];let v=c[m];v=vt(v);const p=o.yc(g);if(v instanceof dp)u.push(g);else{const _=Mu(v,p);_!=null&&(u.push(g),h.set(g,_))}}const f=new zn(u);return new zA(h,f,o.fieldTransforms)}function V9(t,e,n,r=!1){return Mu(n,t.Cc(r?4:3,e))}function Mu(t,e){if(KA(t=vt(t)))return X0("Unsupported field value:",e,t),qA(t,e);if(t instanceof Q0)return function(r,s){if(!BA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Mu(a,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=nt.fromDate(r);return{timestampValue:af(s.serializer,i)}}if(r instanceof nt){const i=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:af(s.serializer,i)}}if(r instanceof Jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rr)return{bytesValue:oA(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:O0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof es)return function(o,a){return{mapValue:{fields:{[DN]:{stringValue:LN},[nf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return P0(a.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Qf(r)}`)}(t,e)}function qA(t,e){const n={};return NN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(t,(r,s)=>{const i=Mu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function KA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof Jr||t instanceof rr||t instanceof Nt||t instanceof Q0||t instanceof es)}function X0(t,e,n){if(!KA(n)||!CN(n)){const r=Qf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function jy(t,e,n){if((e=vt(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return Z0(t,e);throw df("Field path arguments must be of type string or ",t,!1,void 0,n)}const F9=new RegExp("[~\\*/\\[\\]]");function Z0(t,e,n){if(e.search(F9)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lu(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function df(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ge(re.INVALID_ARGUMENT,a+t+c)}function GA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class U9 extends QA{data(){return super.data()}}function hp(t,e){return typeof e=="string"?Z0(t,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J0{}class YA extends J0{}function bi(t,e,...n){let r=[];e instanceof J0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ew).length,a=i.filter(c=>c instanceof fp).length;if(o>1||o>0&&a>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class fp extends YA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new fp(e,n,r)}_apply(e){const n=this._parse(e);return XA(e._query,n),new Xo(e.firestore,e.converter,Ey(e._query,n))}_parse(e){const n=up(e.firestore);return function(i,o,a,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){BE(f,h);const v=[];for(const p of f)v.push(zE(c,i,p));m={arrayValue:{values:v}}}else m=zE(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||BE(f,h),m=V9(a,o,f,h==="in"||h==="not-in");return Pt.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ti(t,e,n){const r=e,s=hp("where",t);return fp._create(s,r,n)}class ew extends J0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ew(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)XA(o,c),o=Ey(o,c)}(e._query,n),new Xo(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tw extends YA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tw(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cu(i,o)}(e._query,this._field,this._direction);return new Xo(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Rl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function B9(t,e="asc"){const n=e,r=hp("orderBy",t);return tw._create(r,n)}function zE(t,e,n){if(typeof(n=vt(n))=="string"){if(n==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WN(e)&&n.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(at.fromString(n));if(!Ce.isDocumentKey(r))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sE(t,new Ce(r))}if(n instanceof Nt)return sE(t,n._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(n)}.`)}function BE(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $9{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return qi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[nf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ct(o.doubleValue));return new es(n)}convertGeoPoint(e){return new Jr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=Di(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);st(hA(r),9688,{name:e});const s=new au(r.get(1),r.get(3)),i=new Ce(r.popFirst(5));return s.isEqual(n)||As(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends QA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:jt("string",xo._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class uh extends xo{data(e={}){return super.data(e)}}class Va{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new pc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new uh(this._firestore,this._userDataWriter,r.key,r,new pc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new uh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new uh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new pc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:W9(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Va._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=S0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(t){t=Rr(t,Nt);const e=Rr(t.firestore,Zo);return k9(cp(e),t._key).then(n=>H9(e,t,n))}Va._jsonSchemaVersion="firestore/querySnapshot/1.0",Va._jsonSchema={type:jt("string",Va._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class JA extends $9{constructor(e){super(),this.firestore=e}convertBytes(e){return new rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function En(t){t=Rr(t,Xo);const e=Rr(t.firestore,Zo),n=cp(e),r=new JA(e);return z9(t._query),R9(n,t._query).then(s=>new Va(e,r,t,s))}function Gi(t,e,n){t=Rr(t,Nt);const r=Rr(t.firestore,Zo),s=ZA(t.converter,e,n);return pp(r,[$A(up(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dn.none())])}function jl(t,e,n,...r){t=Rr(t,Nt);const s=Rr(t.firestore,Zo),i=up(s);let o;return o=typeof(e=vt(e))=="string"||e instanceof Lu?HA(i,"updateDoc",t._key,e,n,r):WA(i,"updateDoc",t._key,e),pp(s,[o.toMutation(t._key,Dn.exists(!0))])}function ek(t){return pp(Rr(t.firestore,Zo),[new rp(t._key,Dn.none())])}function pp(t,e){return function(r,s){const i=new _s;return r.asyncQueue.enqueueAndForget(async()=>v9(await A9(r),s,i)),i.promise}(cp(t),e)}function H9(t,e,n){const r=n.docs.get(e._key),s=new JA(t);return new xo(t,s,e._key,r,new pc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=up(e)}set(e,n,r){this._verifyNotCommitted();const s=Rm(e,this._firestore),i=ZA(s.converter,n,r),o=$A(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Dn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Rm(e,this._firestore);let o;return o=typeof(n=vt(n))=="string"||n instanceof Lu?HA(this._dataReader,"WriteBatch.update",i._key,n,r,s):WA(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Dn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rm(e,this._firestore);return this._mutations=this._mutations.concat(new rp(n._key,Dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rm(t,e){if((t=vt(t)).firestore!==e)throw new ge(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){return cp(t=Rr(t,Zo)),new q9(t,e=>pp(t,e))}(function(e,n=!0){(function(s){Nl=s})(Ko),Do(new Pi("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Zo(new UF(r.getProvider("auth-internal")),new $F(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Gr(H1,q1,e),Gr(H1,q1,"esm2020")})();var K9="firebase",G9="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gr(K9,G9,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="firebasestorage.googleapis.com",nk="storageBucket",Q9=2*60*1e3,Y9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends ss{constructor(e,n,r=0){super(Pm(e),`Firebase Storage: ${n} (${Pm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Pm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Pm(t){return"storage/"+t}function rw(){const t="An unknown error occurred, please check the error payload for server response.";return new St(Tt.UNKNOWN,t)}function X9(t){return new St(Tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Z9(t){return new St(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function J9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(Tt.UNAUTHENTICATED,t)}function ez(){return new St(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tz(t){return new St(Tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function nz(){return new St(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rz(){return new St(Tt.CANCELED,"User canceled the upload/download.")}function sz(t){return new St(Tt.INVALID_URL,"Invalid URL '"+t+"'.")}function iz(t){return new St(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oz(){return new St(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nk+"' property when initializing the app?")}function az(){return new St(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function lz(){return new St(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function cz(t){return new St(Tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dy(t){return new St(Tt.INVALID_ARGUMENT,t)}function rk(){return new St(Tt.APP_DELETED,"The Firebase app was deleted.")}function uz(t){return new St(Tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pc(t,e){return new St(Tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function rc(t){throw new St(Tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Bn.makeFromUrl(e,n)}catch{return new Bn(e,"")}if(r.path==="")return r;throw iz(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},p=n===tk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",y=new RegExp(`^https?://${p}/${s}/${_}`,"i"),x=[{regex:a,indices:c,postModify:i},{regex:g,indices:v,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<x.length;I++){const R=x[I],L=R.regex.exec(e);if(L){const S=L[R.indices.bucket];let T=L[R.indices.path];T||(T=""),r=new Bn(S,T),R.postModify(r);break}}if(r==null)throw sz(e);return r}}class dz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(..._){u||(u=!0,e.apply(null,_))}function f(_){s=setTimeout(()=>{s=null,t(g,c())},_)}function m(){i&&clearTimeout(i)}function g(_,...y){if(u){m();return}if(_){m(),h.call(null,_,...y);return}if(c()||o){m(),h.call(null,_,...y);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let v=!1;function p(_){v||(v=!0,m(),!u&&(s!==null?(_||(a=2),clearTimeout(s),f(0)):_||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}function fz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){return t!==void 0}function mz(t){return typeof t=="object"&&!Array.isArray(t)}function sw(t){return typeof t=="string"||t instanceof String}function $E(t){return iw()&&t instanceof Blob}function iw(){return typeof Blob<"u"}function WE(t,e,n,r){if(r<e)throw Dy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function sk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Eo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Eo||(Eo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gz(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,n,r,s,i,o,a,c,u,h,f,m=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,p)=>{this.resolve_=v,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Pd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Eo.NO_ERROR,c=i.getStatus();if(!a||gz(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Eo.ABORT;r(!1,new Pd(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Pd(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());pz(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=rw();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?rk():rz();o(c)}else{const c=nz();o(c)}};this.canceled_?n(!1,new Pd(!1,null,!0)):this.backoffId_=hz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _z(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Ez(t,e,n,r,s,i,o=!0,a=!1){const c=sk(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return _z(h,e),vz(h,n),wz(h,i),xz(h,r),new yz(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Tz(...t){const e=bz();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(iw())return new Blob(t);throw new St(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Sz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cz(t){if(typeof atob>"u")throw cz("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jm{constructor(e,n){this.data=e,this.contentType=n||null}}function Iz(t,e){switch(t){case Wr.RAW:return new jm(ik(e));case Wr.BASE64:case Wr.BASE64URL:return new jm(ok(t,e));case Wr.DATA_URL:return new jm(Az(e),kz(e))}throw rw()}function ik(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Nz(t){let e;try{e=decodeURIComponent(t)}catch{throw Pc(Wr.DATA_URL,"Malformed data URL.")}return ik(e)}function ok(t,e){switch(t){case Wr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Pc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Pc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Cz(e)}catch(s){throw s.message.includes("polyfill")?s:Pc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class ak{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Pc(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Rz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Az(t){const e=new ak(t);return e.base64?ok(Wr.BASE64,e.rest):Nz(e.rest)}function kz(t){return new ak(t).contentType}function Rz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,n){let r=0,s="";$E(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if($E(this.data_)){const r=this.data_,s=Sz(r,e,n);return s===null?null:new Js(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Js(r,!0)}}static getBlob(...e){if(iw()){const n=e.map(r=>r instanceof Js?r.data_:r);return new Js(Tz.apply(null,n))}else{const n=e.map(o=>sw(o)?Iz(Wr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Js(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(t){let e;try{e=JSON.parse(t)}catch{return null}return mz(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jz(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ck(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dz(t,e){return e}class gn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||Dz}}let jd=null;function Oz(t){return!sw(t)||t.length<2?t:ck(t)}function uk(){if(jd)return jd;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(i,o){return Oz(o)}const n=new gn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new gn("size");return s.xform=r,t.push(s),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),jd=t,jd}function Lz(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Bn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Mz(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Lz(r,t),r}function dk(t,e,n){const r=lk(e);return r===null?null:Mz(t,r,n)}function Vz(t,e,n,r){const s=lk(e);if(s===null||!sw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),g=ow(m,n,r),v=sk({alt:"media",token:u});return g+v})[0]}function Fz(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class hk{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t){if(!t)throw rw()}function Uz(t,e){function n(r,s){const i=dk(t,s,e);return fk(i!==null),i}return n}function zz(t,e){function n(r,s){const i=dk(t,s,e);return fk(i!==null),Vz(i,s,t.host,t._protocol)}return n}function pk(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=ez():s=J9():n.getStatus()===402?s=Z9(t.bucket):n.getStatus()===403?s=tz(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Bz(t){const e=pk(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=X9(t.path)),i.serverResponse=s.serverResponse,i}return n}function $z(t,e,n){const r=e.fullServerUrl(),s=ow(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new hk(s,i,zz(t,n),o);return a.errorHandler=Bz(e),a}function Wz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Hz(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Wz(null,e)),r}function qz(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let I=0;I<2;I++)x=x+Math.random().toString().slice(2);return x}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=Hz(e,r,s),h=Fz(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+c+"--",g=Js.getBlob(f,r,m);if(g===null)throw az();const v={name:u.fullPath},p=ow(i,t.host,t._protocol),_="POST",y=t.maxUploadRetryTime,w=new hk(p,_,Uz(t,n),y);return w.urlParams=v,w.headers=o,w.body=g.uploadData(),w.errorHandler=pk(e),w}class Kz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Eo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Eo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Eo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw rc("cannot .send() more than once");if($i(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Gz extends Kz{initXhr(){this.xhr_.responseType="text"}}function mk(){return new Gz}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this._service=e,n instanceof Bn?this._location=n:this._location=Bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Fo(e,n)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ck(this._location.path)}get storage(){return this._service}get parent(){const e=Pz(this._location.path);if(e===null)return null;const n=new Bn(this._location.bucket,e);return new Fo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uz(e)}}function Qz(t,e,n){t._throwIfRoot("uploadBytes");const r=qz(t.storage,t._location,uk(),new Js(e,!0),n);return t.storage.makeRequestWithTokens(r,mk).then(s=>({metadata:s,ref:t}))}function Yz(t){t._throwIfRoot("getDownloadURL");const e=$z(t.storage,t._location,uk());return t.storage.makeRequestWithTokens(e,mk).then(n=>{if(n===null)throw lz();return n})}function Xz(t,e){const n=jz(t._location.path,e),r=new Bn(t._location.bucket,n);return new Fo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(t){return/^[A-Za-z]+:\/\//.test(t)}function Jz(t,e){return new Fo(t,e)}function gk(t,e){if(t instanceof aw){const n=t;if(n._bucket==null)throw oz();const r=new Fo(n,n._bucket);return e!=null?gk(r,e):r}else return e!==void 0?Xz(t,e):t}function eB(t,e){if(e&&Zz(e)){if(t instanceof aw)return Jz(t,e);throw Dy("To use ref(service, url), the first argument must be a Storage instance.")}else return gk(t,e)}function HE(t,e){const n=e==null?void 0:e[nk];return n==null?null:Bn.makeFromBucketSpec(n,t)}function tB(t,e,n,r={}){t.host=`${e}:${n}`;const s=$i(e);s&&(d0(`https://${t.host}/b`),h0("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:RI(i,t.app.options.projectId))}class aw{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=tk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q9,this._maxUploadRetryTime=Y9,this._requests=new Set,s!=null?this._bucket=Bn.makeFromBucketSpec(s,this._host):this._bucket=HE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=HE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){WE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){WE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new dz(rk());{const o=Ez(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const qE="@firebase/storage",KE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk="storage";function nB(t,e,n){return t=vt(t),Qz(t,e,n)}function rB(t){return t=vt(t),Yz(t)}function sB(t,e){return t=vt(t),eB(t,e)}function iB(t=m0(),e){t=vt(t);const r=Hf(t,yk).getImmediate({identifier:e}),s=NI("storage");return s&&oB(r,...s),r}function oB(t,e,n,r={}){tB(t,e,n,r)}function aB(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new aw(n,r,s,e,Ko)}function lB(){Do(new Pi(yk,aB,"PUBLIC").setMultipleInstances(!0)),Gr(qE,KE,""),Gr(qE,KE,"esm2020")}lB();const Yn={apiKey:"AIzaSyDmAc4yKfgbjSSJMKwN22duiF8vcZe_IVE",authDomain:"oil-delivery-6bcc4.firebaseapp.com",projectId:"oil-delivery-6bcc4",storageBucket:"oil-delivery-6bcc4.firebasestorage.app",messagingSenderId:"136339484143",appId:"1:136339484143:web:dc0df4a3b78e0f2ed6da1a",measurementId:"G-KM58SN9WYL"};let mp;try{if(!Yn.apiKey||!Yn.projectId||!Yn.appId)throw console.error("Missing Firebase configuration:",{hasApiKey:!!Yn.apiKey,hasProjectId:!!Yn.projectId,hasAppId:!!Yn.appId}),new Error("Firebase configuration is incomplete");mp=x1().length===0?DI(Yn):x1()[0],console.log("Firebase initialized successfully with project:",Yn.projectId),console.log("Firebase config used:",{projectId:Yn.projectId,authDomain:Yn.authDomain,hasApiKey:!!Yn.apiKey,hasAppId:!!Yn.appId})}catch(t){throw console.error("Firebase initialization error:",t),document.body.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: linear-gradient(to bottom right, #3b82f6, #8b5cf6);
      font-family: system-ui, -apple-system, sans-serif;
    ">
      <div style="
        background: white; 
        padding: 2rem; 
        border-radius: 0.5rem; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
        max-width: 400px;
      ">
        <h1 style="color: #dc2626; margin: 0 0 1rem 0;">Configuration Error</h1>
        <p style="color: #374151; margin: 0 0 1rem 0;">
          Firebase configuration is missing or invalid. Please check the deployment setup.
        </p>
        <p style="color: #6b7280; font-size: 0.875rem; margin: 0;">
          Contact administrator for assistance.
        </p>
      </div>
    </div>
  `,t}const gp=LF(mp),Ke=j9(mp),cB=iB(mp),uB=async(t,e=.8,n=1200)=>new Promise(r=>{const s=document.createElement("canvas"),i=s.getContext("2d"),o=new Image;o.onload=()=>{let{width:a,height:c}=o;a>n&&(c=c*n/a,a=n),s.width=a,s.height=c,i.drawImage(o,0,0,a,c),s.toBlob(u=>{u&&r(u)},"image/jpeg",e)},o.src=URL.createObjectURL(t)}),vk=async(t,e="photos")=>{try{const n=await uB(t,.8,1200),s=`${new Date().toISOString().replace(/[:.]/g,"-")}-${Math.random().toString(36).substr(2,9)}.jpg`,i=`${e}/${s}`,o=sB(cB,i);console.log("Uploading compressed photo to Firebase Storage...");const a=await nB(o,n),c=await rB(a.ref);return console.log("Compressed photo uploaded successfully:",c),c}catch(n){throw console.error("Error uploading photo to Firebase Storage:",n),new Error("Failed to upload photo. Please try again.")}};new fs;const dB=async()=>{try{await SV(gp)}catch(t){throw console.error("Error signing out:",t),t}},hB=async()=>{try{return[]}catch(t){return console.error("Error getting all deliveries:",t),[]}},fB=async()=>{try{return[]}catch(t){return console.error("Error getting all complaints:",t),[]}},lw=async()=>{try{const t=At(Ke,"users");return(await En(t)).docs.map(n=>n.data())}catch(t){return console.error("Error getting all users:",t),[]}},pB=async t=>{try{const n=(await xV(gp,t.email,t.password)).user;return await Gi(Wt(Ke,"users",n.uid),{uid:n.uid,email:n.email,role:"driver",displayName:t.displayName,photoURL:n.photoURL,createdAt:new Date,lastLoginAt:new Date,active:!0,empNo:t.empNo,driverLicenceNo:t.driverLicenceNo,tankerLicenceNo:t.tankerLicenceNo||t.driverLicenceNo,licenceExpiryDate:t.licenceExpiryDate}),n}catch(e){throw console.error("Error creating driver account:",e),e.code==="auth/email-already-in-use"?new Error("Email is already registered. Please use a different email address."):e.code==="auth/weak-password"?new Error("Password is too weak. Please choose a stronger password."):e.code==="auth/invalid-email"?new Error("Invalid email address format."):e}},mB=async t=>{try{const e=Wt(At(Ke,"branches")),n={...t,id:e.id,active:!0,createdAt:new Date};return await Gi(e,n),n}catch(e){throw console.error("Error saving branch:",e),e}},gB=async()=>{try{const t=At(Ke,"branches");return(await En(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting all branches:",t),[]}},yB=async(t,e)=>{try{const n=Wt(Ke,"branches",t);await jl(n,e)}catch(n){throw console.error("Error updating branch:",n),n}},vB=async t=>{try{const e=nw(Ke),n=Wt(Ke,"branches",t);e.delete(n);const r=bi(At(Ke,"transactions"),Ti("branchId","==",t));(await En(r)).docs.forEach(a=>{e.delete(a.ref)});const i=bi(At(Ke,"deliveries"),Ti("branchId","==",t));(await En(i)).docs.forEach(a=>{e.delete(a.ref)}),await e.commit(),console.log(`Branch ${t} and all related records deleted successfully`)}catch(e){throw console.error("Error deleting branch with cascading delete:",e),e}},wB=async t=>{try{const e=Wt(At(Ke,"oilTypes")),n={...t,id:e.id,active:!0,createdAt:new Date};return await Gi(e,n),n}catch(e){throw console.error("Error saving oil type:",e),e}},_B=async()=>{try{const t=At(Ke,"oilTypes");return(await En(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting all oil types:",t),[]}},xB=async(t,e)=>{try{const n=Wt(Ke,"oilTypes",t);await jl(n,e)}catch(n){throw console.error("Error updating oil type:",n),n}},EB=async t=>{try{const e=nw(Ke),n=Wt(Ke,"oilTypes",t);e.delete(n);const r=bi(At(Ke,"transactions"),Ti("oilTypeId","==",t));(await En(r)).docs.forEach(u=>{e.delete(u.ref)});const i=bi(At(Ke,"loadSessions"),Ti("oilTypeId","==",t));(await En(i)).docs.forEach(u=>{e.delete(u.ref)});const a=bi(At(Ke,"deliveries"),Ti("oilTypeId","==",t));(await En(a)).docs.forEach(u=>{e.delete(u.ref)}),await e.commit(),console.log(`Oil type ${t} and all related records deleted successfully`)}catch(e){throw console.error("Error deleting oil type with cascading delete:",e),e}},GE=async(t,e)=>{try{const n=Wt(Ke,"users",t);await jl(n,e)}catch(n){throw console.error("Error updating driver:",n),n}},bB=async t=>{try{const e=Wt(Ke,"users",t);await ek(e)}catch(e){throw console.error("Error deleting driver:",e),e}},wk=async t=>{try{if(console.log("Creating task with data:",t),!t.title||!t.dueDate)throw new Error("Title and due date are required");const e=Wt(At(Ke,"tasks")),n={title:t.title,description:t.description||"",priority:t.priority||"medium",status:"pending",assignedTo:t.assignedTo||null,id:e.id,createdAt:nt.now(),updatedAt:nt.now(),dueDate:nt.fromDate(t.dueDate)};return console.log("Saving task to Firestore:",n),await Gi(e,n),console.log("Task saved successfully"),{...n,createdAt:n.createdAt.toDate(),updatedAt:n.updatedAt.toDate(),dueDate:n.dueDate.toDate()}}catch(e){throw console.error("Error saving task:",e),e}},_k=async()=>{try{const t=At(Ke,"tasks"),e=bi(t,B9("createdAt","desc"));return(await En(e)).docs.map(r=>{var i,o,a;const s=r.data();return{...s,id:r.id,createdAt:((i=s.createdAt)==null?void 0:i.toDate())||new Date,updatedAt:((o=s.updatedAt)==null?void 0:o.toDate())||new Date,dueDate:((a=s.dueDate)==null?void 0:a.toDate())||new Date}})}catch(t){return console.error("Error getting all tasks:",t),[]}},xk=async(t,e)=>{try{const n=Wt(Ke,"tasks",t),r={...e,updatedAt:nt.now()};e.dueDate&&e.dueDate instanceof Date&&(r.dueDate=nt.fromDate(e.dueDate)),await jl(n,r)}catch(n){throw console.error("Error updating task:",n),n}},Ek=async t=>{try{const e=Wt(Ke,"tasks",t);await ek(e)}catch(e){throw console.error("Error deleting task:",e),e}},Oy=()=>{var t;return((t=gp.currentUser)==null?void 0:t.uid)||"anonymous"},TB=async t=>{try{const e=Wt(At(Ke,"loadSessions")),n=`LS_${Date.now()}_${Math.random().toString(36).substr(2,4).toUpperCase()}`,r={...t,id:e.id,loadSessionId:n,status:"active",createdAt:new Date,timestamp:new Date,createdBy:Oy(),remainingLiters:t.totalLoadedLiters,loadCount:1};return await Gi(e,r),await bk({type:"loading",loadSessionId:n,oilTypeId:t.oilTypeId,oilTypeName:t.oilTypeName,quantity:t.totalLoadedLiters,location:t.loadLocationId,meterReading:t.loadMeterReading,photos:{meterReadingPhoto:t.meterReadingPhoto},timestamp:new Date,driverUid:Oy()}),console.log("New load session created in Firestore:",r),r}catch(e){throw console.error("Error creating load session:",e),e}},bk=async t=>{try{const e=Wt(At(Ke,"transactions")),n={...t,id:e.id,timestamp:new Date,createdAt:new Date};return await Gi(e,n),console.log("Transaction saved to Firestore:",n),n}catch(e){throw console.error("Error saving transaction:",e),e}},SB=async t=>{try{let e="";if(t.branchId)try{const h=await hf(Wt(Ke,"branches",t.branchId));if(h.exists()){const f=h.data();e=f.address||f.location||""}}catch(h){console.error("Error fetching branch address:",h)}const n=At(Ke,"transactions"),r=bi(n,Ti("loadSessionId","==",t.loadSessionId)),s=await En(r);let i=0;s.docs.forEach(h=>{const f=h.data();f.type==="supply"&&(i+=f.quantity||0)});const o=Wt(Ke,"loadSessions",t.loadSessionId),a=await hf(o);if(a.exists()){const f=a.data().totalLoadedLiters||0,m=f-i,g=m<=0?"completed":"active";await jl(o,{remainingLiters:m,status:g,lastSupplyAt:new Date,totalSupplied:i,...m<=0&&{completedAt:new Date}}),console.log(`Load session ${t.loadSessionId} updated: ${f}L loaded - ${i}L supplied = ${m}L remaining, status: ${g}`)}const c=Wt(At(Ke,"deliveries")),u={...t,branchAddress:e,id:c.id,completedAt:new Date,timestamp:new Date,status:"completed"};return await Gi(c,u),await bk({type:"supply",loadSessionId:t.loadSessionId,deliveryOrderId:t.deliveryOrderId,branchId:t.branchId,branchName:t.branchName,branchAddress:e,oilTypeId:t.oilTypeId,oilTypeName:t.oilTypeName,quantity:t.deliveredLiters,startMeterReading:t.startMeterReading,endMeterReading:t.endMeterReading,photos:t.photos,timestamp:new Date,driverUid:Oy()}),console.log("Delivery completed and saved to Firestore:",u),u}catch(e){throw console.error("Error completing delivery:",e),e}},cw=async()=>{try{const t=At(Ke,"transactions");return(await En(t)).docs.map(n=>({id:n.id,...n.data()})).sort((n,r)=>{var s,i;return new Date((s=r.timestamp)!=null&&s.toDate?r.timestamp.toDate():r.timestamp).getTime()-new Date((i=n.timestamp)!=null&&i.toDate?n.timestamp.toDate():n.timestamp).getTime()})}catch(t){return console.error("Error getting all transactions:",t),[]}},uw=async()=>{try{const t=At(Ke,"oilTypes");return(await En(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting oil types:",t),[]}},dw=async()=>{try{const t=At(Ke,"branches");return(await En(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error getting branches:",t),[]}},CB=async()=>{try{const t=["users","deliveries","complaints","branches","oilTypes","tasks","loadSessions","transactions"],e=await Promise.all(t.map(async s=>{const i=await En(At(Ke,s));return{collection:s,count:i.docs.length}})),n=e.reduce((s,i)=>s+i.count,0),r=`${(n*2).toFixed(1)} KB`;return{collections:e,totalDocuments:n,estimatedSize:r}}catch(t){return console.error("Error getting Firestore usage:",t),{collections:[],totalDocuments:0,estimatedSize:"0 KB"}}},IB=async(t,e,n)=>{try{const r=At(Ke,t),s=bi(r,Ti("createdAt",">=",e),Ti("createdAt","<=",n)),i=await En(s);let o=0;const a=nw(Ke);return i.docs.forEach(c=>{a.delete(c.ref),o++}),await a.commit(),o}catch(r){throw console.error("Error deleting records by date range:",r),r}},NB="v1.3.0";function AB(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(!1),{toast:o}=Gn(),a=async()=>{if(!t||!n){o({title:"Missing Information",description:"Please enter both email and password",variant:"destructive"});return}i(!0);try{const h=(await EV(gp,t,n)).user,f=Wt(Ke,"users",h.uid);if((await hf(f)).exists())await jl(f,{lastLoginAt:new Date});else{const _=t==="asif.s@ekkanoo.com.bh"||t==="asif1001@gmail.com";await Gi(f,{uid:h.uid,email:h.email,role:_?"admin":"driver",displayName:h.displayName||t.split("@")[0],active:!0,lastLoginAt:new Date,createdAt:new Date})}const v=(await hf(f)).data(),p={uid:h.uid,email:h.email,role:(v==null?void 0:v.role)||"driver",displayName:(v==null?void 0:v.displayName)||h.displayName||t.split("@")[0],active:(v==null?void 0:v.active)||!0};localStorage.setItem("currentUser",JSON.stringify(p)),o({title:"Welcome!",description:`Successfully signed in as ${p.role}`}),setTimeout(()=>{window.location.href="/"},100)}catch(u){console.error("Login error:",u);let h="Login failed. Please check your credentials.";switch(u.code){case"auth/invalid-email":h="Please enter a valid email address.";break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":h="Invalid email or password. Please try again.";break;case"auth/too-many-requests":h="Too many failed attempts. Please try again later.";break;case"auth/network-request-failed":h="Network error. Please check your connection.";break;default:h="Login failed. Please try again."}o({title:"Login Failed",description:h,variant:"destructive"})}finally{i(!1)}},c=u=>{u.key==="Enter"&&a()};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-600 flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"bg-white rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4 shadow-xl p-2",children:l.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),l.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"OILDELIVERY"}),l.jsx("p",{className:"text-blue-100 text-sm",children:"Professional Oil Delivery Management"})]}),l.jsx(Ue,{className:"shadow-2xl border-0",children:l.jsxs(qe,{className:"p-6 sm:p-8",children:[l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-2",children:"Sign In"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your credentials to access your account"})]}),l.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email Address"}),l.jsx(tt,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:u=>e(u.target.value),onKeyPress:c,className:"h-11 sm:h-12 text-base border-2 border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 placeholder:text-gray-500","data-testid":"input-email",autoComplete:"email"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"password",className:"text-sm font-semibold text-gray-700",children:"Password"}),l.jsx(tt,{id:"password",type:"password",placeholder:"Enter your password",value:n,onChange:u=>r(u.target.value),onKeyPress:c,className:"h-11 sm:h-12 text-base border-2 border-gray-300 bg-white text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 placeholder:text-gray-500","data-testid":"input-password",autoComplete:"current-password"})]}),l.jsx(we,{onClick:a,disabled:s,className:"w-full h-11 sm:h-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold text-base rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-[1.02] mt-6","data-testid":"button-login",children:s?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing In..."]}):"Sign In"}),l.jsx("div",{className:"text-center mt-4 text-xs text-gray-500",children:l.jsx("p",{children:"Use your registered email and password to access OILDELIVERY"})})]})]})}),l.jsxs("div",{className:"text-center mt-6 text-blue-100 text-xs",children:[l.jsx("p",{children:"OILDELIVERY - Secure Oil Delivery Management System"}),l.jsxs("p",{className:"mt-2 opacity-75",children:["Version ",NB]})]})]})})}var hw="Avatar",[kB,DW]=ur(hw),[RB,Tk]=kB(hw),Sk=b.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=b.useState("idle");return l.jsx(RB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:l.jsx(Pe.span,{...r,ref:e})})});Sk.displayName=hw;var Ck="AvatarImage",Ik=b.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=Tk(Ck,n),a=PB(r,i),c=bt(u=>{s(u),o.onImageLoadingStatusChange(u)});return Dt(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?l.jsx(Pe.img,{...i,ref:e,src:r}):null});Ik.displayName=Ck;var Nk="AvatarFallback",Ak=b.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=Tk(Nk,n),[o,a]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?l.jsx(Pe.span,{...s,ref:e}):null});Ak.displayName=Nk;function QE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function PB(t,{referrerPolicy:e,crossOrigin:n}){const r=DB(),s=b.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=b.useState(()=>QE(i,t));return Dt(()=>{a(QE(i,t))},[i,t]),Dt(()=>{const c=f=>()=>{a(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function jB(){return()=>{}}function DB(){return b.useSyncExternalStore(jB,()=>!0,()=>!1)}var kk=Sk,Rk=Ik,Pk=Ak;const jk=b.forwardRef(({className:t,...e},n)=>l.jsx(kk,{ref:n,className:Ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));jk.displayName=kk.displayName;const Dk=b.forwardRef(({className:t,...e},n)=>l.jsx(Rk,{ref:n,className:Ne("aspect-square h-full w-full",t),...e}));Dk.displayName=Rk.displayName;const Ok=b.forwardRef(({className:t,...e},n)=>l.jsx(Pk,{ref:n,className:Ne("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Ok.displayName=Pk.displayName;function OB(){var r,s;const{user:t,isLoading:e}=qo(),n=async()=>{try{await dB()}catch(i){console.error("Logout error:",i)}};return e?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:l.jsx("div",{className:"px-4 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Dashboard"}),l.jsxs(we,{onClick:n,variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-800","data-testid":"button-logout",children:[l.jsx(Yv,{className:"w-4 h-4 mr-2"}),"Logout"]})]})})}),l.jsxs("main",{className:"p-4 max-w-2xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Welcome back, ",(t==null?void 0:t.displayName)||"User","!"]}),l.jsx("p",{className:"text-gray-600",children:"Manage your profile and settings"})]}),l.jsxs(Ue,{className:"mb-6",children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center gap-2",children:[l.jsx(Zv,{className:"w-5 h-5"}),"Profile Information"]})}),l.jsxs(qe,{children:[l.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[l.jsxs(jk,{className:"w-16 h-16",children:[l.jsx(Dk,{src:(t==null?void 0:t.photoURL)||void 0,alt:"Profile"}),l.jsx(Ok,{className:"bg-blue-100 text-blue-600",children:((r=t==null?void 0:t.displayName)==null?void 0:r.charAt(0))||"U"})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800","data-testid":"text-user-name",children:(t==null?void 0:t.displayName)||"Anonymous User"}),l.jsx("p",{className:"text-gray-600 text-sm","data-testid":"text-user-email",children:t==null?void 0:t.email}),l.jsxs("p",{className:"text-gray-500 text-xs",children:["Member since: ",(s=t==null?void 0:t.metadata)!=null&&s.creationTime?new Date(t.metadata.creationTime).toLocaleDateString():"Unknown"]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(we,{variant:"outline",className:"flex items-center justify-center","data-testid":"button-edit-profile",children:[l.jsx(e1,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),l.jsxs(we,{variant:"outline",className:"flex items-center justify-center","data-testid":"button-upload-photo",children:[l.jsx(Jg,{className:"w-4 h-4 mr-2"}),"Upload Photo"]})]})]})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsx(Vt,{children:"Quick Actions"})}),l.jsx(qe,{children:l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsx(we,{variant:"ghost",className:"justify-start h-auto p-4 border border-gray-200 hover:bg-gray-50","data-testid":"button-settings",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(e1,{className:"w-5 h-5 mr-3 text-blue-500"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"font-medium text-gray-800",children:"Account Settings"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage your account preferences"})]})]})}),l.jsx(we,{variant:"ghost",className:"justify-start h-auto p-4 border border-gray-200 hover:bg-gray-50","data-testid":"button-upload-images",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Jg,{className:"w-5 h-5 mr-3 text-green-500"}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"font-medium text-gray-800",children:"Upload Images"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage your photos with Cloudinary"})]})]})})]})})]})]})]})}var Dm="focusScope.autoFocusOnMount",Om="focusScope.autoFocusOnUnmount",YE={bubbles:!1,cancelable:!0},LB="FocusScope",fw=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,c]=b.useState(null),u=bt(s),h=bt(i),f=b.useRef(null),m=Ye(e,p=>c(p)),g=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let p=function(x){if(g.paused||!a)return;const I=x.target;a.contains(I)?f.current=I:Hs(f.current,{select:!0})},_=function(x){if(g.paused||!a)return;const I=x.relatedTarget;I!==null&&(a.contains(I)||Hs(f.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const R of x)R.removedNodes.length>0&&Hs(a)};document.addEventListener("focusin",p),document.addEventListener("focusout",_);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",_),w.disconnect()}}},[r,a,g.paused]),b.useEffect(()=>{if(a){ZE.add(g);const p=document.activeElement;if(!a.contains(p)){const y=new CustomEvent(Dm,YE);a.addEventListener(Dm,u),a.dispatchEvent(y),y.defaultPrevented||(MB(BB(Lk(a)),{select:!0}),document.activeElement===p&&Hs(a))}return()=>{a.removeEventListener(Dm,u),setTimeout(()=>{const y=new CustomEvent(Om,YE);a.addEventListener(Om,h),a.dispatchEvent(y),y.defaultPrevented||Hs(p??document.body,{select:!0}),a.removeEventListener(Om,h),ZE.remove(g)},0)}}},[a,u,h,g]);const v=b.useCallback(p=>{if(!n&&!r||g.paused)return;const _=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(_&&y){const w=p.currentTarget,[x,I]=VB(w);x&&I?!p.shiftKey&&y===I?(p.preventDefault(),n&&Hs(x,{select:!0})):p.shiftKey&&y===x&&(p.preventDefault(),n&&Hs(I,{select:!0})):y===w&&p.preventDefault()}},[n,r,g.paused]);return l.jsx(Pe.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});fw.displayName=LB;function MB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Hs(r,{select:e}),document.activeElement!==n)return}function VB(t){const e=Lk(t),n=XE(e,t),r=XE(e.reverse(),t);return[n,r]}function Lk(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function XE(t,e){for(const n of t)if(!FB(n,{upTo:e}))return n}function FB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function UB(t){return t instanceof HTMLInputElement&&"select"in t}function Hs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&UB(t)&&e&&t.select()}}var ZE=zB();function zB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=JE(t,e),t.unshift(e)},remove(e){var n;t=JE(t,e),(n=t[0])==null||n.resume()}}}function JE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function BB(t){return t.filter(e=>e.tagName!=="A")}var Lm=0;function Mk(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??eb()),document.body.insertAdjacentElement("beforeend",t[1]??eb()),Lm++,()=>{Lm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lm--}},[])}function eb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $r=function(){return $r=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$r.apply(this,arguments)};function Vk(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $B(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var dh="right-scroll-bar-position",hh="width-before-scroll-bar",WB="with-scroll-bars-hidden",HB="--removed-body-scroll-bar-size";function Mm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function qB(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var KB=typeof window<"u"?b.useLayoutEffect:b.useEffect,tb=new WeakMap;function GB(t,e){var n=qB(null,function(r){return t.forEach(function(s){return Mm(s,r)})});return KB(function(){var r=tb.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Mm(a,null)}),i.forEach(function(a){s.has(a)||Mm(a,o)})}tb.set(n,t)},[t]),n}function QB(t){return t}function YB(t,e){e===void 0&&(e=QB);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function XB(t){t===void 0&&(t={});var e=YB(null);return e.options=$r({async:!0,ssr:!1},t),e}var Fk=function(t){var e=t.sideCar,n=Vk(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,$r({},n))};Fk.isSideCarExport=!0;function ZB(t,e){return t.useMedium(e),Fk}var Uk=XB(),Vm=function(){},yp=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Vm,onWheelCapture:Vm,onTouchMoveCapture:Vm}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,g=t.noIsolation,v=t.inert,p=t.allowPinchZoom,_=t.as,y=_===void 0?"div":_,w=t.gapMode,x=Vk(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=m,R=GB([n,e]),L=$r($r({},x),s);return b.createElement(b.Fragment,null,h&&b.createElement(I,{sideCar:Uk,removeScrollBar:u,shards:f,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!p,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(a),$r($r({},L),{ref:R})):b.createElement(y,$r({},L,{className:c,ref:R}),a))});yp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yp.classNames={fullWidth:hh,zeroRight:dh};var JB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function e$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JB();return e&&t.setAttribute("nonce",e),t}function t$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function n$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var r$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=e$())&&(t$(e,n),n$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},s$=function(){var t=r$();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},zk=function(){var t=s$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},i$={left:0,top:0,right:0,gap:0},Fm=function(t){return parseInt(t||"",10)||0},o$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Fm(n),Fm(r),Fm(s)]},a$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return i$;var e=o$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},l$=zk(),Fa="data-scroll-locked",c$=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(WB,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Fa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hh,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(dh," .").concat(dh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(hh," .").concat(hh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Fa,`] {
    `).concat(HB,": ").concat(a,`px;
  }
`)},nb=function(){var t=parseInt(document.body.getAttribute(Fa)||"0",10);return isFinite(t)?t:0},u$=function(){b.useEffect(function(){return document.body.setAttribute(Fa,(nb()+1).toString()),function(){var t=nb()-1;t<=0?document.body.removeAttribute(Fa):document.body.setAttribute(Fa,t.toString())}},[])},d$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;u$();var i=b.useMemo(function(){return a$(s)},[s]);return b.createElement(l$,{styles:c$(i,!e,s,n?"":"!important")})},Ly=!1;if(typeof window<"u")try{var Dd=Object.defineProperty({},"passive",{get:function(){return Ly=!0,!0}});window.addEventListener("test",Dd,Dd),window.removeEventListener("test",Dd,Dd)}catch{Ly=!1}var sa=Ly?{passive:!1}:!1,h$=function(t){return t.tagName==="TEXTAREA"},Bk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!h$(t)&&n[e]==="visible")},f$=function(t){return Bk(t,"overflowY")},p$=function(t){return Bk(t,"overflowX")},rb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$k(t,r);if(s){var i=Wk(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},g$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$k=function(t,e){return t==="v"?f$(e):p$(e)},Wk=function(t,e){return t==="v"?m$(e):g$(e)},y$=function(t,e){return t==="h"&&e==="rtl"?-1:1},v$=function(t,e,n,r,s){var i=y$(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,c=e.contains(a),u=!1,h=o>0,f=0,m=0;do{var g=Wk(t,a),v=g[0],p=g[1],_=g[2],y=p-_-i*v;(v||y)&&$k(t,a)&&(f+=y,m+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},Od=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},sb=function(t){return[t.deltaX,t.deltaY]},ib=function(t){return t&&"current"in t?t.current:t},w$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},x$=0,ia=[];function E$(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),s=b.useState(x$++)[0],i=b.useState(zk)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var p=$B([t.lockRef.current],(t.shards||[]).map(ib),!0).filter(Boolean);return p.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),p.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(p,_){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var y=Od(p),w=n.current,x="deltaX"in p?p.deltaX:w[0]-y[0],I="deltaY"in p?p.deltaY:w[1]-y[1],R,L=p.target,S=Math.abs(x)>Math.abs(I)?"h":"v";if("touches"in p&&S==="h"&&L.type==="range")return!1;var T=rb(S,L);if(!T)return!0;if(T?R=S:(R=S==="v"?"h":"v",T=rb(S,L)),!T)return!1;if(!r.current&&"changedTouches"in p&&(x||I)&&(r.current=R),!R)return!0;var C=r.current||R;return v$(C,_,p,C==="h"?x:I,!0)},[]),c=b.useCallback(function(p){var _=p;if(!(!ia.length||ia[ia.length-1]!==i)){var y="deltaY"in _?sb(_):Od(_),w=e.current.filter(function(R){return R.name===_.type&&(R.target===_.target||_.target===R.shadowParent)&&w$(R.delta,y)})[0];if(w&&w.should){_.cancelable&&_.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(ib).filter(Boolean).filter(function(R){return R.contains(_.target)}),I=x.length>0?a(_,x[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),u=b.useCallback(function(p,_,y,w){var x={name:p,delta:_,target:y,should:w,shadowParent:b$(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(I){return I!==x})},1)},[]),h=b.useCallback(function(p){n.current=Od(p),r.current=void 0},[]),f=b.useCallback(function(p){u(p.type,sb(p),p.target,a(p,t.lockRef.current))},[]),m=b.useCallback(function(p){u(p.type,Od(p),p.target,a(p,t.lockRef.current))},[]);b.useEffect(function(){return ia.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,sa),document.addEventListener("touchmove",c,sa),document.addEventListener("touchstart",h,sa),function(){ia=ia.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,sa),document.removeEventListener("touchmove",c,sa),document.removeEventListener("touchstart",h,sa)}},[]);var g=t.removeScrollBar,v=t.inert;return b.createElement(b.Fragment,null,v?b.createElement(i,{styles:_$(s)}):null,g?b.createElement(d$,{gapMode:t.gapMode}):null)}function b$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const T$=ZB(Uk,E$);var pw=b.forwardRef(function(t,e){return b.createElement(yp,$r({},t,{ref:e,sideCar:T$}))});pw.classNames=yp.classNames;var S$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},oa=new WeakMap,Ld=new WeakMap,Md={},Um=0,Hk=function(t){return t&&(t.host||Hk(t.parentNode))},C$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Hk(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},I$=function(t,e,n,r){var s=C$(e,Array.isArray(t)?t:[t]);Md[n]||(Md[n]=new WeakMap);var i=Md[n],o=[],a=new Set,c=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",p=(oa.get(m)||0)+1,_=(i.get(m)||0)+1;oa.set(m,p),i.set(m,_),o.push(m),p===1&&v&&Ld.set(m,!0),_===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return h(e),a.clear(),Um++,function(){o.forEach(function(f){var m=oa.get(f)-1,g=i.get(f)-1;oa.set(f,m),i.set(f,g),m||(Ld.has(f)||f.removeAttribute(r),Ld.delete(f)),g||f.removeAttribute(n)}),Um--,Um||(oa=new WeakMap,oa=new WeakMap,Ld=new WeakMap,Md={})}},qk=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=S$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),I$(r,s,n,"aria-hidden")):function(){return null}},mw="Dialog",[Kk,Gk]=ur(mw),[N$,jr]=Kk(mw),Qk=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=b.useRef(null),c=b.useRef(null),[u=!1,h]=Ao({prop:r,defaultProp:s,onChange:i});return l.jsx(N$,{scope:e,triggerRef:a,contentRef:c,contentId:vi(),titleId:vi(),descriptionId:vi(),open:u,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};Qk.displayName=mw;var Yk="DialogTrigger",Xk=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jr(Yk,n),i=Ye(e,s.triggerRef);return l.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":vw(s.open),...r,ref:i,onClick:Te(t.onClick,s.onOpenToggle)})});Xk.displayName=Yk;var gw="DialogPortal",[A$,Zk]=Kk(gw,{forceMount:void 0}),Jk=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=jr(gw,e);return l.jsx(A$,{scope:e,forceMount:n,children:b.Children.map(r,o=>l.jsx(dr,{present:n||i.open,children:l.jsx(Df,{asChild:!0,container:s,children:o})}))})};Jk.displayName=gw;var ff="DialogOverlay",eR=b.forwardRef((t,e)=>{const n=Zk(ff,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=jr(ff,t.__scopeDialog);return i.modal?l.jsx(dr,{present:r||i.open,children:l.jsx(R$,{...s,ref:e})}):null});eR.displayName=ff;var k$=ll("DialogOverlay.RemoveScroll"),R$=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jr(ff,n);return l.jsx(pw,{as:k$,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(Pe.div,{"data-state":vw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Uo="DialogContent",tR=b.forwardRef((t,e)=>{const n=Zk(Uo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=jr(Uo,t.__scopeDialog);return l.jsx(dr,{present:r||i.open,children:i.modal?l.jsx(P$,{...s,ref:e}):l.jsx(j$,{...s,ref:e})})});tR.displayName=Uo;var P$=b.forwardRef((t,e)=>{const n=jr(Uo,t.__scopeDialog),r=b.useRef(null),s=Ye(e,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return qk(i)},[]),l.jsx(nR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Te(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:Te(t.onFocusOutside,i=>i.preventDefault())})}),j$=b.forwardRef((t,e)=>{const n=jr(Uo,t.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return l.jsx(nR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),nR=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=jr(Uo,n),c=b.useRef(null),u=Ye(e,c);return Mk(),l.jsxs(l.Fragment,{children:[l.jsx(fw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(Eu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":vw(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(O$,{titleId:a.titleId}),l.jsx(M$,{contentRef:c,descriptionId:a.descriptionId})]})]})}),yw="DialogTitle",rR=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jr(yw,n);return l.jsx(Pe.h2,{id:s.titleId,...r,ref:e})});rR.displayName=yw;var sR="DialogDescription",iR=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jr(sR,n);return l.jsx(Pe.p,{id:s.descriptionId,...r,ref:e})});iR.displayName=sR;var oR="DialogClose",aR=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=jr(oR,n);return l.jsx(Pe.button,{type:"button",...r,ref:e,onClick:Te(t.onClick,()=>s.onOpenChange(!1))})});aR.displayName=oR;function vw(t){return t?"open":"closed"}var lR="DialogTitleWarning",[D$,cR]=RL(lR,{contentName:Uo,titleName:yw,docsSlug:"dialog"}),O$=({titleId:t})=>{const e=cR(lR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},L$="DialogDescriptionWarning",M$=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cR(L$).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},uR=Qk,dR=Xk,hR=Jk,ww=eR,_w=tR,xw=rR,Ew=iR,bw=aR;const An=uR,vp=dR,V$=hR,fR=b.forwardRef(({className:t,...e},n)=>l.jsx(ww,{ref:n,className:Ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));fR.displayName=ww.displayName;const _n=b.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(V$,{children:[l.jsx(fR,{}),l.jsxs(_w,{ref:r,className:Ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,l.jsxs(bw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(bl,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_n.displayName=_w.displayName;const Fi=({className:t,...e})=>l.jsx("div",{className:Ne("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Fi.displayName="DialogHeader";const pR=({className:t,...e})=>l.jsx("div",{className:Ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});pR.displayName="DialogFooter";const cr=b.forwardRef(({className:t,...e},n)=>l.jsx(xw,{ref:n,className:Ne("text-lg font-semibold leading-none tracking-tight",t),...e}));cr.displayName=xw.displayName;const zo=b.forwardRef(({className:t,...e},n)=>l.jsx(Ew,{ref:n,className:Ne("text-sm text-muted-foreground",t),...e}));zo.displayName=Ew.displayName;function My(t,[e,n]){return Math.min(n,Math.max(e,t))}var F$=b.createContext(void 0);function wp(t){const e=b.useContext(F$);return t||e||"ltr"}function mR(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var U$=[" ","Enter","ArrowUp","ArrowDown"],z$=[" ","Enter"],Vu="Select",[_p,xp,B$]=qv(Vu),[Dl,OW]=ur(Vu,[B$,zf]),Ep=zf(),[$$,Qi]=Dl(Vu),[W$,H$]=Dl(Vu),gR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:g,form:v}=t,p=Ep(e),[_,y]=b.useState(null),[w,x]=b.useState(null),[I,R]=b.useState(!1),L=wp(u),[S=!1,T]=Ao({prop:r,defaultProp:s,onChange:i}),[C,j]=Ao({prop:o,defaultProp:a,onChange:c}),M=b.useRef(null),P=_?v||!!_.closest("form"):!0,[D,A]=b.useState(new Set),H=Array.from(D).map(se=>se.props.value).join(";");return l.jsx(_3,{...p,children:l.jsxs($$,{required:g,scope:e,trigger:_,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:I,onValueNodeHasChildrenChange:R,contentId:vi(),value:C,onValueChange:j,open:S,onOpenChange:T,dir:L,triggerPointerDownPosRef:M,disabled:m,children:[l.jsx(_p.Provider,{scope:e,children:l.jsx(W$,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(se=>{A(X=>new Set(X).add(se))},[]),onNativeOptionRemove:b.useCallback(se=>{A(X=>{const U=new Set(X);return U.delete(se),U})},[]),children:n})}),P?l.jsxs(zR,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:se=>j(se.target.value),disabled:m,form:v,children:[C===void 0?l.jsx("option",{value:""}):null,Array.from(D)]},H):null]})})};gR.displayName=Vu;var yR="SelectTrigger",vR=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Ep(n),o=Qi(yR,n),a=o.disabled||r,c=Ye(e,o.onTriggerChange),u=xp(n),h=b.useRef("touch"),[f,m,g]=BR(p=>{const _=u().filter(x=>!x.disabled),y=_.find(x=>x.value===o.value),w=$R(_,p,y);w!==void 0&&o.onValueChange(w.value)}),v=p=>{a||(o.onOpenChange(!0),g()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return l.jsx(uI,{asChild:!0,...i,children:l.jsx(Pe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":UR(o.value)?"":void 0,...s,ref:c,onClick:Te(s.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&v(p)}),onPointerDown:Te(s.onPointerDown,p=>{h.current=p.pointerType;const _=p.target;_.hasPointerCapture(p.pointerId)&&_.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:Te(s.onKeyDown,p=>{const _=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(_&&p.key===" ")&&U$.includes(p.key)&&(v(),p.preventDefault())})})})});vR.displayName=yR;var wR="SelectValue",_R=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,c=Qi(wR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ye(e,c.onValueNodeChange);return Dt(()=>{u(h)},[u,h]),l.jsx(Pe.span,{...a,ref:f,style:{pointerEvents:"none"},children:UR(c.value)?l.jsx(l.Fragment,{children:o}):i})});_R.displayName=wR;var q$="SelectIcon",xR=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return l.jsx(Pe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});xR.displayName=q$;var K$="SelectPortal",ER=t=>l.jsx(Df,{asChild:!0,...t});ER.displayName=K$;var Bo="SelectContent",bR=b.forwardRef((t,e)=>{const n=Qi(Bo,t.__scopeSelect),[r,s]=b.useState();if(Dt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ho.createPortal(l.jsx(TR,{scope:t.__scopeSelect,children:l.jsx(_p.Slot,{scope:t.__scopeSelect,children:l.jsx("div",{children:t.children})})}),i):null}return l.jsx(SR,{...t,ref:e})});bR.displayName=Bo;var yr=10,[TR,Yi]=Dl(Bo),G$="SelectContentImpl",Q$=ll("SelectContent.RemoveScroll"),SR=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:p,avoidCollisions:_,...y}=t,w=Qi(Bo,n),[x,I]=b.useState(null),[R,L]=b.useState(null),S=Ye(e,fe=>I(fe)),[T,C]=b.useState(null),[j,M]=b.useState(null),P=xp(n),[D,A]=b.useState(!1),H=b.useRef(!1);b.useEffect(()=>{if(x)return qk(x)},[x]),Mk();const se=b.useCallback(fe=>{const[ee,...ye]=P().map(Ae=>Ae.ref.current),[xe]=ye.slice(-1),be=document.activeElement;for(const Ae of fe)if(Ae===be||(Ae==null||Ae.scrollIntoView({block:"nearest"}),Ae===ee&&R&&(R.scrollTop=0),Ae===xe&&R&&(R.scrollTop=R.scrollHeight),Ae==null||Ae.focus(),document.activeElement!==be))return},[P,R]),X=b.useCallback(()=>se([T,x]),[se,T,x]);b.useEffect(()=>{D&&X()},[D,X]);const{onOpenChange:U,triggerPointerDownPosRef:z}=w;b.useEffect(()=>{if(x){let fe={x:0,y:0};const ee=xe=>{var be,Ae;fe={x:Math.abs(Math.round(xe.pageX)-(((be=z.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((Ae=z.current)==null?void 0:Ae.y)??0))}},ye=xe=>{fe.x<=10&&fe.y<=10?xe.preventDefault():x.contains(xe.target)||U(!1),document.removeEventListener("pointermove",ee),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",ye,{capture:!0})}}},[x,U,z]),b.useEffect(()=>{const fe=()=>U(!1);return window.addEventListener("blur",fe),window.addEventListener("resize",fe),()=>{window.removeEventListener("blur",fe),window.removeEventListener("resize",fe)}},[U]);const[Z,W]=BR(fe=>{const ee=P().filter(be=>!be.disabled),ye=ee.find(be=>be.ref.current===document.activeElement),xe=$R(ee,fe,ye);xe&&setTimeout(()=>xe.ref.current.focus())}),q=b.useCallback((fe,ee,ye)=>{const xe=!H.current&&!ye;(w.value!==void 0&&w.value===ee||xe)&&(C(fe),xe&&(H.current=!0))},[w.value]),le=b.useCallback(()=>x==null?void 0:x.focus(),[x]),ce=b.useCallback((fe,ee,ye)=>{const xe=!H.current&&!ye;(w.value!==void 0&&w.value===ee||xe)&&M(fe)},[w.value]),oe=r==="popper"?Vy:CR,Se=oe===Vy?{side:a,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:p,avoidCollisions:_}:{};return l.jsx(TR,{scope:n,content:x,viewport:R,onViewportChange:L,itemRefCallback:q,selectedItem:T,onItemLeave:le,itemTextRefCallback:ce,focusSelectedItem:X,selectedItemText:j,position:r,isPositioned:D,searchRef:Z,children:l.jsx(pw,{as:Q$,allowPinchZoom:!0,children:l.jsx(fw,{asChild:!0,trapped:w.open,onMountAutoFocus:fe=>{fe.preventDefault()},onUnmountAutoFocus:Te(s,fe=>{var ee;(ee=w.trigger)==null||ee.focus({preventScroll:!0}),fe.preventDefault()}),children:l.jsx(Eu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:fe=>fe.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:l.jsx(oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:fe=>fe.preventDefault(),...y,...Se,onPlaced:()=>A(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Te(y.onKeyDown,fe=>{const ee=fe.ctrlKey||fe.altKey||fe.metaKey;if(fe.key==="Tab"&&fe.preventDefault(),!ee&&fe.key.length===1&&W(fe.key),["ArrowUp","ArrowDown","Home","End"].includes(fe.key)){let xe=P().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(fe.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(fe.key)){const be=fe.target,Ae=xe.indexOf(be);xe=xe.slice(Ae+1)}setTimeout(()=>se(xe)),fe.preventDefault()}})})})})})})});SR.displayName=G$;var Y$="SelectItemAlignedPosition",CR=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Qi(Bo,n),o=Yi(Bo,n),[a,c]=b.useState(null),[u,h]=b.useState(null),f=Ye(e,S=>h(S)),m=xp(n),g=b.useRef(!1),v=b.useRef(!0),{viewport:p,selectedItem:_,selectedItemText:y,focusSelectedItem:w}=o,x=b.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&p&&_&&y){const S=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),j=y.getBoundingClientRect();if(i.dir!=="rtl"){const be=j.left-T.left,Ae=C.left-be,Be=S.left-Ae,k=S.width+Be,$=Math.max(k,T.width),K=window.innerWidth-yr,O=My(Ae,[yr,Math.max(yr,K-$)]);a.style.minWidth=k+"px",a.style.left=O+"px"}else{const be=T.right-j.right,Ae=window.innerWidth-C.right-be,Be=window.innerWidth-S.right-Ae,k=S.width+Be,$=Math.max(k,T.width),K=window.innerWidth-yr,O=My(Ae,[yr,Math.max(yr,K-$)]);a.style.minWidth=k+"px",a.style.right=O+"px"}const M=m(),P=window.innerHeight-yr*2,D=p.scrollHeight,A=window.getComputedStyle(u),H=parseInt(A.borderTopWidth,10),se=parseInt(A.paddingTop,10),X=parseInt(A.borderBottomWidth,10),U=parseInt(A.paddingBottom,10),z=H+se+D+U+X,Z=Math.min(_.offsetHeight*5,z),W=window.getComputedStyle(p),q=parseInt(W.paddingTop,10),le=parseInt(W.paddingBottom,10),ce=S.top+S.height/2-yr,oe=P-ce,Se=_.offsetHeight/2,fe=_.offsetTop+Se,ee=H+se+fe,ye=z-ee;if(ee<=ce){const be=M.length>0&&_===M[M.length-1].ref.current;a.style.bottom="0px";const Ae=u.clientHeight-p.offsetTop-p.offsetHeight,Be=Math.max(oe,Se+(be?le:0)+Ae+X),k=ee+Be;a.style.height=k+"px"}else{const be=M.length>0&&_===M[0].ref.current;a.style.top="0px";const Be=Math.max(ce,H+p.offsetTop+(be?q:0)+Se)+ye;a.style.height=Be+"px",p.scrollTop=ee-ce+p.offsetTop}a.style.margin=`${yr}px 0`,a.style.minHeight=Z+"px",a.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,a,u,p,_,y,i.dir,r]);Dt(()=>x(),[x]);const[I,R]=b.useState();Dt(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const L=b.useCallback(S=>{S&&v.current===!0&&(x(),w==null||w(),v.current=!1)},[x,w]);return l.jsx(Z$,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:L,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:l.jsx(Pe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});CR.displayName=Y$;var X$="SelectPopperPosition",Vy=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=yr,...i}=t,o=Ep(n);return l.jsx(dI,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vy.displayName=X$;var[Z$,Tw]=Dl(Bo,{}),Fy="SelectViewport",IR=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Yi(Fy,n),o=Tw(Fy,n),a=Ye(e,i.onViewportChange),c=b.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(_p.Slot,{scope:n,children:l.jsx(Pe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Te(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const v=window.innerHeight-yr*2,p=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),y=Math.max(p,_);if(y<v){const w=y+g,x=Math.min(v,w),I=w-x;f.style.height=x+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});IR.displayName=Fy;var NR="SelectGroup",[J$,e7]=Dl(NR),t7=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=vi();return l.jsx(J$,{scope:n,id:s,children:l.jsx(Pe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});t7.displayName=NR;var AR="SelectLabel",kR=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=e7(AR,n);return l.jsx(Pe.div,{id:s.id,...r,ref:e})});kR.displayName=AR;var pf="SelectItem",[n7,RR]=Dl(pf),PR=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Qi(pf,n),c=Yi(pf,n),u=a.value===r,[h,f]=b.useState(i??""),[m,g]=b.useState(!1),v=Ye(e,w=>{var x;return(x=c.itemRefCallback)==null?void 0:x.call(c,w,r,s)}),p=vi(),_=b.useRef("touch"),y=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(n7,{scope:n,value:r,disabled:s,textId:p,isSelected:u,onItemTextChange:b.useCallback(w=>{f(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:l.jsx(_p.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:l.jsx(Pe.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:v,onFocus:Te(o.onFocus,()=>g(!0)),onBlur:Te(o.onBlur,()=>g(!1)),onClick:Te(o.onClick,()=>{_.current!=="mouse"&&y()}),onPointerUp:Te(o.onPointerUp,()=>{_.current==="mouse"&&y()}),onPointerDown:Te(o.onPointerDown,w=>{_.current=w.pointerType}),onPointerMove:Te(o.onPointerMove,w=>{var x;_.current=w.pointerType,s?(x=c.onItemLeave)==null||x.call(c):_.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=c.onItemLeave)==null||x.call(c))}),onKeyDown:Te(o.onKeyDown,w=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&w.key===" "||(z$.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});PR.displayName=pf;var mc="SelectItemText",jR=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Qi(mc,n),a=Yi(mc,n),c=RR(mc,n),u=H$(mc,n),[h,f]=b.useState(null),m=Ye(e,y=>f(y),c.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,c.value,c.disabled)}),g=h==null?void 0:h.textContent,v=b.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:p,onNativeOptionRemove:_}=u;return Dt(()=>(p(v),()=>_(v)),[p,_,v]),l.jsxs(l.Fragment,{children:[l.jsx(Pe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ho.createPortal(i.children,o.valueNode):null]})});jR.displayName=mc;var DR="SelectItemIndicator",OR=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return RR(DR,n).isSelected?l.jsx(Pe.span,{"aria-hidden":!0,...r,ref:e}):null});OR.displayName=DR;var Uy="SelectScrollUpButton",LR=b.forwardRef((t,e)=>{const n=Yi(Uy,t.__scopeSelect),r=Tw(Uy,t.__scopeSelect),[s,i]=b.useState(!1),o=Ye(e,r.onScrollButtonChange);return Dt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(VR,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});LR.displayName=Uy;var zy="SelectScrollDownButton",MR=b.forwardRef((t,e)=>{const n=Yi(zy,t.__scopeSelect),r=Tw(zy,t.__scopeSelect),[s,i]=b.useState(!1),o=Ye(e,r.onScrollButtonChange);return Dt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?l.jsx(VR,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=n;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});MR.displayName=zy;var VR=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Yi("SelectScrollButton",n),o=b.useRef(null),a=xp(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),Dt(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),l.jsx(Pe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Te(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Te(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Te(s.onPointerLeave,()=>{c()})})}),r7="SelectSeparator",FR=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return l.jsx(Pe.div,{"aria-hidden":!0,...r,ref:e})});FR.displayName=r7;var By="SelectArrow",s7=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Ep(n),i=Qi(By,n),o=Yi(By,n);return i.open&&o.position==="popper"?l.jsx(hI,{...s,...r,ref:e}):null});s7.displayName=By;function UR(t){return t===""||t===void 0}var zR=b.forwardRef((t,e)=>{const{value:n,...r}=t,s=b.useRef(null),i=Ye(e,s),o=mR(n);return b.useEffect(()=>{const a=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(f)}},[o,n]),l.jsx(bu,{asChild:!0,children:l.jsx("select",{...r,ref:i,defaultValue:n})})});zR.displayName="BubbleSelect";function BR(t){const e=bt(t),n=b.useRef(""),r=b.useRef(0),s=b.useCallback(o=>{const a=n.current+o;e(a),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(a)},[e]),i=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function $R(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=i7(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function i7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var o7=gR,WR=vR,a7=_R,l7=xR,c7=ER,HR=bR,u7=IR,qR=kR,KR=PR,d7=jR,h7=OR,GR=LR,QR=MR,YR=FR;const dn=o7,hn=a7,Yt=b.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(WR,{ref:r,className:Ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,l.jsx(l7,{asChild:!0,children:l.jsx(kC,{className:"h-4 w-4 opacity-50"})})]}));Yt.displayName=WR.displayName;const XR=b.forwardRef(({className:t,...e},n)=>l.jsx(GR,{ref:n,className:Ne("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(b4,{className:"h-4 w-4"})}));XR.displayName=GR.displayName;const ZR=b.forwardRef(({className:t,...e},n)=>l.jsx(QR,{ref:n,className:Ne("flex cursor-default items-center justify-center py-1",t),...e,children:l.jsx(kC,{className:"h-4 w-4"})}));ZR.displayName=QR.displayName;const Xt=b.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>l.jsx(c7,{children:l.jsxs(HR,{ref:s,className:Ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[l.jsx(XR,{}),l.jsx(u7,{className:Ne("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(ZR,{})]})}));Xt.displayName=HR.displayName;const f7=b.forwardRef(({className:t,...e},n)=>l.jsx(qR,{ref:n,className:Ne("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));f7.displayName=qR.displayName;const Fe=b.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(KR,{ref:r,className:Ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(h7,{children:l.jsx(ko,{className:"h-4 w-4"})})}),l.jsx(d7,{children:e})]}));Fe.displayName=KR.displayName;const p7=b.forwardRef(({className:t,...e},n)=>l.jsx(YR,{ref:n,className:Ne("-mx-1 my-1 h-px bg-muted",t),...e}));p7.displayName=YR.displayName;const m7=Mf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function or({className:t,variant:e,...n}){return l.jsx("div",{className:Ne(m7({variant:e}),t),...n})}function g7({onCapture:t,isOpen:e,onClose:n,title:r,branchName:s}){const i=b.useRef(null),o=b.useRef(null),[a,c]=b.useState(null),[u,h]=b.useState(null),[f,m]=b.useState(!1),{toast:g}=Gn(),v=b.useCallback(async()=>{try{const R=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}});c(R),i.current&&(i.current.srcObject=R)}catch(R){console.error("Error accessing camera:",R),g({title:"Camera Error",description:"Unable to access camera. Please check permissions.",variant:"destructive"})}},[g]),p=b.useCallback(()=>{a&&(a.getTracks().forEach(R=>R.stop()),c(null))},[a]),_=b.useCallback(()=>{if(!i.current||!o.current)return;const R=i.current,L=o.current,S=L.getContext("2d");S&&(L.width=R.videoWidth,L.height=R.videoHeight,S.drawImage(R,0,0),L.toBlob(T=>{if(T){const C=URL.createObjectURL(T);h(C),m(!0)}},"image/jpeg",.8))},[]),y=b.useCallback(()=>{!o.current||!u||o.current.toBlob(R=>{if(R){const L=new Date().toISOString();t(R,L),h(null),m(!1),p(),n()}},"image/jpeg",.8)},[u,t,p,n]),w=b.useCallback(()=>{h(null),m(!1)},[]),x=b.useCallback(()=>{p(),h(null),m(!1),n()},[p,n]),I=b.useCallback(R=>{R?v():x()},[v,x]);return b.useEffect(()=>{e&&v()},[e,v]),l.jsx(An,{open:e,onOpenChange:I,children:l.jsxs(_n,{className:"max-w-lg","aria-describedby":"camera-description",children:[l.jsx(Fi,{children:l.jsx(cr,{children:r})}),l.jsx("p",{id:"camera-description",className:"sr-only",children:"Camera interface for capturing delivery photos with timestamp overlay"}),l.jsx("div",{className:"space-y-4",children:f?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"relative rounded-lg overflow-hidden",children:l.jsx("img",{src:u||"",alt:"Captured",className:"w-full h-48 object-cover","data-testid":"captured-image"})}),l.jsxs("div",{className:"flex justify-center space-x-2",children:[l.jsxs(we,{onClick:y,className:"bg-green-500 hover:bg-green-600","data-testid":"button-confirm-photo",children:[l.jsx(ko,{className:"w-5 h-5 mr-2"}),"Use Photo"]}),l.jsxs(we,{variant:"outline",onClick:w,"data-testid":"button-retake-photo",children:[l.jsx(ey,{className:"w-5 h-5 mr-2"}),"Retake"]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden",children:l.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-48 object-cover","data-testid":"camera-video"})}),l.jsxs("div",{className:"flex justify-center space-x-2",children:[l.jsxs(we,{onClick:_,disabled:!a,className:"bg-orange-500 hover:bg-orange-600","data-testid":"button-capture-photo",children:[l.jsx(AC,{className:"w-5 h-5 mr-2"}),"Capture Photo"]}),l.jsxs(we,{variant:"outline",onClick:x,"data-testid":"button-cancel-camera",children:[l.jsx(bl,{className:"w-5 h-5 mr-2"}),"Cancel"]})]})]})}),l.jsx("canvas",{ref:o,className:"hidden"})]})})}function fh({onCapture:t,className:e,children:n,title:r="Take Photo",branchName:s}){const[i,o]=b.useState(!1),a=()=>{o(!0)},c=()=>{o(!1)},u=(h,f)=>{t(h,f),o(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(we,{onClick:a,className:e,"data-testid":"button-take-photo",children:n}),l.jsx(g7,{isOpen:i,onClose:c,onCapture:u,title:r,branchName:s})]})}async function JR(t,e){const{branchName:n,timestamp:r,extraLine1:s,extraLine2:i}=e;return new Promise((o,a)=>{const c=new Image;c.onload=()=>{try{const h=document.createElement("canvas"),f=h.getContext("2d");if(!f){a(new Error("Canvas context not available"));return}h.width=c.width,h.height=c.height,f.drawImage(c,0,0);const m=r instanceof Date?r.toLocaleString():r.toDate().toLocaleString(),g=[`Branch: ${n}`,`Time: ${m}`];s&&g.push(s),i&&g.push(i);const v=Math.max(12,Math.min(c.width/40,16));f.font=`${v}px Arial, sans-serif`,f.fillStyle="white",f.textAlign="left",f.textBaseline="top";const p=v*1.2,_=8,w=Math.max(...g.map(S=>f.measureText(S).width))+_*2,x=g.length*p+_*2,I=c.width-w-10,R=c.height-x-10;f.fillStyle="rgba(0, 0, 0, 0.7)",f.shadowColor="rgba(0, 0, 0, 0.5)",f.shadowBlur=4,f.shadowOffsetX=2,f.shadowOffsetY=2,((S,T,C,j,M)=>{f.beginPath(),f.moveTo(S+M,T),f.lineTo(S+C-M,T),f.quadraticCurveTo(S+C,T,S+C,T+M),f.lineTo(S+C,T+j-M),f.quadraticCurveTo(S+C,T+j,S+C-M,T+j),f.lineTo(S+M,T+j),f.quadraticCurveTo(S,T+j,S,T+j-M),f.lineTo(S,T+M),f.quadraticCurveTo(S,T,S+M,T),f.closePath(),f.fill()})(I,R,w,x,4),f.shadowColor="transparent",f.shadowBlur=0,f.shadowOffsetX=0,f.shadowOffsetY=0,f.fillStyle="white",g.forEach((S,T)=>{f.fillText(S,I+_,R+_+T*p)}),h.toBlob(S=>{if(!S){a(new Error("Failed to create blob from canvas"));return}const T=new File([S],t.name.replace(/\.(jpg|jpeg|png)$/i,"_watermarked.jpg"),{type:"image/jpeg",lastModified:Date.now()});T.size>300*1024?h.toBlob(C=>{if(!C){a(new Error("Failed to create compressed blob"));return}const j=new File([C],t.name.replace(/\.(jpg|jpeg|png)$/i,"_watermarked.jpg"),{type:"image/jpeg",lastModified:Date.now()});o(j)},"image/jpeg",.7):o(T)},"image/jpeg",.9)}catch(h){a(h)}},c.onerror=()=>{a(new Error("Failed to load image"))};const u=new FileReader;u.onload=h=>{var f;(f=h.target)!=null&&f.result?c.src=h.target.result:a(new Error("Failed to read file"))},u.onerror=()=>{a(new Error("Failed to read file"))},u.readAsDataURL(t)})}function e2(){return new Date}function y7({onClose:t}){var m;const{toast:e}=Gn();qo();const[n,r]=b.useState(1),[s,i]=b.useState({oilTypeId:"",totalLoadedLiters:0,loadMeterReading:0,loadLocationId:""}),{data:o=[]}=Fh({queryKey:["oil-types"],queryFn:uw}),{data:a=[]}=Fh({queryKey:["branches"],queryFn:dw}),c=[{id:1,title:"Complete Tank Loading",status:n===1?"active":n>1?"completed":"pending"}],u=async(g,v)=>{try{const p=new File([g],`${v}_${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),_=a.find(R=>R.id===s.loadLocationId),y=(_==null?void 0:_.name)||"Loading Location",w=await JR(p,{branchName:y,timestamp:e2(),extraLine2:"Oil Type: Loading"}),x=new Blob([w],{type:"image/jpeg"}),I=await vk(x,"loading-photos");i(R=>({...R,[`${v}Photo`]:I})),e({title:"Photo Captured",description:`${v} photo saved successfully with watermark`})}catch(p){console.error("Photo upload error:",p),e({title:"Photo Saved Locally",description:"Photo captured and saved for demo",variant:"default"})}},h=async()=>{var g;try{if(!s.oilTypeId||!s.totalLoadedLiters){e({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}const v={oilTypeId:s.oilTypeId,oilTypeName:((g=o.find(_=>_.id===s.oilTypeId))==null?void 0:g.name)||"Unknown Oil Type",totalLoadedLiters:s.totalLoadedLiters,loadMeterReading:s.loadMeterReading,loadLocationId:s.loadLocationId||"Main Depot",meterReadingPhoto:s.meterReadingPhoto||null},p=await TB(v);e({title:"Load Session Created",description:`Successfully loaded ${s.totalLoadedLiters}L of ${v.oilTypeName}. Session ID: ${p.loadSessionId}`}),i({oilTypeId:"",totalLoadedLiters:0,loadMeterReading:0,loadLocationId:""}),r(1),t()}catch(v){console.error("Load session creation error:",v),e({title:"Loading Failed",description:"Failed to create load session. Please try again.",variant:"destructive"})}},f=()=>s.oilTypeId&&s.totalLoadedLiters>0&&s.loadMeterReading>0&&s.meterReadingPhoto;return l.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tank Loading Process"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Load oil into tank truck and create load session"})]}),l.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:c.map((g,v)=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-2 ${g.status==="completed"?"bg-green-500 border-green-500 text-white":g.status==="active"?"bg-orange-500 border-orange-500 text-white":"bg-gray-200 border-gray-300 text-gray-600"}`,children:g.status==="completed"?l.jsx(ko,{className:"w-6 h-6"}):l.jsx("span",{className:"text-sm font-medium",children:g.id})}),l.jsx("span",{className:`ml-2 text-sm font-medium ${g.status==="active"?"text-orange-600":"text-gray-600"}`,children:g.title}),v<c.length-1&&l.jsx("div",{className:`w-12 h-0.5 mx-4 ${g.status==="completed"?"bg-green-500":"bg-gray-300"}`})]},g.id))}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center gap-2",children:[l.jsx(Zc,{className:"w-5 h-5 text-orange-500"}),"Complete Tank Loading"]})}),l.jsxs(qe,{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"oilType",children:"Oil Type *"}),l.jsxs(dn,{value:s.oilTypeId,onValueChange:g=>i(v=>({...v,oilTypeId:g})),children:[l.jsx(Yt,{"data-testid":"select-oil-type",children:l.jsx(hn,{placeholder:"Select oil type"})}),l.jsx(Xt,{children:o.map(g=>l.jsx(Fe,{value:g.id,"data-testid":`oil-type-${g.id}`,children:g.name},g.id))})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"totalLiters",children:"Total Loaded (Liters) *"}),l.jsx(tt,{"data-testid":"input-total-liters",type:"number",placeholder:"Enter total loaded liters",value:s.totalLoadedLiters===0?"":s.totalLoadedLiters,onChange:g=>i(v=>({...v,totalLoadedLiters:Number(g.target.value)||0}))})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"meterReading",children:"Load Meter Reading *"}),l.jsx(tt,{"data-testid":"input-meter-reading",type:"number",placeholder:"Enter meter reading",value:s.loadMeterReading===0?"":s.loadMeterReading,onChange:g=>i(v=>({...v,loadMeterReading:Number(g.target.value)||0}))})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"loadLocation",children:"Load Location (Optional)"}),l.jsxs(dn,{value:s.loadLocationId,onValueChange:g=>i(v=>({...v,loadLocationId:g})),children:[l.jsx(Yt,{"data-testid":"select-load-location",children:l.jsx(hn,{placeholder:"Select location"})}),l.jsx(Xt,{children:a.map(g=>l.jsx(Fe,{value:g.id,"data-testid":`location-${g.id}`,children:g.name},g.id))})]})]})]}),l.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:l.jsxs("div",{className:"text-center",children:[l.jsx(AC,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Main Tanker Meter Reading Photo *"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Capture the meter reading during loading"}),l.jsxs(fh,{onCapture:(g,v)=>u(g,"meterReading"),className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2",title:"Main Tanker Meter Reading Photo",branchName:((m=a.find(g=>g.id===s.loadLocationId))==null?void 0:m.name)||"Loading Location",children:[l.jsx(zh,{className:"w-4 h-4 mr-2"}),"Take Meter Reading Photo"]}),s.meterReadingPhoto&&l.jsx("div",{className:"mt-4",children:l.jsxs(or,{variant:"default",className:"bg-green-100 text-green-800",children:[l.jsx(ko,{className:"w-4 h-4 mr-1"}),"Photo Captured"]})})]})}),l.jsx("div",{className:"flex justify-end",children:l.jsxs(we,{onClick:h,disabled:!f(),className:"bg-green-600 hover:bg-green-700 px-8","data-testid":"button-create-load-session",children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Create Load Session"]})})]})]})]})}function v7({onClose:t}){const{toast:e}=Gn(),{userData:n}=qo(),[r,s]=b.useState(1),[i,o]=b.useState({deliveryOrderNo:"",branchId:"",oilTypeId:"",startMeterReading:0,endMeterReading:0,oilSuppliedLiters:0}),[a,c]=b.useState(null);b.useEffect(()=>{(async()=>{try{const _=(await cw()).filter(y=>y.type==="supply"&&y.endMeterReading).sort((y,w)=>{var R,L;const x=new Date((R=y.timestamp)!=null&&R.toDate?y.timestamp.toDate():y.timestamp);return new Date((L=w.timestamp)!=null&&L.toDate?w.timestamp.toDate():w.timestamp).getTime()-x.getTime()});if(_.length>0){const y=_[0].endMeterReading;o(w=>({...w,startMeterReading:y}))}}catch(p){console.error("Error getting last meter reading:",p)}})()},[]);const{data:u=[]}=Fh({queryKey:["branches"],queryFn:dw}),{data:h=[]}=Fh({queryKey:["oil-types"],queryFn:uw}),f=[{id:1,title:"Complete Oil Supply",status:r===1?"active":r>1?"completed":"pending"}],m=async(v,p)=>{try{const _=new File([v],`${p}_${Date.now()}.jpg`,{type:"image/jpeg",lastModified:Date.now()}),y=a||u.find(S=>S.id===i.branchId),w=(y==null?void 0:y.name)||"Unknown Branch",x=(n==null?void 0:n.displayName)||"Unknown Driver",I=await JR(_,{branchName:w,timestamp:e2(),extraLine1:`Driver: ${x}`,extraLine2:"Oil Type: Supply"}),R=new Blob([I],{type:"image/jpeg"}),L=await vk(R,"delivery-photos");o(S=>({...S,[`${p}Photo`]:L})),e({title:"Photo Captured",description:`${p} photo saved successfully with watermark`})}catch(_){console.error("Photo upload error:",_);const y=URL.createObjectURL(v);o(w=>({...w,[`${p}Photo`]:y})),e({title:"Photo Saved Locally",description:"Photo captured and saved for demo",variant:"default"})}},g=async()=>{try{if(!i.oilSuppliedLiters||!i.branchId||!i.oilTypeId){e({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}if(i.startMeterReading>i.endMeterReading){e({title:"Invalid Meter Readings",description:"Start meter reading cannot be greater than finish meter reading",variant:"destructive"});return}console.log(`Supplying ${i.oilSuppliedLiters}L directly (no load session tracking)`);const v=h.find(x=>x.id===i.oilTypeId),p=u.find(x=>x.id===i.branchId),_={loadSessionId:`DIRECT_${Date.now()}`,deliveryOrderId:i.deliveryOrderNo||`DO_${Date.now()}`,branchId:i.branchId,branchName:(p==null?void 0:p.name)||"Unknown Branch",oilTypeId:i.oilTypeId,oilTypeName:(v==null?void 0:v.name)||"Unknown Oil Type",deliveredLiters:i.oilSuppliedLiters,startMeterReading:i.startMeterReading,endMeterReading:i.endMeterReading,photos:{tankLevelBefore:i.tankLevelPhoto||null,hoseConnection:i.hoseConnectionPhoto||null,tankLevelAfter:i.finalTankLevelPhoto||null},actualDeliveryStartTime:new Date,actualDeliveryEndTime:new Date,status:"completed"},y=await SB(_);console.log("Delivery transaction saved to Firestore:",y);const w=(a==null?void 0:a.name)||(p==null?void 0:p.name)||"Unknown Branch";console.log("✅ Transaction completed with correct branch watermarks:",w),e({title:"Delivery Completed",description:`Successfully delivered ${i.oilSuppliedLiters}L to ${w}`}),o({deliveryOrderNo:"",branchId:"",oilTypeId:"",startMeterReading:0,endMeterReading:0,oilSuppliedLiters:0}),c(null),s(1),t()}catch(v){console.error("Supply completion error:",v),e({title:"Supply Failed",description:"Failed to complete delivery. Please try again.",variant:"destructive"})}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 p-4",children:l.jsxs(Ue,{className:"max-w-2xl mx-auto",children:[l.jsxs(Mt,{className:"text-center bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-t-lg",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[l.jsx(Zc,{className:"w-8 h-8"}),l.jsx(Vt,{className:"text-2xl font-bold",children:"Oil Supply Workflow"})]}),l.jsx("div",{className:"flex justify-center space-x-4",children:f.map(v=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${v.status==="completed"?"bg-green-500":v.status==="active"?"bg-white text-orange-500":"bg-gray-300 text-gray-600"}`,children:v.status==="completed"?l.jsx(ko,{className:"w-4 h-4"}):v.id}),l.jsx("span",{className:"ml-2 text-sm",children:v.title})]},v.id))})]}),l.jsx(qe,{className:"p-6 space-y-6",children:r===1&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"deliveryOrder",children:"Delivery Order"}),l.jsx(tt,{id:"deliveryOrder",type:"text",value:i.deliveryOrderNo,onChange:v=>o(p=>({...p,deliveryOrderNo:v.target.value})),placeholder:"Enter delivery order number","data-testid":"input-delivery-order"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"branch",children:"Branch *"}),l.jsxs(dn,{value:i.branchId,onValueChange:v=>{console.log("Step 1 - Branch dropdown changed to:",v);const p=u.find(_=>_.id===v);if(console.log("Step 1 - Selected branch object:",p),p){const _={id:p.id,name:p.name,address:p.address};c(_),console.log("✓ STEP 1 - BRANCH DATA SAVED:",_)}o(_=>{const y={..._,branchId:v};return console.log("Step 1 - Updated supplyData:",y),y})},children:[l.jsx(Yt,{"data-testid":"select-branch",children:l.jsx(hn,{placeholder:"Select delivery branch"})}),l.jsx(Xt,{children:u.map(v=>l.jsx(Fe,{value:v.id,children:v.name},v.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"oilType",children:"Oil Type *"}),l.jsxs(dn,{value:i.oilTypeId,onValueChange:v=>o(p=>({...p,oilTypeId:v})),children:[l.jsx(Yt,{"data-testid":"select-oil-type",children:l.jsx(hn,{placeholder:"Select oil type"})}),l.jsx(Xt,{children:h.map(v=>l.jsxs(Fe,{value:v.id,children:[v.name," - ",v.viscosity]},v.id))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"oilSupplied",children:"Oil Supplied (Liters) *"}),l.jsx(tt,{id:"oilSupplied",type:"number",value:i.oilSuppliedLiters===0?"":i.oilSuppliedLiters,onChange:v=>o(p=>({...p,oilSuppliedLiters:Number(v.target.value)||0})),placeholder:"Enter liters supplied","data-testid":"input-oil-supplied",min:"1"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"startMeter",children:"Start Meter Reading (Auto-filled) *"}),l.jsx(tt,{id:"startMeter",type:"number",value:i.startMeterReading||"",onChange:v=>o(p=>({...p,startMeterReading:Number(v.target.value)})),placeholder:"Auto-filled from last supply","data-testid":"input-start-meter",className:"bg-blue-50"}),l.jsx("p",{className:"text-xs text-blue-600",children:"Auto-filled with last finished meter reading"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"endMeter",children:"End Meter Reading *"}),l.jsx(tt,{id:"endMeter",type:"number",value:i.endMeterReading===0?"":i.endMeterReading,onChange:v=>o(p=>({...p,endMeterReading:Number(v.target.value)||0})),placeholder:"Meter reading after supply","data-testid":"input-end-meter",className:i.startMeterReading>i.endMeterReading&&i.endMeterReading>0?"border-red-500":""}),i.startMeterReading>i.endMeterReading&&i.endMeterReading>0&&l.jsx("p",{className:"text-xs text-red-600 flex items-center",children:"⚠️ End meter reading must be greater than start meter reading"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs(fh,{onCapture:(v,p)=>m(v,"tankLevel"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Tank Level Before",branchName:(a==null?void 0:a.name)||"No Branch Selected",children:[l.jsx(zh,{className:"w-4 h-4 mr-2"}),"Tank Level Before"]}),i.tankLevelPhoto&&l.jsx(or,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs(fh,{onCapture:(v,p)=>m(v,"hoseConnection"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Hose Connection",branchName:(a==null?void 0:a.name)||"No Branch Selected",children:[l.jsx(Ni,{className:"w-4 h-4 mr-2"}),"Hose Connection"]}),i.hoseConnectionPhoto&&l.jsx(or,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs(fh,{onCapture:(v,p)=>m(v,"finalTankLevel"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2",title:"Tank Level After",branchName:(a==null?void 0:a.name)||"No Branch Selected",children:[l.jsx(zh,{className:"w-4 h-4 mr-2"}),"Tank Level After"]}),i.finalTankLevelPhoto&&l.jsx(or,{variant:"secondary",className:"mt-2",children:"Photo Captured"})]})]}),l.jsxs("div",{className:"flex justify-between pt-4",children:[l.jsx(we,{variant:"outline",onClick:t,children:"Cancel"}),l.jsxs(we,{onClick:g,className:"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600","data-testid":"button-complete-supply",children:[l.jsx(ko,{className:"w-4 h-4 mr-2"}),"Complete Supply"]})]})]})})]})})}function ob({user:t}){var ce,oe,Se,fe;const{logout:e}=qo(),{toast:n}=Gn(),[r,s]=b.useState(!1),[i,o]=b.useState(!1),[a,c]=b.useState([]),[u,h]=b.useState([]),[f,m]=b.useState(null),[g,v]=b.useState(!1),[p,_]=b.useState(null),[y,w]=b.useState([]),[x,I]=b.useState({}),[R,L]=b.useState([]),[S,T]=b.useState(null),[C,j]=b.useState(!1),[M,P]=b.useState(null),[D,A]=b.useState(!1);b.useEffect(()=>{H(),X(),se()},[t.id]);const H=async()=>{try{c([]),h([])}catch(ee){console.error("Error loading deliveries:",ee)}},se=async()=>{try{w([]),new Date().setHours(0,0,0,0),I({}),L([])}catch(ee){console.error("Error loading transactions:",ee)}},X=async()=>{try{_(t)}catch(ee){console.error("Error loading user profile:",ee)}},U=async()=>{await e()},z=()=>{s(!1),H(),se(),n({title:"Loading Complete",description:"Oil loading completed successfully"})},Z=()=>{o(!1),H(),se(),n({title:"Supply Complete",description:"Oil delivery completed successfully"})},W=ee=>{m(ee),v(!0)},q=ee=>{T(ee),j(!0)},le=Object.values(x).reduce((ee,ye)=>ee+ye,0);return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:l.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"OILDELIVERY"}),l.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Driver Dashboard"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:(p==null?void 0:p.displayName)||t.displayName||t.email}),l.jsx("p",{className:"text-xs text-gray-500",children:(p==null?void 0:p.email)||t.email})]}),l.jsxs(we,{onClick:U,variant:"outline",size:"sm",className:"flex items-center text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-logout",children:[l.jsx(Yv,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Logout"}),l.jsx("span",{className:"sm:hidden",children:"Exit"})]})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsx(Ue,{className:"hover:shadow-lg transition-shadow",children:l.jsxs(qe,{className:"p-8 text-center",children:[l.jsx("div",{className:"bg-blue-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(Zc,{className:"h-8 w-8 text-white"})}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Loading Oil"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Start loading oil from the main tank"}),l.jsx(we,{onClick:()=>s(!0),className:"w-full bg-blue-500 hover:bg-blue-600","data-testid":"button-start-loading",children:"Start Loading"})]})}),l.jsx(Ue,{className:"hover:shadow-lg transition-shadow",children:l.jsxs(qe,{className:"p-8 text-center",children:[l.jsx("div",{className:"bg-orange-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:l.jsx(Ni,{className:"h-8 w-8 text-white"})}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Supply Oil"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Deliver oil to customer locations"}),l.jsx(we,{onClick:()=>o(!0),className:"w-full bg-orange-500 hover:bg-orange-600","data-testid":"button-start-supply",children:"Start Supply"})]})})]}),l.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:l.jsxs(Ue,{children:[l.jsxs(Mt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[l.jsx(Vt,{className:"text-sm font-medium",children:"Today's Deliveries"}),l.jsx(Zc,{className:"h-4 w-4 text-muted-foreground"})]}),l.jsxs(qe,{children:[l.jsxs("div",{className:"text-2xl font-bold",children:[le.toLocaleString(),"L"]}),l.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:Object.keys(x).length>0?Object.entries(x).map(([ee,ye])=>l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:[ee,":"]}),l.jsxs("span",{className:"font-medium",children:[ye.toLocaleString(),"L"]})]},ee)):l.jsx("p",{children:"No deliveries completed today"})})]})]})}),u.length>0&&l.jsxs(Ue,{className:"mb-8",children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center gap-2",children:[l.jsx(cl,{className:"h-5 w-5"}),"Recent Deliveries (Last 3)"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:u.map((ee,ye)=>{var xe;return l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:ee.oilTypeName||"Unknown Oil Type"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[ee.loadedOilLiters,"L • Delivered to ",ee.branchName||"Unknown Branch"]}),l.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Ir,{className:"h-3 w-3"}),(xe=ee.completedTimestamp)!=null&&xe.toDate?ee.completedTimestamp.toDate().toLocaleDateString():"Unknown date"]})]}),l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>W(ee),className:"flex items-center gap-2","data-testid":`button-view-delivery-${ye}`,children:[l.jsx(zr,{className:"h-4 w-4"}),"View"]})]},ee.id||ye)})})})]}),l.jsxs(Ue,{className:"mb-8",children:[l.jsxs(Mt,{children:[l.jsxs(Vt,{className:"flex items-center gap-2",children:[l.jsx(cl,{className:"h-5 w-5"}),"Recent Transactions (Last 10)"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Complete history of loading and supply operations"})]}),l.jsx(qe,{children:R.length>0?l.jsx("div",{className:"space-y-3",children:R.map((ee,ye)=>{var xe,be;return l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${ee.type==="loading"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:ee.type==="loading"?"LOADING":"SUPPLY"}),l.jsx("span",{className:"font-medium",children:ee.oilTypeName||"Unknown Oil Type"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(xe=ee.quantity)==null?void 0:xe.toLocaleString(),"L",ee.type==="supply"&&ee.branchName&&l.jsxs(l.Fragment,{children:[" • Delivered to ",ee.branchName]})]}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ir,{className:"h-3 w-3"}),(be=ee.timestamp)!=null&&be.toDate?ee.timestamp.toDate().toLocaleString():"Unknown date"]}),ee.type==="supply"&&ee.branchName&&l.jsxs("div",{children:["Branch: ",ee.branchName]}),l.jsxs("div",{children:["Driver: ",(p==null?void 0:p.displayName)||t.displayName||t.email]})]})]}),l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>q(ee),className:"flex items-center gap-2","data-testid":`button-view-transaction-${ye}`,children:[l.jsx(zr,{className:"h-4 w-4"}),"View"]})]},ee.id||ye)})}):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx("p",{children:"No transaction history available"}),l.jsx("p",{className:"text-sm mt-2",children:"Start loading or supplying oil to see your transaction history"})]})})]})]}),l.jsx(An,{open:r,onOpenChange:s,children:l.jsx(_n,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:l.jsx(y7,{onClose:z})})}),l.jsx(An,{open:i,onOpenChange:o,children:l.jsx(_n,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:l.jsx(v7,{onClose:Z})})}),l.jsx(An,{open:g,onOpenChange:v,children:l.jsx(_n,{className:"max-w-2xl",children:f&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Delivery Details"}),l.jsx("div",{className:"text-sm text-gray-500",children:(ce=f.completedTimestamp)!=null&&ce.toDate?f.completedTimestamp.toDate().toLocaleDateString():"Unknown date"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),l.jsx("p",{className:"font-medium",children:f.oilTypeName||"Unknown"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),l.jsxs("p",{className:"font-medium",children:[f.loadedOilLiters,"L"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),l.jsx("p",{className:"font-medium",children:f.branchName||"Unknown Branch"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Delivery Order"}),l.jsx("p",{className:"font-medium",children:f.deliveryOrderNo||"N/A"})]})]}),(f.meterReadingPhoto||f.tankLevelPhoto||f.finalTankLevelPhoto)&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.meterReadingPhoto&&l.jsxs("div",{className:"text-center",children:[l.jsx("img",{src:f.meterReadingPhoto,alt:"Meter Reading",className:"w-full h-20 object-cover rounded border"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Meter Reading"})]}),f.tankLevelPhoto&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{P({url:f.tankLevelPhoto,label:"Tank Level Photo"}),A(!0)},children:[l.jsx("img",{src:f.tankLevelPhoto,alt:"Tank Level",className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:l.jsx(zr,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tank Level"})]}),f.finalTankLevelPhoto&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{P({url:f.finalTankLevelPhoto,label:"Final Tank Level Photo"}),A(!0)},children:[l.jsx("img",{src:f.finalTankLevelPhoto,alt:"Final Tank Level",className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:l.jsx(zr,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Final Tank Level"})]})]})]})]})})}),l.jsx(An,{open:C,onOpenChange:j,children:l.jsxs(_n,{className:"max-w-2xl",children:[l.jsx(cr,{children:"Transaction Details"}),l.jsx(zo,{children:"View detailed information about this transaction including photos and metadata"}),S&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Transaction Details"}),l.jsx("div",{className:"text-sm text-gray-500",children:(oe=S.timestamp)!=null&&oe.toDate?S.timestamp.toDate().toLocaleString():"Unknown date"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),l.jsx("p",{className:`font-medium ${S.type==="loading"?"text-blue-600":"text-orange-600"}`,children:S.type==="loading"?"Oil Loading":"Oil Supply"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),l.jsx("p",{className:"font-medium",children:S.oilTypeName||"Unknown"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),l.jsxs("p",{className:"font-medium",children:[(Se=S.quantity)==null?void 0:Se.toLocaleString(),"L"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driver"}),l.jsx("p",{className:"font-medium",children:(p==null?void 0:p.displayName)||t.displayName||t.email})]}),S.type==="supply"&&S.branchName&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),l.jsx("p",{className:"font-medium",children:S.branchName}),S.branchAddress&&l.jsx("p",{className:"text-sm text-gray-500",children:S.branchAddress})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Date & Time"}),l.jsx("p",{className:"font-medium",children:(fe=S.timestamp)!=null&&fe.toDate?S.timestamp.toDate().toLocaleString():"Unknown date"})]}),S.loadSessionId&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Load Session ID"}),l.jsx("p",{className:"font-medium text-xs",children:S.loadSessionId})]}),S.startMeterReading&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Start Meter Reading"}),l.jsx("p",{className:"font-medium",children:S.startMeterReading})]}),S.endMeterReading&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"End Meter Reading"}),l.jsx("p",{className:"font-medium",children:S.endMeterReading})]}),S.meterReading&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Meter Reading"}),l.jsx("p",{className:"font-medium",children:S.meterReading})]})]}),S.photos&&Object.keys(S.photos).length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(S.photos).map(([ee,ye])=>ye&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{P({url:ye,label:ee.replace(/([A-Z])/g," $1").trim()}),A(!0)},children:[l.jsx("img",{src:ye,alt:ee,className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:l.jsx(zr,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:ee.replace(/([A-Z])/g," $1").trim()})]},ee))})]})]})]})}),l.jsx(An,{open:D,onOpenChange:A,children:l.jsxs(_n,{className:"max-w-4xl w-full h-[90vh] p-0",children:[l.jsx(cr,{className:"sr-only",children:"Photo Viewer"}),l.jsxs(zo,{className:"sr-only",children:["Full size view of ",(M==null?void 0:M.label)||"delivery photo"]}),M&&l.jsxs("div",{className:"relative w-full h-full bg-black rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-medium",children:M.label}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(we,{variant:"ghost",size:"sm",onClick:()=>{const ee=document.createElement("a");ee.href=M.url,ee.download=`${M.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,ee.click()},className:"text-white hover:bg-white/20",children:[l.jsx(Uh,{className:"h-4 w-4 mr-1"}),"Download"]}),l.jsx(we,{variant:"ghost",size:"sm",onClick:()=>A(!1),className:"text-white hover:bg-white/20",children:l.jsx(bl,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:l.jsx("img",{src:M.url,alt:M.label,className:"max-w-full max-h-full object-contain",style:{maxHeight:"calc(100vh - 120px)"}})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-center space-x-4",children:[l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>window.open(M.url,"_blank"),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[l.jsx(zr,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>{const ee=document.createElement("a");ee.href=M.url,ee.download=`${M.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,ee.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[l.jsx(Uh,{className:"h-4 w-4 mr-1"}),"Download Photo"]})]})]})]})})]})}var zm="rovingFocusGroup.onEntryFocus",w7={bubbles:!1,cancelable:!0},bp="RovingFocusGroup",[$y,t2,_7]=qv(bp),[x7,n2]=ur(bp,[_7]),[E7,b7]=x7(bp),r2=b.forwardRef((t,e)=>l.jsx($y.Provider,{scope:t.__scopeRovingFocusGroup,children:l.jsx($y.Slot,{scope:t.__scopeRovingFocusGroup,children:l.jsx(T7,{...t,ref:e})})}));r2.displayName=bp;var T7=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=b.useRef(null),g=Ye(e,m),v=wp(i),[p=null,_]=Ao({prop:o,defaultProp:a,onChange:c}),[y,w]=b.useState(!1),x=bt(u),I=t2(n),R=b.useRef(!1),[L,S]=b.useState(0);return b.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(zm,x),()=>T.removeEventListener(zm,x)},[x]),l.jsx(E7,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:p,onItemFocus:b.useCallback(T=>_(T),[_]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>S(T=>T+1),[]),onFocusableItemRemove:b.useCallback(()=>S(T=>T-1),[]),children:l.jsx(Pe.div,{tabIndex:y||L===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:Te(t.onMouseDown,()=>{R.current=!0}),onFocus:Te(t.onFocus,T=>{const C=!R.current;if(T.target===T.currentTarget&&C&&!y){const j=new CustomEvent(zm,w7);if(T.currentTarget.dispatchEvent(j),!j.defaultPrevented){const M=I().filter(se=>se.focusable),P=M.find(se=>se.active),D=M.find(se=>se.id===p),H=[P,D,...M].filter(Boolean).map(se=>se.ref.current);o2(H,h)}}R.current=!1}),onBlur:Te(t.onBlur,()=>w(!1))})})}),s2="RovingFocusGroupItem",i2=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=vi(),c=i||a,u=b7(s2,n),h=u.currentTabStopId===c,f=t2(n),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return b.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),l.jsx($y.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:l.jsx(Pe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:Te(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:Te(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Te(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=I7(v,u.orientation,u.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=f().filter(w=>w.focusable).map(w=>w.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const w=y.indexOf(v.currentTarget);y=u.loop?N7(y,w+1):y.slice(w+1)}setTimeout(()=>o2(y))}})})})});i2.displayName=s2;var S7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function C7(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function I7(t,e,n){const r=C7(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return S7[r]}function o2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function N7(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var A7=r2,k7=i2,Sw="Tabs",[R7,LW]=ur(Sw,[n2]),a2=n2(),[P7,Cw]=R7(Sw),l2=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:c="automatic",...u}=t,h=wp(a),[f,m]=Ao({prop:r,onChange:s,defaultProp:i});return l.jsx(P7,{scope:n,baseId:vi(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:l.jsx(Pe.div,{dir:h,"data-orientation":o,...u,ref:e})})});l2.displayName=Sw;var c2="TabsList",u2=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Cw(c2,n),o=a2(n);return l.jsx(A7,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(Pe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});u2.displayName=c2;var d2="TabsTrigger",h2=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=Cw(d2,n),a=a2(n),c=m2(o.baseId,r),u=g2(o.baseId,r),h=r===o.value;return l.jsx(k7,{asChild:!0,...a,focusable:!s,active:h,children:l.jsx(Pe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Te(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Te(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Te(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});h2.displayName=d2;var f2="TabsContent",p2=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=Cw(f2,n),c=m2(a.baseId,r),u=g2(a.baseId,r),h=r===a.value,f=b.useRef(h);return b.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),l.jsx(dr,{present:s||h,children:({present:m})=>l.jsx(Pe.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});p2.displayName=f2;function m2(t,e){return`${t}-trigger-${e}`}function g2(t,e){return`${t}-content-${e}`}var j7=l2,y2=u2,v2=h2,w2=p2;const _2=j7,Iw=b.forwardRef(({className:t,...e},n)=>l.jsx(y2,{ref:n,className:Ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Iw.displayName=y2.displayName;const tr=b.forwardRef(({className:t,...e},n)=>l.jsx(v2,{ref:n,className:Ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));tr.displayName=v2.displayName;const nr=b.forwardRef(({className:t,...e},n)=>l.jsx(w2,{ref:n,className:Ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));nr.displayName=w2.displayName;var Nw="Checkbox",[D7,MW]=ur(Nw),[O7,L7]=D7(Nw),x2=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:c="on",onCheckedChange:u,form:h,...f}=t,[m,g]=b.useState(null),v=Ye(e,I=>g(I)),p=b.useRef(!1),_=m?h||!!m.closest("form"):!0,[y=!1,w]=Ao({prop:s,defaultProp:i,onChange:u}),x=b.useRef(y);return b.useEffect(()=>{const I=m==null?void 0:m.form;if(I){const R=()=>w(x.current);return I.addEventListener("reset",R),()=>I.removeEventListener("reset",R)}},[m,w]),l.jsxs(O7,{scope:n,state:y,disabled:a,children:[l.jsx(Pe.button,{type:"button",role:"checkbox","aria-checked":Si(y)?"mixed":y,"aria-required":o,"data-state":T2(y),"data-disabled":a?"":void 0,disabled:a,value:c,...f,ref:v,onKeyDown:Te(t.onKeyDown,I=>{I.key==="Enter"&&I.preventDefault()}),onClick:Te(t.onClick,I=>{w(R=>Si(R)?!0:!R),_&&(p.current=I.isPropagationStopped(),p.current||I.stopPropagation())})}),_&&l.jsx(M7,{control:m,bubbles:!p.current,name:r,value:c,checked:y,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"},defaultChecked:Si(i)?!1:i})]})});x2.displayName=Nw;var E2="CheckboxIndicator",b2=b.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...s}=t,i=L7(E2,n);return l.jsx(dr,{present:r||Si(i.state)||i.state===!0,children:l.jsx(Pe.span,{"data-state":T2(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});b2.displayName=E2;var M7=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:s,...i}=t,o=b.useRef(null),a=mR(n),c=eI(e);b.useEffect(()=>{const h=o.current,f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&g){const v=new Event("click",{bubbles:r});h.indeterminate=Si(n),g.call(h,Si(n)?!1:n),h.dispatchEvent(v)}},[a,n,r]);const u=b.useRef(Si(n)?!1:n);return l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??u.current,...i,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Si(t){return t==="indeterminate"}function T2(t){return Si(t)?"indeterminate":t?"checked":"unchecked"}var S2=x2,V7=b2;const C2=b.forwardRef(({className:t,...e},n)=>l.jsx(S2,{ref:n,className:Ne("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:l.jsx(V7,{className:Ne("flex items-center justify-center text-current"),children:l.jsx(ko,{className:"h-4 w-4"})})}));C2.displayName=S2.displayName;function F7(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Aw="ScrollArea",[I2,VW]=ur(Aw),[U7,hr]=I2(Aw),N2=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,c]=b.useState(null),[u,h]=b.useState(null),[f,m]=b.useState(null),[g,v]=b.useState(null),[p,_]=b.useState(null),[y,w]=b.useState(0),[x,I]=b.useState(0),[R,L]=b.useState(!1),[S,T]=b.useState(!1),C=Ye(e,M=>c(M)),j=wp(s);return l.jsx(U7,{scope:n,type:r,dir:j,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:h,content:f,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:R,onScrollbarXEnabledChange:L,scrollbarY:p,onScrollbarYChange:_,scrollbarYEnabled:S,onScrollbarYEnabledChange:T,onCornerWidthChange:w,onCornerHeightChange:I,children:l.jsx(Pe.div,{dir:j,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...t.style}})})});N2.displayName=Aw;var A2="ScrollAreaViewport",k2=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=hr(A2,n),a=b.useRef(null),c=Ye(e,a,o.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(Pe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:l.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});k2.displayName=A2;var is="ScrollAreaScrollbar",kw=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=hr(is,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return b.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?l.jsx(z7,{...r,ref:e,forceMount:n}):s.type==="scroll"?l.jsx(B7,{...r,ref:e,forceMount:n}):s.type==="auto"?l.jsx(R2,{...r,ref:e,forceMount:n}):s.type==="always"?l.jsx(Rw,{...r,ref:e}):null});kw.displayName=is;var z7=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=hr(is,t.__scopeScrollArea),[i,o]=b.useState(!1);return b.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(dr,{present:n||i,children:l.jsx(R2,{"data-state":i?"visible":"hidden",...r,ref:e})})}),B7=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=hr(is,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Sp(()=>c("SCROLL_END"),100),[a,c]=F7("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),b.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const m=()=>{const g=u[h];f!==g&&(c("SCROLL"),o()),f=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,i,c,o]),l.jsx(dr,{present:n||a!=="hidden",children:l.jsx(Rw,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Te(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Te(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),R2=b.forwardRef((t,e)=>{const n=hr(is,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=b.useState(!1),a=t.orientation==="horizontal",c=Sp(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:h)}},10);return wl(n.viewport,c),wl(n.content,c),l.jsx(dr,{present:r||i,children:l.jsx(Rw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Rw=b.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=hr(is,t.__scopeScrollArea),i=b.useRef(null),o=b.useRef(0),[a,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=L2(a.viewport,a.content),h={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,g){return G7(m,o.current,a,g)}return n==="horizontal"?l.jsx($7,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,g=ab(m,a,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?l.jsx(W7,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,g=ab(m,a);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),$7=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=hr(is,t.__scopeScrollArea),[o,a]=b.useState(),c=b.useRef(null),u=Ye(e,c,i.onScrollbarXChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(j2,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),V2(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:gf(o.paddingLeft),paddingEnd:gf(o.paddingRight)}})}})}),W7=b.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=hr(is,t.__scopeScrollArea),[o,a]=b.useState(),c=b.useRef(null),u=Ye(e,c,i.onScrollbarYChange);return b.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),l.jsx(j2,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),V2(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:gf(o.paddingTop),paddingEnd:gf(o.paddingBottom)}})}})}),[H7,P2]=I2(is),j2=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...m}=t,g=hr(is,n),[v,p]=b.useState(null),_=Ye(e,C=>p(C)),y=b.useRef(null),w=b.useRef(""),x=g.viewport,I=r.content-r.viewport,R=bt(h),L=bt(c),S=Sp(f,10);function T(C){if(y.current){const j=C.clientX-y.current.left,M=C.clientY-y.current.top;u({x:j,y:M})}}return b.useEffect(()=>{const C=j=>{const M=j.target;(v==null?void 0:v.contains(M))&&R(j,I)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[x,v,I,R]),b.useEffect(L,[r,L]),wl(v,S),wl(g.content,S),l.jsx(H7,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:bt(i),onThumbPointerUp:bt(o),onThumbPositionChange:L,onThumbPointerDown:bt(a),children:l.jsx(Pe.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:Te(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),T(C))}),onPointerMove:Te(t.onPointerMove,T),onPointerUp:Te(t.onPointerUp,C=>{const j=C.target;j.hasPointerCapture(C.pointerId)&&j.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),y.current=null})})})}),mf="ScrollAreaThumb",D2=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=P2(mf,t.__scopeScrollArea);return l.jsx(dr,{present:n||s.hasThumb,children:l.jsx(q7,{ref:e,...r})})}),q7=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=hr(mf,n),o=P2(mf,n),{onThumbPositionChange:a}=o,c=Ye(e,f=>o.onThumbChange(f)),u=b.useRef(void 0),h=Sp(()=>{u.current&&(u.current(),u.current=void 0)},100);return b.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!u.current){const g=Q7(f,a);u.current=g,a()}};return a(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,a]),l.jsx(Pe.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Te(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),v=f.clientX-g.left,p=f.clientY-g.top;o.onThumbPointerDown({x:v,y:p})}),onPointerUp:Te(t.onPointerUp,o.onThumbPointerUp)})});D2.displayName=mf;var Pw="ScrollAreaCorner",O2=b.forwardRef((t,e)=>{const n=hr(Pw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(K7,{...t,ref:e}):null});O2.displayName=Pw;var K7=b.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=hr(Pw,n),[i,o]=b.useState(0),[a,c]=b.useState(0),u=!!(i&&a);return wl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),wl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?l.jsx(Pe.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function gf(t){return t?parseInt(t,10):0}function L2(t,e){const n=t/e;return isNaN(n)?0:n}function Tp(t){const e=L2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function G7(t,e,n,r="ltr"){const s=Tp(n),i=s/2,o=e||i,a=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return M2([c,u],f)(t)}function ab(t,e,n="ltr"){const r=Tp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=My(t,c);return M2([0,o],[0,a])(u)}function M2(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function V2(t,e){return t>0&&t<e}var Q7=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,a=n.top!==i.top;(o||a)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Sp(t,e){const n=bt(t),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function wl(t,e){const n=bt(e);Dt(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var F2=N2,Y7=k2,X7=O2;const U2=b.forwardRef(({className:t,children:e,...n},r)=>l.jsxs(F2,{ref:r,className:Ne("relative overflow-hidden",t),...n,children:[l.jsx(Y7,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(z2,{}),l.jsx(X7,{})]}));U2.displayName=F2.displayName;const z2=b.forwardRef(({className:t,orientation:e="vertical",...n},r)=>l.jsx(kw,{ref:r,orientation:e,className:Ne("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:l.jsx(D2,{className:"relative flex-1 rounded-full bg-border"})}));z2.displayName=kw.displayName;function Vd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var B2={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,s,i){function o(u,h){if(!s[u]){if(!r[u]){var f=typeof Vd=="function"&&Vd;if(!h&&f)return f(u,!0);if(a)return a(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var g=s[u]={exports:{}};r[u][0].call(g.exports,function(v){var p=r[u][1][v];return o(p||v)},g,g.exports,n,r,s,i)}return s[u].exports}for(var a=typeof Vd=="function"&&Vd,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,r,s){var i=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var u,h,f,m,g,v,p,_=[],y=0,w=c.length,x=w,I=i.getTypeOf(c)!=="string";y<c.length;)x=w-y,f=I?(u=c[y++],h=y<w?c[y++]:0,y<w?c[y++]:0):(u=c.charCodeAt(y++),h=y<w?c.charCodeAt(y++):0,y<w?c.charCodeAt(y++):0),m=u>>2,g=(3&u)<<4|h>>4,v=1<x?(15&h)<<2|f>>6:64,p=2<x?63&f:64,_.push(a.charAt(m)+a.charAt(g)+a.charAt(v)+a.charAt(p));return _.join("")},s.decode=function(c){var u,h,f,m,g,v,p=0,_=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var w,x=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===a.charAt(64)&&x--,c.charAt(c.length-2)===a.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=o.uint8array?new Uint8Array(0|x):new Array(0|x);p<c.length;)u=a.indexOf(c.charAt(p++))<<2|(m=a.indexOf(c.charAt(p++)))>>4,h=(15&m)<<4|(g=a.indexOf(c.charAt(p++)))>>2,f=(3&g)<<6|(v=a.indexOf(c.charAt(p++))),w[_++]=u,g!==64&&(w[_++]=h),v!==64&&(w[_++]=f);return w}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function u(h,f,m,g,v){this.compressedSize=h,this.uncompressedSize=f,this.crc32=m,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var h=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),f=this;return h.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(h,f,m){return h.pipe(new a).pipe(new c("uncompressedSize")).pipe(f.compressWorker(m)).pipe(new c("compressedSize")).withStreamInfo("compression",f)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),o=function(){for(var a,c=[],u=0;u<256;u++){a=u;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;c[u]=a}return c}();r.exports=function(a,c){return a!==void 0&&a.length?i.getTypeOf(a)!=="string"?function(u,h,f,m){var g=o,v=m+f;u^=-1;for(var p=m;p<v;p++)u=u>>>8^g[255&(u^h[p])];return-1^u}(0|c,a,a.length,0):function(u,h,f,m){var g=o,v=m+f;u^=-1;for(var p=m;p<v;p++)u=u>>>8^g[255&(u^h.charCodeAt(p))];return-1^u}(0|c,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),c=n("./stream/GenericWorker"),u=i?"uint8array":"array";function h(f,m){c.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=m,this.meta={}}s.magic="\b\0",a.inherits(h,c),h.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,f.data),!1)},h.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(m){f.push({data:m,meta:f.meta})}},s.compressWorker=function(f){return new h("Deflate",f)},s.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(g,v){var p,_="";for(p=0;p<v;p++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,p,_,y,w){var x,I,R=g.file,L=g.compression,S=w!==u.utf8encode,T=a.transformTo("string",w(R.name)),C=a.transformTo("string",u.utf8encode(R.name)),j=R.comment,M=a.transformTo("string",w(j)),P=a.transformTo("string",u.utf8encode(j)),D=C.length!==R.name.length,A=P.length!==j.length,H="",se="",X="",U=R.dir,z=R.date,Z={crc32:0,compressedSize:0,uncompressedSize:0};v&&!p||(Z.crc32=g.crc32,Z.compressedSize=g.compressedSize,Z.uncompressedSize=g.uncompressedSize);var W=0;v&&(W|=8),S||!D&&!A||(W|=2048);var q=0,le=0;U&&(q|=16),y==="UNIX"?(le=798,q|=function(oe,Se){var fe=oe;return oe||(fe=Se?16893:33204),(65535&fe)<<16}(R.unixPermissions,U)):(le=20,q|=function(oe){return 63&(oe||0)}(R.dosPermissions)),x=z.getUTCHours(),x<<=6,x|=z.getUTCMinutes(),x<<=5,x|=z.getUTCSeconds()/2,I=z.getUTCFullYear()-1980,I<<=4,I|=z.getUTCMonth()+1,I<<=5,I|=z.getUTCDate(),D&&(se=i(1,1)+i(h(T),4)+C,H+="up"+i(se.length,2)+se),A&&(X=i(1,1)+i(h(M),4)+P,H+="uc"+i(X.length,2)+X);var ce="";return ce+=`
\0`,ce+=i(W,2),ce+=L.magic,ce+=i(x,2),ce+=i(I,2),ce+=i(Z.crc32,4),ce+=i(Z.compressedSize,4),ce+=i(Z.uncompressedSize,4),ce+=i(T.length,2),ce+=i(H.length,2),{fileRecord:f.LOCAL_FILE_HEADER+ce+T+H,dirRecord:f.CENTRAL_FILE_HEADER+i(le,2)+ce+i(M.length,2)+"\0\0\0\0"+i(q,4)+i(_,4)+T+H+M}}var a=n("../utils"),c=n("../stream/GenericWorker"),u=n("../utf8"),h=n("../crc32"),f=n("../signature");function m(g,v,p,_){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(m,c),m.prototype.push=function(g){var v=g.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,c.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:p?(v+100*(p-_-1))/p:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var p=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,p=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),v)this.push({data:function(_){return f.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var p=this.bytesWritten-g,_=function(y,w,x,I,R){var L=a.transformTo("string",R(I));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(y,2)+i(y,2)+i(w,4)+i(x,4)+i(L.length,2)+L}(this.dirRecords.length,p,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(p){v.processChunk(p)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(p){v.error(p)}),this},m.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!c.prototype.error.call(this,g))return!1;for(var p=0;p<v.length;p++)try{v[p].error(g)}catch{}return!0},m.prototype.lock=function(){c.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),o=n("./ZipFileWorker");s.generateWorker=function(a,c,u){var h=new o(c.streamFiles,u,c.platform,c.encodeFileName),f=0;try{a.forEach(function(m,g){f++;var v=function(w,x){var I=w||x,R=i[I];if(!R)throw new Error(I+" is not a valid compression method !");return R}(g.options.compression,c.compression),p=g.options.compressionOptions||c.compressionOptions||{},_=g.dir,y=g.date;g._compressWorker(v,p).withStreamInfo("file",{name:m,dir:_,date:y,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(m){h.error(m)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,a){return new i().loadAsync(o,a)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),o=n("./external"),a=n("./utf8"),c=n("./zipEntries"),u=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function f(m){return new o.Promise(function(g,v){var p=m.decompressed.getContentWorker().pipe(new u);p.on("error",function(_){v(_)}).on("end",function(){p.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(p){var _=new c(g);return _.load(p),_}).then(function(p){var _=[o.Promise.resolve(p)],y=p.files;if(g.checkCRC32)for(var w=0;w<y.length;w++)_.push(f(y[w]));return o.Promise.all(_)}).then(function(p){for(var _=p.shift(),y=_.files,w=0;w<y.length;w++){var x=y[w],I=x.fileNameStr,R=i.resolve(x.fileNameStr);v.file(R,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:g.createFolders}),x.dir||(v.file(R).unsafeOriginalName=I)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),o=n("../stream/GenericWorker");function a(c,u){o.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(a,o),a.prototype._bindStream=function(c){var u=this;(this._stream=c).pause(),c.on("data",function(h){u.push({data:h,meta:{percent:0}})}).on("error",function(h){u.isPaused?this.generatedError=h:u.error(h)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function o(a,c,u){i.call(this,c),this._helper=a;var h=this;a.on("data",function(f,m){h.push(f)||h._helper.pause(),u&&u(m)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(R,L,S){var T,C=a.getTypeOf(L),j=a.extend(S||{},h);j.date=j.date||new Date,j.compression!==null&&(j.compression=j.compression.toUpperCase()),typeof j.unixPermissions=="string"&&(j.unixPermissions=parseInt(j.unixPermissions,8)),j.unixPermissions&&16384&j.unixPermissions&&(j.dir=!0),j.dosPermissions&&16&j.dosPermissions&&(j.dir=!0),j.dir&&(R=y(R)),j.createFolders&&(T=_(R))&&w.call(this,T,!0);var M=C==="string"&&j.binary===!1&&j.base64===!1;S&&S.binary!==void 0||(j.binary=!M),(L instanceof f&&L.uncompressedSize===0||j.dir||!L||L.length===0)&&(j.base64=!1,j.binary=!0,L="",j.compression="STORE",C="string");var P=null;P=L instanceof f||L instanceof c?L:v.isNode&&v.isStream(L)?new p(R,L):a.prepareContent(R,L,j.binary,j.optimizedBinaryString,j.base64);var D=new m(R,P,j);this.files[R]=D}var o=n("./utf8"),a=n("./utils"),c=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),h=n("./defaults"),f=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),_=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var L=R.lastIndexOf("/");return 0<L?R.substring(0,L):""},y=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},w=function(R,L){return L=L!==void 0?L:h.createFolders,R=y(R),this.files[R]||i.call(this,R,null,{dir:!0,createFolders:L}),this.files[R]};function x(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var I={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var L,S,T;for(L in this.files)T=this.files[L],(S=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&R(S,T)},filter:function(R){var L=[];return this.forEach(function(S,T){R(S,T)&&L.push(T)}),L},file:function(R,L,S){if(arguments.length!==1)return R=this.root+R,i.call(this,R,L,S),this;if(x(R)){var T=R;return this.filter(function(j,M){return!M.dir&&T.test(j)})}var C=this.files[this.root+R];return C&&!C.dir?C:null},folder:function(R){if(!R)return this;if(x(R))return this.filter(function(C,j){return j.dir&&R.test(C)});var L=this.root+R,S=w.call(this,L),T=this.clone();return T.root=S.name,T},remove:function(R){R=this.root+R;var L=this.files[R];if(L||(R.slice(-1)!=="/"&&(R+="/"),L=this.files[R]),L&&!L.dir)delete this.files[R];else for(var S=this.filter(function(C,j){return j.name.slice(0,R.length)===R}),T=0;T<S.length;T++)delete this.files[S[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var L,S={};try{if((S=a.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var T=S.comment||this.comment||"";L=g.generateWorker(this,S,T)}catch(C){(L=new c("error")).error(C)}return new u(L,S.type||"string",S.mimeType)},generateAsync:function(R,L){return this.generateInternalStream(R).accumulate(L)},generateNodeStream:function(R,L){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(L)}};r.exports=I},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a);for(var c=0;c<this.data.length;c++)a[c]=255&a[c]}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var c=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),f=a.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===c&&this.data[m+1]===u&&this.data[m+2]===h&&this.data[m+3]===f)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var c=a.charCodeAt(0),u=a.charCodeAt(1),h=a.charCodeAt(2),f=a.charCodeAt(3),m=this.readData(4);return c===m[0]&&u===m[1]&&h===m[2]&&f===m[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var c,u=0;for(this.checkOffset(a),c=this.index+a-1;c>=this.index;c--)u=(u<<8)+this.byteAt(c);return this.index+=a,u},readString:function(a){return i.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var c=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function o(a){i.call(this,a)}n("../utils").inherits(o,i),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,c},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),o=n("../support"),a=n("./ArrayReader"),c=n("./StringReader"),u=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(f){var m=i.getTypeOf(f);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new u(f):o.uint8array?new h(i.transformTo("uint8array",f)):new a(i.transformTo("array",f)):new c(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),o=n("../utils");function a(c){i.call(this,"ConvertWorker to "+c),this.destType=c}o.inherits(a,i),a.prototype.processChunk=function(c){this.push({data:o.transformTo(this.destType,c.data),meta:c.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),o=n("../crc32");function a(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,i),a.prototype.processChunk=function(c){this.streamInfo.crc32=o(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(a,o),a.prototype.processChunk=function(c){if(c){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+c.data.length}o.prototype.processChunk.call(this,c)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),o=n("./GenericWorker");function a(c){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(h){u.dataIsReady=!0,u.data=h,u.max=h&&h.length||0,u.type=i.getTypeOf(h),u.isPaused||u._tickAndRepeat()},function(h){u.error(h)})}i.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,u);break;case"uint8array":c=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":c=this.data.slice(this.index,u)}return this.index=u,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var c=0;c<this._listeners[o].length;c++)this._listeners[o][c].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(c){a.processChunk(c)}),o.on("end",function(){a.end()}),o.on("error",function(c){a.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),c=n("../base64"),u=n("../support"),h=n("../external"),f=null;if(u.nodestream)try{f=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,p){return new h.Promise(function(_,y){var w=[],x=v._internalType,I=v._outputType,R=v._mimeType;v.on("data",function(L,S){w.push(L),p&&p(S)}).on("error",function(L){w=[],y(L)}).on("end",function(){try{var L=function(S,T,C){switch(S){case"blob":return i.newBlob(i.transformTo("arraybuffer",T),C);case"base64":return c.encode(T);default:return i.transformTo(S,T)}}(I,function(S,T){var C,j=0,M=null,P=0;for(C=0;C<T.length;C++)P+=T[C].length;switch(S){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(M=new Uint8Array(P),C=0;C<T.length;C++)M.set(T[C],j),j+=T[C].length;return M;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+S+"'")}}(x,w),R);_(L)}catch(S){y(S)}w=[]}).resume()})}function g(v,p,_){var y=p;switch(p){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=p,this._mimeType=_,i.checkSupport(y),this._worker=v.pipe(new o(y)),v.lock()}catch(w){this._worker=new a("error"),this._worker.error(w)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,p){var _=this;return v==="data"?this._worker.on(v,function(y){p.call(_,y.data,y.meta)}):this._worker.on(v,function(){i.delay(p,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),s.blob=o.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),c=n("./stream/GenericWorker"),u=new Array(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;u[254]=u[254]=1;function f(){c.call(this,"utf-8 decode"),this.leftOver=null}function m(){c.call(this,"utf-8 encode")}s.utf8encode=function(g){return o.nodebuffer?a.newBufferFrom(g,"utf-8"):function(v){var p,_,y,w,x,I=v.length,R=0;for(w=0;w<I;w++)(64512&(_=v.charCodeAt(w)))==55296&&w+1<I&&(64512&(y=v.charCodeAt(w+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),w++),R+=_<128?1:_<2048?2:_<65536?3:4;for(p=o.uint8array?new Uint8Array(R):new Array(R),w=x=0;x<R;w++)(64512&(_=v.charCodeAt(w)))==55296&&w+1<I&&(64512&(y=v.charCodeAt(w+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),w++),_<128?p[x++]=_:(_<2048?p[x++]=192|_>>>6:(_<65536?p[x++]=224|_>>>12:(p[x++]=240|_>>>18,p[x++]=128|_>>>12&63),p[x++]=128|_>>>6&63),p[x++]=128|63&_);return p}(g)},s.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var p,_,y,w,x=v.length,I=new Array(2*x);for(p=_=0;p<x;)if((y=v[p++])<128)I[_++]=y;else if(4<(w=u[y]))I[_++]=65533,p+=w-1;else{for(y&=w===2?31:w===3?15:7;1<w&&p<x;)y=y<<6|63&v[p++],w--;1<w?I[_++]=65533:y<65536?I[_++]=y:(y-=65536,I[_++]=55296|y>>10&1023,I[_++]=56320|1023&y)}return I.length!==_&&(I.subarray?I=I.subarray(0,_):I.length=_),i.applyFromCharCode(I)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(f,c),f.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var p=v;(v=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),v.set(p,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(w,x){var I;for((x=x||w.length)>w.length&&(x=w.length),I=x-1;0<=I&&(192&w[I])==128;)I--;return I<0||I===0?x:I+u[w[I]]>x?I:x}(v),y=v;_!==v.length&&(o.uint8array?(y=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(y=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:s.utf8decode(y),meta:g.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=f,i.inherits(m,c),m.prototype.processChunk=function(g){this.push({data:s.utf8encode(g.data),meta:g.meta})},s.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),c=n("./external");function u(p){return p}function h(p,_){for(var y=0;y<p.length;++y)_[y]=255&p.charCodeAt(y);return _}n("setimmediate"),s.newBlob=function(p,_){s.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(p),y.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,_,y){var w=[],x=0,I=p.length;if(I<=y)return String.fromCharCode.apply(null,p);for(;x<I;)_==="array"||_==="nodebuffer"?w.push(String.fromCharCode.apply(null,p.slice(x,Math.min(x+y,I)))):w.push(String.fromCharCode.apply(null,p.subarray(x,Math.min(x+y,I)))),x+=y;return w.join("")},stringifyByChar:function(p){for(var _="",y=0;y<p.length;y++)_+=String.fromCharCode(p[y]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function m(p){var _=65536,y=s.getTypeOf(p),w=!0;if(y==="uint8array"?w=f.applyCanBeUsed.uint8array:y==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;1<_;)try{return f.stringifyByChunk(p,y,_)}catch{_=Math.floor(_/2)}return f.stringifyByChar(p)}function g(p,_){for(var y=0;y<p.length;y++)_[y]=p[y];return _}s.applyFromCharCode=m;var v={};v.string={string:u,array:function(p){return h(p,new Array(p.length))},arraybuffer:function(p){return v.string.uint8array(p).buffer},uint8array:function(p){return h(p,new Uint8Array(p.length))},nodebuffer:function(p){return h(p,a.allocBuffer(p.length))}},v.array={string:m,array:u,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(p)}},v.arraybuffer={string:function(p){return m(new Uint8Array(p))},array:function(p){return g(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:u,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return a.newBufferFrom(new Uint8Array(p))}},v.uint8array={string:m,array:function(p){return g(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:u,nodebuffer:function(p){return a.newBufferFrom(p)}},v.nodebuffer={string:m,array:function(p){return g(p,new Array(p.length))},arraybuffer:function(p){return v.nodebuffer.uint8array(p).buffer},uint8array:function(p){return g(p,new Uint8Array(p.length))},nodebuffer:u},s.transformTo=function(p,_){if(_=_||"",!p)return _;s.checkSupport(p);var y=s.getTypeOf(_);return v[y][p](_)},s.resolve=function(p){for(var _=p.split("/"),y=[],w=0;w<_.length;w++){var x=_[w];x==="."||x===""&&w!==0&&w!==_.length-1||(x===".."?y.pop():y.push(x))}return y.join("/")},s.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":i.nodebuffer&&a.isBuffer(p)?"nodebuffer":i.uint8array&&p instanceof Uint8Array?"uint8array":i.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(p){if(!i[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(p){var _,y,w="";for(y=0;y<(p||"").length;y++)w+="\\x"+((_=p.charCodeAt(y))<16?"0":"")+_.toString(16).toUpperCase();return w},s.delay=function(p,_,y){setImmediate(function(){p.apply(y||null,_||[])})},s.inherits=function(p,_){function y(){}y.prototype=_.prototype,p.prototype=new y},s.extend=function(){var p,_,y={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&y[_]===void 0&&(y[_]=arguments[p][_]);return y},s.prepareContent=function(p,_,y,w,x){return c.Promise.resolve(_).then(function(I){return i.blob&&(I instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(I))!==-1)&&typeof FileReader<"u"?new c.Promise(function(R,L){var S=new FileReader;S.onload=function(T){R(T.target.result)},S.onerror=function(T){L(T.target.error)},S.readAsArrayBuffer(I)}):I}).then(function(I){var R=s.getTypeOf(I);return R?(R==="arraybuffer"?I=s.transformTo("uint8array",I):R==="string"&&(x?I=o.decode(I):y&&w!==!0&&(I=function(L){return h(L,i.uint8array?new Uint8Array(L.length):new Array(L.length))}(I))),I):c.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),c=n("./zipEntry"),u=n("./support");function h(f){this.files=[],this.loadOptions=f}h.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(f)+")")}},isSignature:function(f,m){var g=this.reader.index;this.reader.setIndex(f);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",g=o.transformTo(m,f);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,m,g,v=this.zip64EndOfCentralSize-44;0<v;)f=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[f]={id:f,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,m;for(f=0;f<this.files.length;f++)m=this.files[f],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(f=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var m=f;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,a.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(f){this.reader=i(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),c=n("./crc32"),u=n("./utf8"),h=n("./compressions"),f=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,p;if(g.skip(22),this.fileNameLength=g.readInt(2),p=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var y in h)if(Object.prototype.hasOwnProperty.call(h,y)&&h[y].magic===_)return h[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,p,_,y=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<y;)v=g.readInt(2),p=g.readInt(2),_=g.readData(p),this.extraFields[v]={id:v,length:p,value:_};g.setIndex(y)},handleUTF8:function(){var g=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var p=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var y=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(v,p,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),c=n("./utf8"),u=n("./compressedObject"),h=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var p=null,_="string";try{if(!v)throw new Error("No output type specified.");var y=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var w=!this._dataBinary;w&&!y&&(p=p.pipe(new c.Utf8EncodeWorker)),!w&&y&&(p=p.pipe(new c.Utf8DecodeWorker))}catch(x){(p=new h("error")).error(x)}return new o(p,_,"")},async:function(v,p){return this.internalStream(v).accumulate(p)},nodeStream:function(v,p){return this.internalStream(v||"nodebuffer").toNodejsStream(p)},_compressWorker:function(v,p){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new c.Utf8EncodeWorker)),u.createWorkerFrom(_,v,p)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<f.length;g++)i.prototype[f[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var o,a,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var u=0,h=new c(v),f=i.document.createTextNode("");h.observe(f,{characterData:!0}),o=function(){f.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var p=i.document.createElement("script");p.onreadystatechange=function(){v(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},i.document.documentElement.appendChild(p)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,o=function(){m.port2.postMessage(0)}}var g=[];function v(){var p,_;a=!0;for(var y=g.length;y;){for(_=g,g=[],p=-1;++p<y;)_[p]();y=g.length}a=!1}r.exports=function(p){g.push(p)!==1||a||o()}}).call(this,typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function o(){}var a={},c=["REJECTED"],u=["FULFILLED"],h=["PENDING"];function f(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,y!==o&&p(this,y)}function m(y,w,x){this.promise=y,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function g(y,w,x){i(function(){var I;try{I=w(x)}catch(R){return a.reject(y,R)}I===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,I)})}function v(y){var w=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof w=="function")return function(){w.apply(y,arguments)}}function p(y,w){var x=!1;function I(S){x||(x=!0,a.reject(y,S))}function R(S){x||(x=!0,a.resolve(y,S))}var L=_(function(){w(R,I)});L.status==="error"&&I(L.value)}function _(y,w){var x={};try{x.value=y(w),x.status="success"}catch(I){x.status="error",x.value=I}return x}(r.exports=f).prototype.finally=function(y){if(typeof y!="function")return this;var w=this.constructor;return this.then(function(x){return w.resolve(y()).then(function(){return x})},function(x){return w.resolve(y()).then(function(){throw x})})},f.prototype.catch=function(y){return this.then(null,y)},f.prototype.then=function(y,w){if(typeof y!="function"&&this.state===u||typeof w!="function"&&this.state===c)return this;var x=new this.constructor(o);return this.state!==h?g(x,this.state===u?y:w,this.outcome):this.queue.push(new m(x,y,w)),x},m.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},m.prototype.otherCallFulfilled=function(y){g(this.promise,this.onFulfilled,y)},m.prototype.callRejected=function(y){a.reject(this.promise,y)},m.prototype.otherCallRejected=function(y){g(this.promise,this.onRejected,y)},a.resolve=function(y,w){var x=_(v,w);if(x.status==="error")return a.reject(y,x.value);var I=x.value;if(I)p(y,I);else{y.state=u,y.outcome=w;for(var R=-1,L=y.queue.length;++R<L;)y.queue[R].callFulfilled(w)}return y},a.reject=function(y,w){y.state=c,y.outcome=w;for(var x=-1,I=y.queue.length;++x<I;)y.queue[x].callRejected(w);return y},f.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},f.reject=function(y){var w=new this(o);return a.reject(w,y)},f.all=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=y.length,I=!1;if(!x)return this.resolve([]);for(var R=new Array(x),L=0,S=-1,T=new this(o);++S<x;)C(y[S],S);return T;function C(j,M){w.resolve(j).then(function(P){R[M]=P,++L!==x||I||(I=!0,a.resolve(T,R))},function(P){I||(I=!0,a.reject(T,P))})}},f.race=function(y){var w=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=y.length,I=!1;if(!x)return this.resolve([]);for(var R=-1,L=new this(o);++R<x;)S=y[R],w.resolve(S).then(function(T){I||(I=!0,a.resolve(L,T))},function(T){I||(I=!0,a.reject(L,T))});var S;return L}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/messages"),u=n("./zlib/zstream"),h=Object.prototype.toString,f=0,m=-1,g=0,v=8;function p(y){if(!(this instanceof p))return new p(y);this.options=o.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},y||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var x=i.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(x!==f)throw new Error(c[x]);if(w.header&&i.deflateSetHeader(this.strm,w.header),w.dictionary){var I;if(I=typeof w.dictionary=="string"?a.string2buf(w.dictionary):h.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(x=i.deflateSetDictionary(this.strm,I))!==f)throw new Error(c[x]);this._dict_set=!0}}function _(y,w){var x=new p(w);if(x.push(y,!0),x.err)throw x.msg||c[x.err];return x.result}p.prototype.push=function(y,w){var x,I,R=this.strm,L=this.options.chunkSize;if(this.ended)return!1;I=w===~~w?w:w===!0?4:0,typeof y=="string"?R.input=a.string2buf(y):h.call(y)==="[object ArrayBuffer]"?R.input=new Uint8Array(y):R.input=y,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new o.Buf8(L),R.next_out=0,R.avail_out=L),(x=i.deflate(R,I))!==1&&x!==f)return this.onEnd(x),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||I!==4&&I!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(R.output,R.next_out))):this.onData(o.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&x!==1);return I===4?(x=i.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===f):I!==2||(this.onEnd(f),!(R.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Deflate=p,s.deflate=_,s.deflateRaw=function(y,w){return(w=w||{}).raw=!0,_(y,w)},s.gzip=function(y,w){return(w=w||{}).gzip=!0,_(y,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),c=n("./zlib/constants"),u=n("./zlib/messages"),h=n("./zlib/zstream"),f=n("./zlib/gzheader"),m=Object.prototype.toString;function g(p){if(!(this instanceof g))return new g(p);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var y=i.inflateInit2(this.strm,_.windowBits);if(y!==c.Z_OK)throw new Error(u[y]);this.header=new f,i.inflateGetHeader(this.strm,this.header)}function v(p,_){var y=new g(_);if(y.push(p,!0),y.err)throw y.msg||u[y.err];return y.result}g.prototype.push=function(p,_){var y,w,x,I,R,L,S=this.strm,T=this.options.chunkSize,C=this.options.dictionary,j=!1;if(this.ended)return!1;w=_===~~_?_:_===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof p=="string"?S.input=a.binstring2buf(p):m.call(p)==="[object ArrayBuffer]"?S.input=new Uint8Array(p):S.input=p,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(T),S.next_out=0,S.avail_out=T),(y=i.inflate(S,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&C&&(L=typeof C=="string"?a.string2buf(C):m.call(C)==="[object ArrayBuffer]"?new Uint8Array(C):C,y=i.inflateSetDictionary(this.strm,L)),y===c.Z_BUF_ERROR&&j===!0&&(y=c.Z_OK,j=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&y!==c.Z_STREAM_END&&(S.avail_in!==0||w!==c.Z_FINISH&&w!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=a.utf8border(S.output,S.next_out),I=S.next_out-x,R=a.buf2string(S.output,x),S.next_out=I,S.avail_out=T-I,I&&o.arraySet(S.output,S.output,x,I,0),this.onData(R)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(j=!0)}while((0<S.avail_in||S.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(w=c.Z_FINISH),w===c.Z_FINISH?(y=i.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):w!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(S.avail_out=0))},g.prototype.onData=function(p){this.chunks.push(p)},g.prototype.onEnd=function(p){p===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},s.Inflate=g,s.inflate=v,s.inflateRaw=function(p,_){return(_=_||{}).raw=!0,v(p,_)},s.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var h=u.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])}}return c},s.shrinkBuf=function(c,u){return c.length===u?c:c.subarray?c.subarray(0,u):(c.length=u,c)};var o={arraySet:function(c,u,h,f,m){if(u.subarray&&c.subarray)c.set(u.subarray(h,h+f),m);else for(var g=0;g<f;g++)c[m+g]=u[h+g]},flattenChunks:function(c){var u,h,f,m,g,v;for(u=f=0,h=c.length;u<h;u++)f+=c[u].length;for(v=new Uint8Array(f),u=m=0,h=c.length;u<h;u++)g=c[u],v.set(g,m),m+=g.length;return v}},a={arraySet:function(c,u,h,f,m){for(var g=0;g<f;g++)c[m+g]=u[h+g]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,o)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,a))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var c=new i.Buf8(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function h(f,m){if(m<65537&&(f.subarray&&a||!f.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(f,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(f[v]);return g}c[254]=c[254]=1,s.string2buf=function(f){var m,g,v,p,_,y=f.length,w=0;for(p=0;p<y;p++)(64512&(g=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(v=f.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),p++),w+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(w),p=_=0;_<w;p++)(64512&(g=f.charCodeAt(p)))==55296&&p+1<y&&(64512&(v=f.charCodeAt(p+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),p++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},s.buf2binstring=function(f){return h(f,f.length)},s.binstring2buf=function(f){for(var m=new i.Buf8(f.length),g=0,v=m.length;g<v;g++)m[g]=f.charCodeAt(g);return m},s.buf2string=function(f,m){var g,v,p,_,y=m||f.length,w=new Array(2*y);for(g=v=0;g<y;)if((p=f[g++])<128)w[v++]=p;else if(4<(_=c[p]))w[v++]=65533,g+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&g<y;)p=p<<6|63&f[g++],_--;1<_?w[v++]=65533:p<65536?w[v++]=p:(p-=65536,w[v++]=55296|p>>10&1023,w[v++]=56320|1023&p)}return h(w,v)},s.utf8border=function(f,m){var g;for((m=m||f.length)>f.length&&(m=f.length),g=m-1;0<=g&&(192&f[g])==128;)g--;return g<0||g===0?m:g+c[f[g]]>m?g:m}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,o,a,c){for(var u=65535&i|0,h=i>>>16&65535|0,f=0;a!==0;){for(a-=f=2e3<a?2e3:a;h=h+(u=u+o[c++]|0)|0,--f;);u%=65521,h%=65521}return u|h<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var o,a=[],c=0;c<256;c++){o=c;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[c]=o}return a}();r.exports=function(o,a,c,u){var h=i,f=u+c;o^=-1;for(var m=u;m<f;m++)o=o>>>8^h[255&(o^a[m])];return-1^o}},{}],46:[function(n,r,s){var i,o=n("../utils/common"),a=n("./trees"),c=n("./adler32"),u=n("./crc32"),h=n("./messages"),f=0,m=4,g=0,v=-2,p=-1,_=4,y=2,w=8,x=9,I=286,R=30,L=19,S=2*I+1,T=15,C=3,j=258,M=j+C+1,P=42,D=113,A=1,H=2,se=3,X=4;function U(k,$){return k.msg=h[$],$}function z(k){return(k<<1)-(4<k?9:0)}function Z(k){for(var $=k.length;0<=--$;)k[$]=0}function W(k){var $=k.state,K=$.pending;K>k.avail_out&&(K=k.avail_out),K!==0&&(o.arraySet(k.output,$.pending_buf,$.pending_out,K,k.next_out),k.next_out+=K,$.pending_out+=K,k.total_out+=K,k.avail_out-=K,$.pending-=K,$.pending===0&&($.pending_out=0))}function q(k,$){a._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,$),k.block_start=k.strstart,W(k.strm)}function le(k,$){k.pending_buf[k.pending++]=$}function ce(k,$){k.pending_buf[k.pending++]=$>>>8&255,k.pending_buf[k.pending++]=255&$}function oe(k,$){var K,O,F=k.max_chain_length,B=k.strstart,ne=k.prev_length,ie=k.nice_match,Q=k.strstart>k.w_size-M?k.strstart-(k.w_size-M):0,de=k.window,te=k.w_mask,ue=k.prev,me=k.strstart+j,De=de[B+ne-1],Me=de[B+ne];k.prev_length>=k.good_match&&(F>>=2),ie>k.lookahead&&(ie=k.lookahead);do if(de[(K=$)+ne]===Me&&de[K+ne-1]===De&&de[K]===de[B]&&de[++K]===de[B+1]){B+=2,K++;do;while(de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&de[++B]===de[++K]&&B<me);if(O=j-(me-B),B=me-j,ne<O){if(k.match_start=$,ie<=(ne=O))break;De=de[B+ne-1],Me=de[B+ne]}}while(($=ue[$&te])>Q&&--F!=0);return ne<=k.lookahead?ne:k.lookahead}function Se(k){var $,K,O,F,B,ne,ie,Q,de,te,ue=k.w_size;do{if(F=k.window_size-k.lookahead-k.strstart,k.strstart>=ue+(ue-M)){for(o.arraySet(k.window,k.window,ue,ue,0),k.match_start-=ue,k.strstart-=ue,k.block_start-=ue,$=K=k.hash_size;O=k.head[--$],k.head[$]=ue<=O?O-ue:0,--K;);for($=K=ue;O=k.prev[--$],k.prev[$]=ue<=O?O-ue:0,--K;);F+=ue}if(k.strm.avail_in===0)break;if(ne=k.strm,ie=k.window,Q=k.strstart+k.lookahead,de=F,te=void 0,te=ne.avail_in,de<te&&(te=de),K=te===0?0:(ne.avail_in-=te,o.arraySet(ie,ne.input,ne.next_in,te,Q),ne.state.wrap===1?ne.adler=c(ne.adler,ie,te,Q):ne.state.wrap===2&&(ne.adler=u(ne.adler,ie,te,Q)),ne.next_in+=te,ne.total_in+=te,te),k.lookahead+=K,k.lookahead+k.insert>=C)for(B=k.strstart-k.insert,k.ins_h=k.window[B],k.ins_h=(k.ins_h<<k.hash_shift^k.window[B+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[B+C-1])&k.hash_mask,k.prev[B&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=B,B++,k.insert--,!(k.lookahead+k.insert<C)););}while(k.lookahead<M&&k.strm.avail_in!==0)}function fe(k,$){for(var K,O;;){if(k.lookahead<M){if(Se(k),k.lookahead<M&&$===f)return A;if(k.lookahead===0)break}if(K=0,k.lookahead>=C&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+C-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),K!==0&&k.strstart-K<=k.w_size-M&&(k.match_length=oe(k,K)),k.match_length>=C)if(O=a._tr_tally(k,k.strstart-k.match_start,k.match_length-C),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=C){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+C-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else O=a._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(O&&(q(k,!1),k.strm.avail_out===0))return A}return k.insert=k.strstart<C-1?k.strstart:C-1,$===m?(q(k,!0),k.strm.avail_out===0?se:X):k.last_lit&&(q(k,!1),k.strm.avail_out===0)?A:H}function ee(k,$){for(var K,O,F;;){if(k.lookahead<M){if(Se(k),k.lookahead<M&&$===f)return A;if(k.lookahead===0)break}if(K=0,k.lookahead>=C&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+C-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=C-1,K!==0&&k.prev_length<k.max_lazy_match&&k.strstart-K<=k.w_size-M&&(k.match_length=oe(k,K),k.match_length<=5&&(k.strategy===1||k.match_length===C&&4096<k.strstart-k.match_start)&&(k.match_length=C-1)),k.prev_length>=C&&k.match_length<=k.prev_length){for(F=k.strstart+k.lookahead-C,O=a._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-C),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=F&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+C-1])&k.hash_mask,K=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=C-1,k.strstart++,O&&(q(k,!1),k.strm.avail_out===0))return A}else if(k.match_available){if((O=a._tr_tally(k,0,k.window[k.strstart-1]))&&q(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return A}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(O=a._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<C-1?k.strstart:C-1,$===m?(q(k,!0),k.strm.avail_out===0?se:X):k.last_lit&&(q(k,!1),k.strm.avail_out===0)?A:H}function ye(k,$,K,O,F){this.good_length=k,this.max_lazy=$,this.nice_length=K,this.max_chain=O,this.func=F}function xe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*R+1)),this.bl_tree=new o.Buf16(2*(2*L+1)),Z(this.dyn_ltree),Z(this.dyn_dtree),Z(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(T+1),this.heap=new o.Buf16(2*I+1),Z(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*I+1),Z(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function be(k){var $;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=y,($=k.state).pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap?P:D,k.adler=$.wrap===2?0:1,$.last_flush=f,a._tr_init($),g):U(k,v)}function Ae(k){var $=be(k);return $===g&&function(K){K.window_size=2*K.w_size,Z(K.head),K.max_lazy_match=i[K.level].max_lazy,K.good_match=i[K.level].good_length,K.nice_match=i[K.level].nice_length,K.max_chain_length=i[K.level].max_chain,K.strstart=0,K.block_start=0,K.lookahead=0,K.insert=0,K.match_length=K.prev_length=C-1,K.match_available=0,K.ins_h=0}(k.state),$}function Be(k,$,K,O,F,B){if(!k)return v;var ne=1;if($===p&&($=6),O<0?(ne=0,O=-O):15<O&&(ne=2,O-=16),F<1||x<F||K!==w||O<8||15<O||$<0||9<$||B<0||_<B)return U(k,v);O===8&&(O=9);var ie=new xe;return(k.state=ie).strm=k,ie.wrap=ne,ie.gzhead=null,ie.w_bits=O,ie.w_size=1<<ie.w_bits,ie.w_mask=ie.w_size-1,ie.hash_bits=F+7,ie.hash_size=1<<ie.hash_bits,ie.hash_mask=ie.hash_size-1,ie.hash_shift=~~((ie.hash_bits+C-1)/C),ie.window=new o.Buf8(2*ie.w_size),ie.head=new o.Buf16(ie.hash_size),ie.prev=new o.Buf16(ie.w_size),ie.lit_bufsize=1<<F+6,ie.pending_buf_size=4*ie.lit_bufsize,ie.pending_buf=new o.Buf8(ie.pending_buf_size),ie.d_buf=1*ie.lit_bufsize,ie.l_buf=3*ie.lit_bufsize,ie.level=$,ie.strategy=B,ie.method=K,Ae(k)}i=[new ye(0,0,0,0,function(k,$){var K=65535;for(K>k.pending_buf_size-5&&(K=k.pending_buf_size-5);;){if(k.lookahead<=1){if(Se(k),k.lookahead===0&&$===f)return A;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var O=k.block_start+K;if((k.strstart===0||k.strstart>=O)&&(k.lookahead=k.strstart-O,k.strstart=O,q(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-M&&(q(k,!1),k.strm.avail_out===0))return A}return k.insert=0,$===m?(q(k,!0),k.strm.avail_out===0?se:X):(k.strstart>k.block_start&&(q(k,!1),k.strm.avail_out),A)}),new ye(4,4,8,4,fe),new ye(4,5,16,8,fe),new ye(4,6,32,32,fe),new ye(4,4,16,16,ee),new ye(8,16,32,32,ee),new ye(8,16,128,128,ee),new ye(8,32,128,256,ee),new ye(32,128,258,1024,ee),new ye(32,258,258,4096,ee)],s.deflateInit=function(k,$){return Be(k,$,w,15,8,0)},s.deflateInit2=Be,s.deflateReset=Ae,s.deflateResetKeep=be,s.deflateSetHeader=function(k,$){return k&&k.state?k.state.wrap!==2?v:(k.state.gzhead=$,g):v},s.deflate=function(k,$){var K,O,F,B;if(!k||!k.state||5<$||$<0)return k?U(k,v):v;if(O=k.state,!k.output||!k.input&&k.avail_in!==0||O.status===666&&$!==m)return U(k,k.avail_out===0?-5:v);if(O.strm=k,K=O.last_flush,O.last_flush=$,O.status===P)if(O.wrap===2)k.adler=0,le(O,31),le(O,139),le(O,8),O.gzhead?(le(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),le(O,255&O.gzhead.time),le(O,O.gzhead.time>>8&255),le(O,O.gzhead.time>>16&255),le(O,O.gzhead.time>>24&255),le(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),le(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(le(O,255&O.gzhead.extra.length),le(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(k.adler=u(k.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(le(O,0),le(O,0),le(O,0),le(O,0),le(O,0),le(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),le(O,3),O.status=D);else{var ne=w+(O.w_bits-8<<4)<<8;ne|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(ne|=32),ne+=31-ne%31,O.status=D,ce(O,ne),O.strstart!==0&&(ce(O,k.adler>>>16),ce(O,65535&k.adler)),k.adler=1}if(O.status===69)if(O.gzhead.extra){for(F=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),W(k),F=O.pending,O.pending!==O.pending_buf_size));)le(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){F=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),W(k),F=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,le(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),B===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){F=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),W(k),F=O.pending,O.pending===O.pending_buf_size)){B=1;break}B=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,le(O,B)}while(B!==0);O.gzhead.hcrc&&O.pending>F&&(k.adler=u(k.adler,O.pending_buf,O.pending-F,F)),B===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&W(k),O.pending+2<=O.pending_buf_size&&(le(O,255&k.adler),le(O,k.adler>>8&255),k.adler=0,O.status=D)):O.status=D),O.pending!==0){if(W(k),k.avail_out===0)return O.last_flush=-1,g}else if(k.avail_in===0&&z($)<=z(K)&&$!==m)return U(k,-5);if(O.status===666&&k.avail_in!==0)return U(k,-5);if(k.avail_in!==0||O.lookahead!==0||$!==f&&O.status!==666){var ie=O.strategy===2?function(Q,de){for(var te;;){if(Q.lookahead===0&&(Se(Q),Q.lookahead===0)){if(de===f)return A;break}if(Q.match_length=0,te=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++,te&&(q(Q,!1),Q.strm.avail_out===0))return A}return Q.insert=0,de===m?(q(Q,!0),Q.strm.avail_out===0?se:X):Q.last_lit&&(q(Q,!1),Q.strm.avail_out===0)?A:H}(O,$):O.strategy===3?function(Q,de){for(var te,ue,me,De,Me=Q.window;;){if(Q.lookahead<=j){if(Se(Q),Q.lookahead<=j&&de===f)return A;if(Q.lookahead===0)break}if(Q.match_length=0,Q.lookahead>=C&&0<Q.strstart&&(ue=Me[me=Q.strstart-1])===Me[++me]&&ue===Me[++me]&&ue===Me[++me]){De=Q.strstart+j;do;while(ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&ue===Me[++me]&&me<De);Q.match_length=j-(De-me),Q.match_length>Q.lookahead&&(Q.match_length=Q.lookahead)}if(Q.match_length>=C?(te=a._tr_tally(Q,1,Q.match_length-C),Q.lookahead-=Q.match_length,Q.strstart+=Q.match_length,Q.match_length=0):(te=a._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++),te&&(q(Q,!1),Q.strm.avail_out===0))return A}return Q.insert=0,de===m?(q(Q,!0),Q.strm.avail_out===0?se:X):Q.last_lit&&(q(Q,!1),Q.strm.avail_out===0)?A:H}(O,$):i[O.level].func(O,$);if(ie!==se&&ie!==X||(O.status=666),ie===A||ie===se)return k.avail_out===0&&(O.last_flush=-1),g;if(ie===H&&($===1?a._tr_align(O):$!==5&&(a._tr_stored_block(O,0,0,!1),$===3&&(Z(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),W(k),k.avail_out===0))return O.last_flush=-1,g}return $!==m?g:O.wrap<=0?1:(O.wrap===2?(le(O,255&k.adler),le(O,k.adler>>8&255),le(O,k.adler>>16&255),le(O,k.adler>>24&255),le(O,255&k.total_in),le(O,k.total_in>>8&255),le(O,k.total_in>>16&255),le(O,k.total_in>>24&255)):(ce(O,k.adler>>>16),ce(O,65535&k.adler)),W(k),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?g:1)},s.deflateEnd=function(k){var $;return k&&k.state?($=k.state.status)!==P&&$!==69&&$!==73&&$!==91&&$!==103&&$!==D&&$!==666?U(k,v):(k.state=null,$===D?U(k,-3):g):v},s.deflateSetDictionary=function(k,$){var K,O,F,B,ne,ie,Q,de,te=$.length;if(!k||!k.state||(B=(K=k.state).wrap)===2||B===1&&K.status!==P||K.lookahead)return v;for(B===1&&(k.adler=c(k.adler,$,te,0)),K.wrap=0,te>=K.w_size&&(B===0&&(Z(K.head),K.strstart=0,K.block_start=0,K.insert=0),de=new o.Buf8(K.w_size),o.arraySet(de,$,te-K.w_size,K.w_size,0),$=de,te=K.w_size),ne=k.avail_in,ie=k.next_in,Q=k.input,k.avail_in=te,k.next_in=0,k.input=$,Se(K);K.lookahead>=C;){for(O=K.strstart,F=K.lookahead-(C-1);K.ins_h=(K.ins_h<<K.hash_shift^K.window[O+C-1])&K.hash_mask,K.prev[O&K.w_mask]=K.head[K.ins_h],K.head[K.ins_h]=O,O++,--F;);K.strstart=O,K.lookahead=C-1,Se(K)}return K.strstart+=K.lookahead,K.block_start=K.strstart,K.insert=K.lookahead,K.lookahead=0,K.match_length=K.prev_length=C-1,K.match_available=0,k.next_in=ie,k.input=Q,k.avail_in=ne,K.wrap=B,g},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,o){var a,c,u,h,f,m,g,v,p,_,y,w,x,I,R,L,S,T,C,j,M,P,D,A,H;a=i.state,c=i.next_in,A=i.input,u=c+(i.avail_in-5),h=i.next_out,H=i.output,f=h-(o-i.avail_out),m=h+(i.avail_out-257),g=a.dmax,v=a.wsize,p=a.whave,_=a.wnext,y=a.window,w=a.hold,x=a.bits,I=a.lencode,R=a.distcode,L=(1<<a.lenbits)-1,S=(1<<a.distbits)-1;e:do{x<15&&(w+=A[c++]<<x,x+=8,w+=A[c++]<<x,x+=8),T=I[w&L];t:for(;;){if(w>>>=C=T>>>24,x-=C,(C=T>>>16&255)===0)H[h++]=65535&T;else{if(!(16&C)){if(!(64&C)){T=I[(65535&T)+(w&(1<<C)-1)];continue t}if(32&C){a.mode=12;break e}i.msg="invalid literal/length code",a.mode=30;break e}j=65535&T,(C&=15)&&(x<C&&(w+=A[c++]<<x,x+=8),j+=w&(1<<C)-1,w>>>=C,x-=C),x<15&&(w+=A[c++]<<x,x+=8,w+=A[c++]<<x,x+=8),T=R[w&S];n:for(;;){if(w>>>=C=T>>>24,x-=C,!(16&(C=T>>>16&255))){if(!(64&C)){T=R[(65535&T)+(w&(1<<C)-1)];continue n}i.msg="invalid distance code",a.mode=30;break e}if(M=65535&T,x<(C&=15)&&(w+=A[c++]<<x,(x+=8)<C&&(w+=A[c++]<<x,x+=8)),g<(M+=w&(1<<C)-1)){i.msg="invalid distance too far back",a.mode=30;break e}if(w>>>=C,x-=C,(C=h-f)<M){if(p<(C=M-C)&&a.sane){i.msg="invalid distance too far back",a.mode=30;break e}if(D=y,(P=0)===_){if(P+=v-C,C<j){for(j-=C;H[h++]=y[P++],--C;);P=h-M,D=H}}else if(_<C){if(P+=v+_-C,(C-=_)<j){for(j-=C;H[h++]=y[P++],--C;);if(P=0,_<j){for(j-=C=_;H[h++]=y[P++],--C;);P=h-M,D=H}}}else if(P+=_-C,C<j){for(j-=C;H[h++]=y[P++],--C;);P=h-M,D=H}for(;2<j;)H[h++]=D[P++],H[h++]=D[P++],H[h++]=D[P++],j-=3;j&&(H[h++]=D[P++],1<j&&(H[h++]=D[P++]))}else{for(P=h-M;H[h++]=H[P++],H[h++]=H[P++],H[h++]=H[P++],2<(j-=3););j&&(H[h++]=H[P++],1<j&&(H[h++]=H[P++]))}break}}break}}while(c<u&&h<m);c-=j=x>>3,w&=(1<<(x-=j<<3))-1,i.next_in=c,i.next_out=h,i.avail_in=c<u?u-c+5:5-(c-u),i.avail_out=h<m?m-h+257:257-(h-m),a.hold=w,a.bits=x}},{}],49:[function(n,r,s){var i=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),c=n("./inffast"),u=n("./inftrees"),h=1,f=2,m=0,g=-2,v=1,p=852,_=592;function y(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(P){var D;return P&&P.state?(D=P.state,P.total_in=P.total_out=D.total=0,P.msg="",D.wrap&&(P.adler=1&D.wrap),D.mode=v,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new i.Buf32(p),D.distcode=D.distdyn=new i.Buf32(_),D.sane=1,D.back=-1,m):g}function I(P){var D;return P&&P.state?((D=P.state).wsize=0,D.whave=0,D.wnext=0,x(P)):g}function R(P,D){var A,H;return P&&P.state?(H=P.state,D<0?(A=0,D=-D):(A=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?g:(H.window!==null&&H.wbits!==D&&(H.window=null),H.wrap=A,H.wbits=D,I(P))):g}function L(P,D){var A,H;return P?(H=new w,(P.state=H).window=null,(A=R(P,D))!==m&&(P.state=null),A):g}var S,T,C=!0;function j(P){if(C){var D;for(S=new i.Buf32(512),T=new i.Buf32(32),D=0;D<144;)P.lens[D++]=8;for(;D<256;)P.lens[D++]=9;for(;D<280;)P.lens[D++]=7;for(;D<288;)P.lens[D++]=8;for(u(h,P.lens,0,288,S,0,P.work,{bits:9}),D=0;D<32;)P.lens[D++]=5;u(f,P.lens,0,32,T,0,P.work,{bits:5}),C=!1}P.lencode=S,P.lenbits=9,P.distcode=T,P.distbits=5}function M(P,D,A,H){var se,X=P.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new i.Buf8(X.wsize)),H>=X.wsize?(i.arraySet(X.window,D,A-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(H<(se=X.wsize-X.wnext)&&(se=H),i.arraySet(X.window,D,A-H,se,X.wnext),(H-=se)?(i.arraySet(X.window,D,A-H,H,0),X.wnext=H,X.whave=X.wsize):(X.wnext+=se,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=se))),0}s.inflateReset=I,s.inflateReset2=R,s.inflateResetKeep=x,s.inflateInit=function(P){return L(P,15)},s.inflateInit2=L,s.inflate=function(P,D){var A,H,se,X,U,z,Z,W,q,le,ce,oe,Se,fe,ee,ye,xe,be,Ae,Be,k,$,K,O,F=0,B=new i.Buf8(4),ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return g;(A=P.state).mode===12&&(A.mode=13),U=P.next_out,se=P.output,Z=P.avail_out,X=P.next_in,H=P.input,z=P.avail_in,W=A.hold,q=A.bits,le=z,ce=Z,$=m;e:for(;;)switch(A.mode){case v:if(A.wrap===0){A.mode=13;break}for(;q<16;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(2&A.wrap&&W===35615){B[A.check=0]=255&W,B[1]=W>>>8&255,A.check=a(A.check,B,2,0),q=W=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&W)<<8)+(W>>8))%31){P.msg="incorrect header check",A.mode=30;break}if((15&W)!=8){P.msg="unknown compression method",A.mode=30;break}if(q-=4,k=8+(15&(W>>>=4)),A.wbits===0)A.wbits=k;else if(k>A.wbits){P.msg="invalid window size",A.mode=30;break}A.dmax=1<<k,P.adler=A.check=1,A.mode=512&W?10:12,q=W=0;break;case 2:for(;q<16;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(A.flags=W,(255&A.flags)!=8){P.msg="unknown compression method",A.mode=30;break}if(57344&A.flags){P.msg="unknown header flags set",A.mode=30;break}A.head&&(A.head.text=W>>8&1),512&A.flags&&(B[0]=255&W,B[1]=W>>>8&255,A.check=a(A.check,B,2,0)),q=W=0,A.mode=3;case 3:for(;q<32;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.head&&(A.head.time=W),512&A.flags&&(B[0]=255&W,B[1]=W>>>8&255,B[2]=W>>>16&255,B[3]=W>>>24&255,A.check=a(A.check,B,4,0)),q=W=0,A.mode=4;case 4:for(;q<16;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.head&&(A.head.xflags=255&W,A.head.os=W>>8),512&A.flags&&(B[0]=255&W,B[1]=W>>>8&255,A.check=a(A.check,B,2,0)),q=W=0,A.mode=5;case 5:if(1024&A.flags){for(;q<16;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.length=W,A.head&&(A.head.extra_len=W),512&A.flags&&(B[0]=255&W,B[1]=W>>>8&255,A.check=a(A.check,B,2,0)),q=W=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&(z<(oe=A.length)&&(oe=z),oe&&(A.head&&(k=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,H,X,oe,k)),512&A.flags&&(A.check=a(A.check,H,oe,X)),z-=oe,X+=oe,A.length-=oe),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(z===0)break e;for(oe=0;k=H[X+oe++],A.head&&k&&A.length<65536&&(A.head.name+=String.fromCharCode(k)),k&&oe<z;);if(512&A.flags&&(A.check=a(A.check,H,oe,X)),z-=oe,X+=oe,k)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(z===0)break e;for(oe=0;k=H[X+oe++],A.head&&k&&A.length<65536&&(A.head.comment+=String.fromCharCode(k)),k&&oe<z;);if(512&A.flags&&(A.check=a(A.check,H,oe,X)),z-=oe,X+=oe,k)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;q<16;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(W!==(65535&A.check)){P.msg="header crc mismatch",A.mode=30;break}q=W=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),P.adler=A.check=0,A.mode=12;break;case 10:for(;q<32;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}P.adler=A.check=y(W),q=W=0,A.mode=11;case 11:if(A.havedict===0)return P.next_out=U,P.avail_out=Z,P.next_in=X,P.avail_in=z,A.hold=W,A.bits=q,2;P.adler=A.check=1,A.mode=12;case 12:if(D===5||D===6)break e;case 13:if(A.last){W>>>=7&q,q-=7&q,A.mode=27;break}for(;q<3;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}switch(A.last=1&W,q-=1,3&(W>>>=1)){case 0:A.mode=14;break;case 1:if(j(A),A.mode=20,D!==6)break;W>>>=2,q-=2;break e;case 2:A.mode=17;break;case 3:P.msg="invalid block type",A.mode=30}W>>>=2,q-=2;break;case 14:for(W>>>=7&q,q-=7&q;q<32;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if((65535&W)!=(W>>>16^65535)){P.msg="invalid stored block lengths",A.mode=30;break}if(A.length=65535&W,q=W=0,A.mode=15,D===6)break e;case 15:A.mode=16;case 16:if(oe=A.length){if(z<oe&&(oe=z),Z<oe&&(oe=Z),oe===0)break e;i.arraySet(se,H,X,oe,U),z-=oe,X+=oe,Z-=oe,U+=oe,A.length-=oe;break}A.mode=12;break;case 17:for(;q<14;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(A.nlen=257+(31&W),W>>>=5,q-=5,A.ndist=1+(31&W),W>>>=5,q-=5,A.ncode=4+(15&W),W>>>=4,q-=4,286<A.nlen||30<A.ndist){P.msg="too many length or distance symbols",A.mode=30;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;q<3;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.lens[ne[A.have++]]=7&W,W>>>=3,q-=3}for(;A.have<19;)A.lens[ne[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,K={bits:A.lenbits},$=u(0,A.lens,0,19,A.lencode,0,A.work,K),A.lenbits=K.bits,$){P.msg="invalid code lengths set",A.mode=30;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;ye=(F=A.lencode[W&(1<<A.lenbits)-1])>>>16&255,xe=65535&F,!((ee=F>>>24)<=q);){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(xe<16)W>>>=ee,q-=ee,A.lens[A.have++]=xe;else{if(xe===16){for(O=ee+2;q<O;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(W>>>=ee,q-=ee,A.have===0){P.msg="invalid bit length repeat",A.mode=30;break}k=A.lens[A.have-1],oe=3+(3&W),W>>>=2,q-=2}else if(xe===17){for(O=ee+3;q<O;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}q-=ee,k=0,oe=3+(7&(W>>>=ee)),W>>>=3,q-=3}else{for(O=ee+7;q<O;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}q-=ee,k=0,oe=11+(127&(W>>>=ee)),W>>>=7,q-=7}if(A.have+oe>A.nlen+A.ndist){P.msg="invalid bit length repeat",A.mode=30;break}for(;oe--;)A.lens[A.have++]=k}}if(A.mode===30)break;if(A.lens[256]===0){P.msg="invalid code -- missing end-of-block",A.mode=30;break}if(A.lenbits=9,K={bits:A.lenbits},$=u(h,A.lens,0,A.nlen,A.lencode,0,A.work,K),A.lenbits=K.bits,$){P.msg="invalid literal/lengths set",A.mode=30;break}if(A.distbits=6,A.distcode=A.distdyn,K={bits:A.distbits},$=u(f,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,K),A.distbits=K.bits,$){P.msg="invalid distances set",A.mode=30;break}if(A.mode=20,D===6)break e;case 20:A.mode=21;case 21:if(6<=z&&258<=Z){P.next_out=U,P.avail_out=Z,P.next_in=X,P.avail_in=z,A.hold=W,A.bits=q,c(P,ce),U=P.next_out,se=P.output,Z=P.avail_out,X=P.next_in,H=P.input,z=P.avail_in,W=A.hold,q=A.bits,A.mode===12&&(A.back=-1);break}for(A.back=0;ye=(F=A.lencode[W&(1<<A.lenbits)-1])>>>16&255,xe=65535&F,!((ee=F>>>24)<=q);){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(ye&&!(240&ye)){for(be=ee,Ae=ye,Be=xe;ye=(F=A.lencode[Be+((W&(1<<be+Ae)-1)>>be)])>>>16&255,xe=65535&F,!(be+(ee=F>>>24)<=q);){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}W>>>=be,q-=be,A.back+=be}if(W>>>=ee,q-=ee,A.back+=ee,A.length=xe,ye===0){A.mode=26;break}if(32&ye){A.back=-1,A.mode=12;break}if(64&ye){P.msg="invalid literal/length code",A.mode=30;break}A.extra=15&ye,A.mode=22;case 22:if(A.extra){for(O=A.extra;q<O;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.length+=W&(1<<A.extra)-1,W>>>=A.extra,q-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;ye=(F=A.distcode[W&(1<<A.distbits)-1])>>>16&255,xe=65535&F,!((ee=F>>>24)<=q);){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(!(240&ye)){for(be=ee,Ae=ye,Be=xe;ye=(F=A.distcode[Be+((W&(1<<be+Ae)-1)>>be)])>>>16&255,xe=65535&F,!(be+(ee=F>>>24)<=q);){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}W>>>=be,q-=be,A.back+=be}if(W>>>=ee,q-=ee,A.back+=ee,64&ye){P.msg="invalid distance code",A.mode=30;break}A.offset=xe,A.extra=15&ye,A.mode=24;case 24:if(A.extra){for(O=A.extra;q<O;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}A.offset+=W&(1<<A.extra)-1,W>>>=A.extra,q-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){P.msg="invalid distance too far back",A.mode=30;break}A.mode=25;case 25:if(Z===0)break e;if(oe=ce-Z,A.offset>oe){if((oe=A.offset-oe)>A.whave&&A.sane){P.msg="invalid distance too far back",A.mode=30;break}Se=oe>A.wnext?(oe-=A.wnext,A.wsize-oe):A.wnext-oe,oe>A.length&&(oe=A.length),fe=A.window}else fe=se,Se=U-A.offset,oe=A.length;for(Z<oe&&(oe=Z),Z-=oe,A.length-=oe;se[U++]=fe[Se++],--oe;);A.length===0&&(A.mode=21);break;case 26:if(Z===0)break e;se[U++]=A.length,Z--,A.mode=21;break;case 27:if(A.wrap){for(;q<32;){if(z===0)break e;z--,W|=H[X++]<<q,q+=8}if(ce-=Z,P.total_out+=ce,A.total+=ce,ce&&(P.adler=A.check=A.flags?a(A.check,se,ce,U-ce):o(A.check,se,ce,U-ce)),ce=Z,(A.flags?W:y(W))!==A.check){P.msg="incorrect data check",A.mode=30;break}q=W=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;q<32;){if(z===0)break e;z--,W+=H[X++]<<q,q+=8}if(W!==(4294967295&A.total)){P.msg="incorrect length check",A.mode=30;break}q=W=0}A.mode=29;case 29:$=1;break e;case 30:$=-3;break e;case 31:return-4;case 32:default:return g}return P.next_out=U,P.avail_out=Z,P.next_in=X,P.avail_in=z,A.hold=W,A.bits=q,(A.wsize||ce!==P.avail_out&&A.mode<30&&(A.mode<27||D!==4))&&M(P,P.output,P.next_out,ce-P.avail_out)?(A.mode=31,-4):(le-=P.avail_in,ce-=P.avail_out,P.total_in+=le,P.total_out+=ce,A.total+=ce,A.wrap&&ce&&(P.adler=A.check=A.flags?a(A.check,se,ce,P.next_out-ce):o(A.check,se,ce,P.next_out-ce)),P.data_type=A.bits+(A.last?64:0)+(A.mode===12?128:0)+(A.mode===20||A.mode===15?256:0),(le==0&&ce===0||D===4)&&$===m&&($=-5),$)},s.inflateEnd=function(P){if(!P||!P.state)return g;var D=P.state;return D.window&&(D.window=null),P.state=null,m},s.inflateGetHeader=function(P,D){var A;return P&&P.state&&2&(A=P.state).wrap?((A.head=D).done=!1,m):g},s.inflateSetDictionary=function(P,D){var A,H=D.length;return P&&P.state?(A=P.state).wrap!==0&&A.mode!==11?g:A.mode===11&&o(1,D,H,0)!==A.check?-3:M(P,D,H,H)?(A.mode=31,-4):(A.havedict=1,m):g},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,f,m,g,v,p,_,y){var w,x,I,R,L,S,T,C,j,M=y.bits,P=0,D=0,A=0,H=0,se=0,X=0,U=0,z=0,Z=0,W=0,q=null,le=0,ce=new i.Buf16(16),oe=new i.Buf16(16),Se=null,fe=0;for(P=0;P<=15;P++)ce[P]=0;for(D=0;D<g;D++)ce[f[m+D]]++;for(se=M,H=15;1<=H&&ce[H]===0;H--);if(H<se&&(se=H),H===0)return v[p++]=20971520,v[p++]=20971520,y.bits=1,0;for(A=1;A<H&&ce[A]===0;A++);for(se<A&&(se=A),P=z=1;P<=15;P++)if(z<<=1,(z-=ce[P])<0)return-1;if(0<z&&(h===0||H!==1))return-1;for(oe[1]=0,P=1;P<15;P++)oe[P+1]=oe[P]+ce[P];for(D=0;D<g;D++)f[m+D]!==0&&(_[oe[f[m+D]]++]=D);if(S=h===0?(q=Se=_,19):h===1?(q=o,le-=257,Se=a,fe-=257,256):(q=c,Se=u,-1),P=A,L=p,U=D=W=0,I=-1,R=(Z=1<<(X=se))-1,h===1&&852<Z||h===2&&592<Z)return 1;for(;;){for(T=P-U,j=_[D]<S?(C=0,_[D]):_[D]>S?(C=Se[fe+_[D]],q[le+_[D]]):(C=96,0),w=1<<P-U,A=x=1<<X;v[L+(W>>U)+(x-=w)]=T<<24|C<<16|j|0,x!==0;);for(w=1<<P-1;W&w;)w>>=1;if(w!==0?(W&=w-1,W+=w):W=0,D++,--ce[P]==0){if(P===H)break;P=f[m+_[D]]}if(se<P&&(W&R)!==I){for(U===0&&(U=se),L+=A,z=1<<(X=P-U);X+U<H&&!((z-=ce[X+U])<=0);)X++,z<<=1;if(Z+=1<<X,h===1&&852<Z||h===2&&592<Z)return 1;v[I=W&R]=se<<24|X<<16|L-p|0}}return W!==0&&(v[L+W]=P-U<<24|64<<16|0),y.bits=se,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),o=0,a=1;function c(F){for(var B=F.length;0<=--B;)F[B]=0}var u=0,h=29,f=256,m=f+1+h,g=30,v=19,p=2*m+1,_=15,y=16,w=7,x=256,I=16,R=17,L=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(m+2));c(M);var P=new Array(2*g);c(P);var D=new Array(512);c(D);var A=new Array(256);c(A);var H=new Array(h);c(H);var se,X,U,z=new Array(g);function Z(F,B,ne,ie,Q){this.static_tree=F,this.extra_bits=B,this.extra_base=ne,this.elems=ie,this.max_length=Q,this.has_stree=F&&F.length}function W(F,B){this.dyn_tree=F,this.max_code=0,this.stat_desc=B}function q(F){return F<256?D[F]:D[256+(F>>>7)]}function le(F,B){F.pending_buf[F.pending++]=255&B,F.pending_buf[F.pending++]=B>>>8&255}function ce(F,B,ne){F.bi_valid>y-ne?(F.bi_buf|=B<<F.bi_valid&65535,le(F,F.bi_buf),F.bi_buf=B>>y-F.bi_valid,F.bi_valid+=ne-y):(F.bi_buf|=B<<F.bi_valid&65535,F.bi_valid+=ne)}function oe(F,B,ne){ce(F,ne[2*B],ne[2*B+1])}function Se(F,B){for(var ne=0;ne|=1&F,F>>>=1,ne<<=1,0<--B;);return ne>>>1}function fe(F,B,ne){var ie,Q,de=new Array(_+1),te=0;for(ie=1;ie<=_;ie++)de[ie]=te=te+ne[ie-1]<<1;for(Q=0;Q<=B;Q++){var ue=F[2*Q+1];ue!==0&&(F[2*Q]=Se(de[ue]++,ue))}}function ee(F){var B;for(B=0;B<m;B++)F.dyn_ltree[2*B]=0;for(B=0;B<g;B++)F.dyn_dtree[2*B]=0;for(B=0;B<v;B++)F.bl_tree[2*B]=0;F.dyn_ltree[2*x]=1,F.opt_len=F.static_len=0,F.last_lit=F.matches=0}function ye(F){8<F.bi_valid?le(F,F.bi_buf):0<F.bi_valid&&(F.pending_buf[F.pending++]=F.bi_buf),F.bi_buf=0,F.bi_valid=0}function xe(F,B,ne,ie){var Q=2*B,de=2*ne;return F[Q]<F[de]||F[Q]===F[de]&&ie[B]<=ie[ne]}function be(F,B,ne){for(var ie=F.heap[ne],Q=ne<<1;Q<=F.heap_len&&(Q<F.heap_len&&xe(B,F.heap[Q+1],F.heap[Q],F.depth)&&Q++,!xe(B,ie,F.heap[Q],F.depth));)F.heap[ne]=F.heap[Q],ne=Q,Q<<=1;F.heap[ne]=ie}function Ae(F,B,ne){var ie,Q,de,te,ue=0;if(F.last_lit!==0)for(;ie=F.pending_buf[F.d_buf+2*ue]<<8|F.pending_buf[F.d_buf+2*ue+1],Q=F.pending_buf[F.l_buf+ue],ue++,ie===0?oe(F,Q,B):(oe(F,(de=A[Q])+f+1,B),(te=S[de])!==0&&ce(F,Q-=H[de],te),oe(F,de=q(--ie),ne),(te=T[de])!==0&&ce(F,ie-=z[de],te)),ue<F.last_lit;);oe(F,x,B)}function Be(F,B){var ne,ie,Q,de=B.dyn_tree,te=B.stat_desc.static_tree,ue=B.stat_desc.has_stree,me=B.stat_desc.elems,De=-1;for(F.heap_len=0,F.heap_max=p,ne=0;ne<me;ne++)de[2*ne]!==0?(F.heap[++F.heap_len]=De=ne,F.depth[ne]=0):de[2*ne+1]=0;for(;F.heap_len<2;)de[2*(Q=F.heap[++F.heap_len]=De<2?++De:0)]=1,F.depth[Q]=0,F.opt_len--,ue&&(F.static_len-=te[2*Q+1]);for(B.max_code=De,ne=F.heap_len>>1;1<=ne;ne--)be(F,de,ne);for(Q=me;ne=F.heap[1],F.heap[1]=F.heap[F.heap_len--],be(F,de,1),ie=F.heap[1],F.heap[--F.heap_max]=ne,F.heap[--F.heap_max]=ie,de[2*Q]=de[2*ne]+de[2*ie],F.depth[Q]=(F.depth[ne]>=F.depth[ie]?F.depth[ne]:F.depth[ie])+1,de[2*ne+1]=de[2*ie+1]=Q,F.heap[1]=Q++,be(F,de,1),2<=F.heap_len;);F.heap[--F.heap_max]=F.heap[1],function(Me,Ut){var js,Qn,fr,ft,Xi,Zi,pr=Ut.dyn_tree,Fu=Ut.max_code,Ol=Ut.stat_desc.static_tree,Uu=Ut.stat_desc.has_stree,zu=Ut.stat_desc.extra_bits,Ds=Ut.stat_desc.extra_base,os=Ut.stat_desc.max_length,Os=0;for(ft=0;ft<=_;ft++)Me.bl_count[ft]=0;for(pr[2*Me.heap[Me.heap_max]+1]=0,js=Me.heap_max+1;js<p;js++)os<(ft=pr[2*pr[2*(Qn=Me.heap[js])+1]+1]+1)&&(ft=os,Os++),pr[2*Qn+1]=ft,Fu<Qn||(Me.bl_count[ft]++,Xi=0,Ds<=Qn&&(Xi=zu[Qn-Ds]),Zi=pr[2*Qn],Me.opt_len+=Zi*(ft+Xi),Uu&&(Me.static_len+=Zi*(Ol[2*Qn+1]+Xi)));if(Os!==0){do{for(ft=os-1;Me.bl_count[ft]===0;)ft--;Me.bl_count[ft]--,Me.bl_count[ft+1]+=2,Me.bl_count[os]--,Os-=2}while(0<Os);for(ft=os;ft!==0;ft--)for(Qn=Me.bl_count[ft];Qn!==0;)Fu<(fr=Me.heap[--js])||(pr[2*fr+1]!==ft&&(Me.opt_len+=(ft-pr[2*fr+1])*pr[2*fr],pr[2*fr+1]=ft),Qn--)}}(F,B),fe(de,De,F.bl_count)}function k(F,B,ne){var ie,Q,de=-1,te=B[1],ue=0,me=7,De=4;for(te===0&&(me=138,De=3),B[2*(ne+1)+1]=65535,ie=0;ie<=ne;ie++)Q=te,te=B[2*(ie+1)+1],++ue<me&&Q===te||(ue<De?F.bl_tree[2*Q]+=ue:Q!==0?(Q!==de&&F.bl_tree[2*Q]++,F.bl_tree[2*I]++):ue<=10?F.bl_tree[2*R]++:F.bl_tree[2*L]++,de=Q,De=(ue=0)===te?(me=138,3):Q===te?(me=6,3):(me=7,4))}function $(F,B,ne){var ie,Q,de=-1,te=B[1],ue=0,me=7,De=4;for(te===0&&(me=138,De=3),ie=0;ie<=ne;ie++)if(Q=te,te=B[2*(ie+1)+1],!(++ue<me&&Q===te)){if(ue<De)for(;oe(F,Q,F.bl_tree),--ue!=0;);else Q!==0?(Q!==de&&(oe(F,Q,F.bl_tree),ue--),oe(F,I,F.bl_tree),ce(F,ue-3,2)):ue<=10?(oe(F,R,F.bl_tree),ce(F,ue-3,3)):(oe(F,L,F.bl_tree),ce(F,ue-11,7));de=Q,De=(ue=0)===te?(me=138,3):Q===te?(me=6,3):(me=7,4)}}c(z);var K=!1;function O(F,B,ne,ie){ce(F,(u<<1)+(ie?1:0),3),function(Q,de,te,ue){ye(Q),le(Q,te),le(Q,~te),i.arraySet(Q.pending_buf,Q.window,de,te,Q.pending),Q.pending+=te}(F,B,ne)}s._tr_init=function(F){K||(function(){var B,ne,ie,Q,de,te=new Array(_+1);for(Q=ie=0;Q<h-1;Q++)for(H[Q]=ie,B=0;B<1<<S[Q];B++)A[ie++]=Q;for(A[ie-1]=Q,Q=de=0;Q<16;Q++)for(z[Q]=de,B=0;B<1<<T[Q];B++)D[de++]=Q;for(de>>=7;Q<g;Q++)for(z[Q]=de<<7,B=0;B<1<<T[Q]-7;B++)D[256+de++]=Q;for(ne=0;ne<=_;ne++)te[ne]=0;for(B=0;B<=143;)M[2*B+1]=8,B++,te[8]++;for(;B<=255;)M[2*B+1]=9,B++,te[9]++;for(;B<=279;)M[2*B+1]=7,B++,te[7]++;for(;B<=287;)M[2*B+1]=8,B++,te[8]++;for(fe(M,m+1,te),B=0;B<g;B++)P[2*B+1]=5,P[2*B]=Se(B,5);se=new Z(M,S,f+1,m,_),X=new Z(P,T,0,g,_),U=new Z(new Array(0),C,0,v,w)}(),K=!0),F.l_desc=new W(F.dyn_ltree,se),F.d_desc=new W(F.dyn_dtree,X),F.bl_desc=new W(F.bl_tree,U),F.bi_buf=0,F.bi_valid=0,ee(F)},s._tr_stored_block=O,s._tr_flush_block=function(F,B,ne,ie){var Q,de,te=0;0<F.level?(F.strm.data_type===2&&(F.strm.data_type=function(ue){var me,De=4093624447;for(me=0;me<=31;me++,De>>>=1)if(1&De&&ue.dyn_ltree[2*me]!==0)return o;if(ue.dyn_ltree[18]!==0||ue.dyn_ltree[20]!==0||ue.dyn_ltree[26]!==0)return a;for(me=32;me<f;me++)if(ue.dyn_ltree[2*me]!==0)return a;return o}(F)),Be(F,F.l_desc),Be(F,F.d_desc),te=function(ue){var me;for(k(ue,ue.dyn_ltree,ue.l_desc.max_code),k(ue,ue.dyn_dtree,ue.d_desc.max_code),Be(ue,ue.bl_desc),me=v-1;3<=me&&ue.bl_tree[2*j[me]+1]===0;me--);return ue.opt_len+=3*(me+1)+5+5+4,me}(F),Q=F.opt_len+3+7>>>3,(de=F.static_len+3+7>>>3)<=Q&&(Q=de)):Q=de=ne+5,ne+4<=Q&&B!==-1?O(F,B,ne,ie):F.strategy===4||de===Q?(ce(F,2+(ie?1:0),3),Ae(F,M,P)):(ce(F,4+(ie?1:0),3),function(ue,me,De,Me){var Ut;for(ce(ue,me-257,5),ce(ue,De-1,5),ce(ue,Me-4,4),Ut=0;Ut<Me;Ut++)ce(ue,ue.bl_tree[2*j[Ut]+1],3);$(ue,ue.dyn_ltree,me-1),$(ue,ue.dyn_dtree,De-1)}(F,F.l_desc.max_code+1,F.d_desc.max_code+1,te+1),Ae(F,F.dyn_ltree,F.dyn_dtree)),ee(F),ie&&ye(F)},s._tr_tally=function(F,B,ne){return F.pending_buf[F.d_buf+2*F.last_lit]=B>>>8&255,F.pending_buf[F.d_buf+2*F.last_lit+1]=255&B,F.pending_buf[F.l_buf+F.last_lit]=255&ne,F.last_lit++,B===0?F.dyn_ltree[2*ne]++:(F.matches++,B--,F.dyn_ltree[2*(A[ne]+f+1)]++,F.dyn_dtree[2*q(B)]++),F.last_lit===F.lit_bufsize-1},s._tr_align=function(F){ce(F,2,3),oe(F,x,M),function(B){B.bi_valid===16?(le(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)}(F)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(o,a){if(!o.setImmediate){var c,u,h,f,m=1,g={},v=!1,p=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,c={}.toString.call(o.process)==="[object process]"?function(I){process.nextTick(function(){w(I)})}:function(){if(o.postMessage&&!o.importScripts){var I=!0,R=o.onmessage;return o.onmessage=function(){I=!1},o.postMessage("","*"),o.onmessage=R,I}}()?(f="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",x,!1):o.attachEvent("onmessage",x),function(I){o.postMessage(f+I,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(I){w(I.data)},function(I){h.port2.postMessage(I)}):p&&"onreadystatechange"in p.createElement("script")?(u=p.documentElement,function(I){var R=p.createElement("script");R.onreadystatechange=function(){w(I),R.onreadystatechange=null,u.removeChild(R),R=null},u.appendChild(R)}):function(I){setTimeout(w,0,I)},_.setImmediate=function(I){typeof I!="function"&&(I=new Function(""+I));for(var R=new Array(arguments.length-1),L=0;L<R.length;L++)R[L]=arguments[L+1];var S={callback:I,args:R};return g[m]=S,c(m),m++},_.clearImmediate=y}function y(I){delete g[I]}function w(I){if(v)setTimeout(w,0,I);else{var R=g[I];if(R){v=!0;try{(function(L){var S=L.callback,T=L.args;switch(T.length){case 0:S();break;case 1:S(T[0]);break;case 2:S(T[0],T[1]);break;case 3:S(T[0],T[1],T[2]);break;default:S.apply(a,T)}})(R)}finally{y(I),v=!1}}}}function x(I){I.source===o&&typeof I.data=="string"&&I.data.indexOf(f)===0&&w(+I.data.slice(f.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(B2);var Z7=B2.exports;const J7=Wy(Z7);function eW({onClose:t}){const{toast:e}=Gn(),[n,r]=b.useState([]),[s,i]=b.useState([]),[o,a]=b.useState([]),[c,u]=b.useState([]),[h,f]=b.useState([]),[m,g]=b.useState(!0),[v,p]=b.useState([]),[_,y]=b.useState(null),[w,x]=b.useState(!1),[I,R]=b.useState(!1),[L,S]=b.useState({startDate:"",endDate:"",oilTypeId:"all",branchId:"all",driverUid:"all",transactionType:"all",maxResults:20});b.useEffect(()=>{T()},[]),b.useEffect(()=>{C()},[L,n]);const T=async()=>{try{g(!0);const[U,z,Z,W]=await Promise.all([cw(),dw(),uw(),lw()]);r(U||[]),a(z||[]),u(Z||[]),f(W||[]);const q=new Date,le=new Date;le.setDate(q.getDate()-30),S(ce=>({...ce,startDate:le.toISOString().split("T")[0],endDate:q.toISOString().split("T")[0],maxResults:20}))}catch(U){console.error("Error loading data:",U),e({title:"Error Loading Data",description:"Failed to load transaction data. Please try again.",variant:"destructive"})}finally{g(!1)}},C=()=>{let U=[...n];if(L.startDate&&L.endDate){const z=new Date(L.startDate),Z=new Date(L.endDate);Z.setHours(23,59,59,999),U=U.filter(W=>{var le,ce,oe,Se;const q=new Date(((ce=(le=W.timestamp)==null?void 0:le.toDate)==null?void 0:ce.call(le))||W.timestamp||((Se=(oe=W.createdAt)==null?void 0:oe.toDate)==null?void 0:Se.call(oe))||W.createdAt||W.actualDeliveryStartTime||0);return q>=z&&q<=Z})}L.oilTypeId&&L.oilTypeId!=="all"&&(U=U.filter(z=>z.oilTypeId===L.oilTypeId)),L.branchId&&L.branchId!=="all"&&(U=U.filter(z=>z.branchId===L.branchId)),L.driverUid&&L.driverUid!=="all"&&(U=U.filter(z=>z.driverUid===L.driverUid)),L.transactionType&&L.transactionType!=="all"&&(U=U.filter(z=>z.type===L.transactionType)),U.sort((z,Z)=>{var le,ce,oe,Se,fe,ee,ye,xe;const W=new Date(((ce=(le=z.timestamp)==null?void 0:le.toDate)==null?void 0:ce.call(le))||z.timestamp||((Se=(oe=z.createdAt)==null?void 0:oe.toDate)==null?void 0:Se.call(oe))||z.createdAt||0);return new Date(((ee=(fe=Z.timestamp)==null?void 0:fe.toDate)==null?void 0:ee.call(fe))||Z.timestamp||((xe=(ye=Z.createdAt)==null?void 0:ye.toDate)==null?void 0:xe.call(ye))||Z.createdAt||0).getTime()-W.getTime()}),U=U.slice(0,L.maxResults),i(U)},j=()=>{S({startDate:"",endDate:"",oilTypeId:"all",branchId:"all",driverUid:"all",transactionType:"all",maxResults:20}),p([])},M=async()=>{if(v.length===0){e({title:"No Transactions Selected",description:"Please select at least one transaction to download photos.",variant:"destructive"});return}R(!0);try{const U=s.filter(Se=>v.includes(Se.id));e({title:"Preparing Download",description:"Creating zip file with all photos..."});const z=new J7;let Z=0;const W=[];for(const Se of U)Se.photos&&Object.keys(Se.photos).length>0&&Object.entries(Se.photos).forEach(([fe,ee])=>{if(ee&&ee.trim()!==""){const ye=new Promise(async xe=>{var be;try{const Ae=`/api/proxy-photo?url=${encodeURIComponent(ee)}`,Be=await fetch(Ae);if(Be.ok){const k=await Be.blob();if(k.size>0){const $=`${Se.type}_${Se.deliveryOrderNo||((be=Se.id)==null?void 0:be.slice(-6))}_${fe}.jpg`;z.file($,k),Z++}}else console.warn(`Proxy failed for ${ee}: ${Be.status} ${Be.statusText}`)}catch(Ae){console.warn(`Failed to download photo ${ee}:`,Ae)}xe()});W.push(ye)}});if(W.length===0){e({title:"No Photos Available",description:"Selected transactions don't have any photos to download.",variant:"destructive"});return}if(await Promise.allSettled(W),Z===0){e({title:"No Photos Downloaded",description:"Could not download any photos due to access restrictions.",variant:"destructive"});return}e({title:"Creating Zip File",description:`Compressing ${Z} photos...`});const q=await z.generateAsync({type:"blob"}),le=document.createElement("a"),ce=URL.createObjectURL(q);le.href=ce;const oe=new Date().toISOString().split("T")[0];le.download=`transactions_photos_${oe}_${v.length}transactions_${Z}photos.zip`,le.style.display="none",document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(ce),e({title:"Download Complete",description:`Downloaded ${Z} photos from ${v.length} transactions as ZIP file.`})}catch(U){console.error("Error creating zip download:",U),e({title:"Download Failed",description:"Failed to create photo zip file. Please try again.",variant:"destructive"})}finally{R(!1)}},P=U=>{p(z=>z.includes(U)?z.filter(Z=>Z!==U):[...z,U])},D=()=>{const U=s.map(z=>z.id);p(v.length===s.length?[]:U)},A=U=>{y(U),x(!0)},H=U=>{if(!U)return"N/A";const z=U.toDate?U.toDate():new Date(U);return z.toLocaleDateString()+" "+z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},se=U=>{switch(U){case"supply":return"bg-blue-100 text-blue-800 border-blue-200";case"loading":return"bg-green-100 text-green-800 border-green-200";case"delivery":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},X=U=>{switch(U){case"supply":return l.jsx(Ni,{className:"h-4 w-4"});case"loading":return l.jsx(Zc,{className:"h-4 w-4"});case"delivery":return l.jsx(Bh,{className:"h-4 w-4"});default:return l.jsx(PC,{className:"h-4 w-4"})}};return m?l.jsxs("div",{className:"flex items-center justify-center h-64",children:[l.jsx(ey,{className:"h-8 w-8 animate-spin"}),l.jsx("span",{className:"ml-2",children:"Loading transactions..."})]}):l.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-full",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Transaction Viewer"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"View and manage transactions with photo access"})]}),l.jsxs(we,{variant:"outline",onClick:t,className:"self-end sm:self-auto",children:[l.jsx(bl,{className:"h-4 w-4 mr-2"}),"Close"]})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"text-lg flex items-center gap-2",children:[l.jsx(I4,{className:"h-5 w-5"}),"Filters & Settings"]})}),l.jsxs(qe,{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"startDate",children:"From Date"}),l.jsx(tt,{id:"startDate",type:"date",value:L.startDate,max:L.endDate||void 0,onChange:U=>{const z=U.target.value;if(L.endDate&&z>L.endDate){e({title:"Invalid Date Range",description:"From date cannot be later than Till date.",variant:"destructive"});return}S(Z=>({...Z,startDate:z}))},className:"bg-white border-2 border-gray-300"})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"endDate",children:"Till Date"}),l.jsx(tt,{id:"endDate",type:"date",value:L.endDate,min:L.startDate||void 0,onChange:U=>{const z=U.target.value;if(L.startDate&&L.startDate>z){e({title:"Invalid Date Range",description:"Till date cannot be earlier than From date.",variant:"destructive"});return}S(Z=>({...Z,endDate:z}))},className:"bg-white border-2 border-gray-300"})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Oil Type"}),l.jsxs(dn,{value:L.oilTypeId,onValueChange:U=>S(z=>({...z,oilTypeId:U})),children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"All Oil Types"})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Oil Types"}),c.map(U=>l.jsx(Fe,{value:U.id,children:U.name},U.id))]})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Branch"}),l.jsxs(dn,{value:L.branchId,onValueChange:U=>S(z=>({...z,branchId:U})),children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"All Branches"})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Branches"}),o.map(U=>l.jsx(Fe,{value:U.id,children:U.name},U.id))]})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Driver"}),l.jsxs(dn,{value:L.driverUid,onValueChange:U=>S(z=>({...z,driverUid:U})),children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"All Drivers"})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Drivers"}),h.filter(U=>U.role==="driver").map(U=>l.jsx(Fe,{value:U.uid,children:U.displayName||U.email},U.uid))]})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Type"}),l.jsxs(dn,{value:L.transactionType,onValueChange:U=>S(z=>({...z,transactionType:U})),children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"All Types"})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Types"}),l.jsx(Fe,{value:"supply",children:"Supply"}),l.jsx(Fe,{value:"loading",children:"Loading"}),l.jsx(Fe,{value:"delivery",children:"Delivery"})]})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Max Results"}),l.jsxs(dn,{value:L.maxResults.toString(),onValueChange:U=>S(z=>({...z,maxResults:parseInt(U)})),children:[l.jsx(Yt,{children:l.jsx(hn,{})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"10",children:"10 transactions"}),l.jsx(Fe,{value:"20",children:"20 transactions"}),l.jsx(Fe,{value:"50",children:"50 transactions"}),l.jsx(Fe,{value:"100",children:"100 transactions"})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[l.jsx(we,{variant:"outline",onClick:j,className:"text-sm",children:"Clear Filters"}),l.jsx(we,{variant:"outline",onClick:D,className:"text-sm",children:v.length===s.length?"Deselect All":"Select All"}),l.jsxs(we,{onClick:M,disabled:v.length===0||I,className:"flex items-center justify-center gap-2 text-sm",children:[I?l.jsx(ey,{className:"h-4 w-4 animate-spin"}):l.jsx(Zg,{className:"h-4 w-4"}),I?"Creating ZIP...":`Download ZIP (${v.length} transactions)`]})]})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Showing ",s.length," transactions • ",v.length," selected"]}),l.jsx("div",{className:"space-y-3",children:l.jsx(U2,{className:"h-[500px]",children:s.map(U=>{var z;return l.jsx(Ue,{className:`mb-3 transition-all duration-200 cursor-pointer hover:shadow-md ${v.includes(U.id)?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,children:l.jsx(qe,{className:"p-4",children:l.jsx("div",{className:"flex items-start justify-between",children:l.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[l.jsx(C2,{checked:v.includes(U.id),onCheckedChange:()=>P(U.id),className:"mt-1"}),l.jsx("div",{className:`p-2 rounded-full ${se(U.type||"")}`,children:X(U.type||"")}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(or,{className:`${se(U.type||"")} border`,children:U.type}),l.jsx("span",{className:"text-sm font-medium",children:U.deliveryOrderNo||`Transaction #${(z=U.id)==null?void 0:z.slice(-6)}`})]}),l.jsx("span",{className:"text-xs text-gray-500",children:H(U.timestamp||U.createdAt)})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Zv,{className:"h-3 w-3 text-gray-400"}),l.jsx("span",{className:"truncate",children:U.driverName||"Unknown"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Bh,{className:"h-3 w-3 text-gray-400"}),l.jsx("span",{className:"truncate",children:U.branchName||"N/A"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Ni,{className:"h-3 w-3 text-gray-400"}),l.jsx("span",{className:"truncate",children:U.oilTypeName||"N/A"})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(zh,{className:"h-3 w-3 text-gray-400"}),l.jsxs("span",{className:"font-medium",children:[U.oilSuppliedLiters||U.totalLoadedLiters||U.actualDeliveredLiters||"N/A","L"]})]})]}),U.photos&&Object.keys(U.photos).length>0&&l.jsxs("div",{className:"mt-2 flex items-center space-x-1",children:[l.jsx(Jg,{className:"h-3 w-3 text-blue-500"}),l.jsxs("span",{className:"text-xs text-blue-500",children:[Object.keys(U.photos).length," photo(s) available"]})]})]}),l.jsx("div",{className:"flex space-x-1",children:l.jsx(we,{size:"sm",variant:"outline",onClick:Z=>{Z.stopPropagation(),A(U)},className:"h-8 w-8 p-1",children:l.jsx(zr,{className:"h-3 w-3"})})})]})})})},U.id)})})}),l.jsx(An,{open:w,onOpenChange:x,children:l.jsxs(_n,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[l.jsxs(Fi,{children:[l.jsxs(cr,{className:"flex items-center space-x-2",children:[X((_==null?void 0:_.type)||""),l.jsx("span",{children:"Transaction Details"}),l.jsx(or,{className:`${se((_==null?void 0:_.type)||"")}`,children:_==null?void 0:_.type})]}),l.jsx(zo,{children:"View detailed information and photos for this transaction"})]}),_&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{className:"font-semibold",children:"Transaction Info"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"ID:"})," ",_.id]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Date:"})," ",H(_.timestamp||_.createdAt)]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Status:"})," ",_.status||"Completed"]}),_.deliveryOrderNo&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Order No:"})," ",_.deliveryOrderNo]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{className:"font-semibold",children:"Participants"}),l.jsxs("div",{className:"space-y-1 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Driver:"})," ",_.driverName||"Unknown"]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Branch:"})," ",_.branchName||"N/A"]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Oil Type:"})," ",_.oilTypeName||"N/A"]})]})]})]}),(_.startMeterReading||_.endMeterReading||_.oilSuppliedLiters)&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{className:"font-semibold",children:"Measurements"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[_.startMeterReading&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Start Meter:"})," ",_.startMeterReading]}),_.endMeterReading&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"End Meter:"})," ",_.endMeterReading]}),_.oilSuppliedLiters&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Oil Supplied:"})," ",_.oilSuppliedLiters,"L"]}),_.totalLoadedLiters&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Total Loaded:"})," ",_.totalLoadedLiters,"L"]}),_.actualDeliveredLiters&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Delivered:"})," ",_.actualDeliveredLiters,"L"]})]})]}),_.photos&&Object.keys(_.photos).length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{className:"font-semibold",children:"Photos"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(_.photos).map(([U,z],Z)=>l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"font-medium text-sm capitalize",children:U.replace(/([A-Z])/g," $1").trim()}),l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:z,alt:U,className:"w-full h-32 object-cover rounded-lg border"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:l.jsxs(we,{size:"sm",variant:"secondary",className:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{const W=document.createElement("a");W.href=z,W.download=`${_.type}_${_.id}_${U}.jpg`,W.click()},children:[l.jsx(Zg,{className:"h-4 w-4 mr-2"}),"Download"]})})]})]},Z))})]})]})]})})]})}function tW({branches:t,oilTypes:e,onAddBranch:n,onUpdateBranch:r,onDeleteBranch:s}){const[i,o]=b.useState(!1),[a,c]=b.useState(null),[u,h]=b.useState({name:"",address:"",contactNo:"",oilTanks:[]}),{toast:f}=Gn(),m=y=>{if(y.preventDefault(),!u.name||!u.address||!u.contactNo){f({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}a?(r(a.id,{...u,oilTanks:u.oilTanks.map((w,x)=>({id:`${a.id}-tank-${x}`,...w}))}),f({title:"Success",description:"Branch updated successfully"})):(n(u),f({title:"Success",description:"Branch added successfully"})),o(!1),c(null),h({name:"",address:"",contactNo:"",oilTanks:[]})},g=()=>{h(y=>({...y,oilTanks:[...y.oilTanks,{capacity:0,oilTypeId:"",oilTypeName:"",currentLevel:0}]}))},v=(y,w,x)=>{h(I=>({...I,oilTanks:I.oilTanks.map((R,L)=>L===y?{...R,[w]:x}:R)}))},p=y=>{h(w=>({...w,oilTanks:w.oilTanks.filter((x,I)=>I!==y)}))},_=y=>{var w;c(y),h({name:y.name,address:y.address,contactNo:y.contactNo,oilTanks:((w=y.oilTanks)==null?void 0:w.map(x=>({capacity:x.capacity,oilTypeId:x.oilTypeId,oilTypeName:x.oilTypeName,currentLevel:x.currentLevel})))||[]}),o(!0)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Branch Management"}),l.jsxs(An,{open:i,onOpenChange:o,children:[l.jsx(vp,{asChild:!0,children:l.jsxs(we,{"data-testid":"button-add-branch",children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Add Branch"]})}),l.jsxs(_n,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[l.jsx(Fi,{children:l.jsx(cr,{children:a?"Edit Branch":"Add New Branch"})}),l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"name",children:"Branch Name *"}),l.jsx(tt,{id:"name",value:u.name,onChange:y=>h(w=>({...w,name:y.target.value})),"data-testid":"input-branch-name",required:!0})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"contactNo",children:"Contact Number *"}),l.jsx(tt,{id:"contactNo",value:u.contactNo,onChange:y=>h(w=>({...w,contactNo:y.target.value})),"data-testid":"input-contact-no",required:!0})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"address",children:"Address *"}),l.jsx(tt,{id:"address",value:u.address,onChange:y=>h(w=>({...w,address:y.target.value})),"data-testid":"input-address",required:!0})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Ie,{children:"Oil Tanks"}),l.jsxs(we,{type:"button",variant:"outline",size:"sm",onClick:g,children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Add Tank"]})]}),u.oilTanks.map((y,w)=>l.jsx(Ue,{className:"p-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{children:"Oil Type"}),l.jsxs(dn,{value:y.oilTypeId,onValueChange:x=>{const I=e.find(R=>R.id===x);v(w,"oilTypeId",x),v(w,"oilTypeName",(I==null?void 0:I.name)||"")},children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"Select oil type"})}),l.jsx(Xt,{children:e.map(x=>l.jsx(Fe,{value:x.id,children:x.name},x.id))})]})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Capacity (L)"}),l.jsx(tt,{type:"number",value:y.capacity,onChange:x=>v(w,"capacity",parseInt(x.target.value)||0)})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Current Level (L)"}),l.jsx(tt,{type:"number",value:y.currentLevel,onChange:x=>v(w,"currentLevel",parseInt(x.target.value)||0)})]}),l.jsx("div",{className:"flex items-end",children:l.jsx(we,{type:"button",variant:"destructive",size:"sm",onClick:()=>p(w),children:l.jsx(Ro,{className:"w-4 h-4"})})})]})},w))]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{type:"submit","data-testid":"button-save-branch",children:a?"Update Branch":"Add Branch"}),l.jsx(we,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>{var w;return l.jsxs(Ue,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center space-x-2",children:[l.jsx(Bh,{className:"w-5 h-5 text-orange-500"}),l.jsx("span",{children:y.name})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(we,{variant:"outline",size:"sm",onClick:()=>_(y),"data-testid":`button-edit-branch-${y.id}`,children:l.jsx(Xv,{className:"w-4 h-4"})}),l.jsx(we,{variant:"destructive",size:"sm",onClick:()=>s(y.id),"data-testid":`button-delete-branch-${y.id}`,children:l.jsx(Ro,{className:"w-4 h-4"})})]})]})}),l.jsx(qe,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-sm text-gray-600",children:y.address}),l.jsxs("p",{className:"flex items-center text-sm text-gray-600",children:[l.jsx(k4,{className:"w-4 h-4 mr-2"}),y.contactNo]}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("h4",{className:"font-medium mb-2",children:["Oil Tanks (",((w=y.oilTanks)==null?void 0:w.length)||0,")"]}),!y.oilTanks||y.oilTanks.length===0?l.jsx("p",{className:"text-sm text-gray-500",children:"No tanks configured"}):l.jsx("div",{className:"space-y-1",children:y.oilTanks.map((x,I)=>l.jsxs("div",{className:"text-sm bg-gray-50 p-2 rounded",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"font-medium",children:x.oilTypeName}),l.jsxs("span",{children:[x.currentLevel,"L / ",x.capacity,"L"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:l.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${Math.min(x.currentLevel/x.capacity*100,100)}%`}})})]},I))})]})]})})]},y.id)})}),t.length===0&&l.jsx(Ue,{children:l.jsxs(qe,{className:"p-8 text-center text-gray-500",children:[l.jsx(Bh,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No branches found. Add your first branch to get started."})]})})]})}const nW=[{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Yellow",value:"#eab308"},{name:"Green",value:"#22c55e"},{name:"Blue",value:"#3b82f6"},{name:"Purple",value:"#a855f7"},{name:"Pink",value:"#ec4899"},{name:"Gray",value:"#6b7280"}];function rW({oilTypes:t,onAddOilType:e,onUpdateOilType:n,onDeleteOilType:r}){const[s,i]=b.useState(!1),[o,a]=b.useState(null),[c,u]=b.useState({name:"",color:"#f97316"}),{toast:h}=Gn(),f=g=>{if(g.preventDefault(),!c.name){h({title:"Error",description:"Please enter an oil type name",variant:"destructive"});return}o?(n(o.id,c),h({title:"Success",description:"Oil type updated successfully"})):(e(c),h({title:"Success",description:"Oil type added successfully"})),i(!1),a(null),u({name:"",color:"#f97316"})},m=g=>{a(g),u({name:g.name,color:g.color||"#f97316"}),i(!0)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Oil Type Management"}),l.jsxs(An,{open:s,onOpenChange:i,children:[l.jsx(vp,{asChild:!0,children:l.jsxs(we,{"data-testid":"button-add-oil-type",children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Add Oil Type"]})}),l.jsxs(_n,{children:[l.jsx(Fi,{children:l.jsx(cr,{children:o?"Edit Oil Type":"Add New Oil Type"})}),l.jsxs("form",{onSubmit:f,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"name",children:"Oil Type Name *"}),l.jsx(tt,{id:"name",value:c.name,onChange:g=>u(v=>({...v,name:g.target.value})),placeholder:"e.g., Syn Oil, Min Oil","data-testid":"input-oil-type-name",required:!0})]}),l.jsxs("div",{children:[l.jsx(Ie,{children:"Color"}),l.jsx("div",{className:"grid grid-cols-4 gap-2 mt-2",children:nW.map(g=>l.jsx("button",{type:"button",className:`w-full h-10 rounded border-2 ${c.color===g.value?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:g.value},onClick:()=>u(v=>({...v,color:g.value})),title:g.name},g.value))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{type:"submit","data-testid":"button-save-oil-type",children:o?"Update Oil Type":"Add Oil Type"}),l.jsx(we,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"})]})]})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(g=>l.jsxs(Ue,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:g.color||"#f97316"}}),l.jsx("span",{className:"truncate",children:g.name})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(we,{variant:"outline",size:"sm",onClick:()=>m(g),"data-testid":`button-edit-oil-type-${g.id}`,children:l.jsx(Xv,{className:"w-4 h-4"})}),l.jsx(we,{variant:"destructive",size:"sm",onClick:()=>r(g.id),"data-testid":`button-delete-oil-type-${g.id}`,children:l.jsx(Ro,{className:"w-4 h-4"})})]})]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[l.jsx(Ni,{className:"w-4 h-4"}),l.jsxs("span",{children:["Created ",g.createdAt?new Date(g.createdAt).toLocaleDateString():"N/A"]})]})})})]},g.id))}),t.length===0&&l.jsx(Ue,{children:l.jsxs(qe,{className:"p-8 text-center text-gray-500",children:[l.jsx(Ni,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No oil types found. Add your first oil type to get started."}),l.jsx("p",{className:"text-sm mt-2",children:"Examples: Syn Oil, Min Oil, Diesel, etc."})]})})]})}function sW({drivers:t,onAddDriver:e,onUpdateDriver:n,onDeleteDriver:r,onToggleDriverStatus:s}){const[i,o]=b.useState(!1),[a,c]=b.useState(null),[u,h]=b.useState(!1),[f,m]=b.useState(null),[g,v]=b.useState({newPassword:"",confirmPassword:""}),[p,_]=b.useState({displayName:"",email:"",password:"",confirmPassword:"",empNo:"",driverLicenceNo:"",licenceExpiryDate:""}),{toast:y}=Gn(),w=T=>{if(T.preventDefault(),!p.displayName||!p.email||!p.driverLicenceNo||!p.licenceExpiryDate){y({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!a){if(!p.password){y({title:"Error",description:"Password is required for new drivers",variant:"destructive"});return}if(p.password!==p.confirmPassword){y({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(p.password.length<6){y({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}}a?(n(a.uid,{displayName:p.displayName,email:p.email,empNo:p.empNo,driverLicenceNo:p.driverLicenceNo,licenceExpiryDate:new Date(p.licenceExpiryDate)}),y({title:"Success",description:"Driver updated successfully"})):(e({...p,driverLicenceNo:p.driverLicenceNo,licenceExpiryDate:new Date(p.licenceExpiryDate)}),y({title:"Success",description:"Driver added successfully"})),o(!1),c(null),_({displayName:"",email:"",password:"",confirmPassword:"",empNo:"",driverLicenceNo:"",licenceExpiryDate:""})},x=async T=>{if(T.preventDefault(),!g.newPassword){y({title:"Error",description:"New password is required",variant:"destructive"});return}if(g.newPassword!==g.confirmPassword){y({title:"Error",description:"Passwords do not match",variant:"destructive"});return}if(g.newPassword.length<6){y({title:"Error",description:"Password must be at least 6 characters long",variant:"destructive"});return}try{if(!(f!=null&&f.uid))throw new Error("No driver selected");y({title:"Success",description:"Password updated successfully"}),h(!1),m(null),v({newPassword:"",confirmPassword:""})}catch{y({title:"Error",description:"Failed to update password. This feature requires backend implementation.",variant:"destructive"})}},I=T=>{m(T),h(!0),v({newPassword:"",confirmPassword:""})},R=T=>{c(T),_({displayName:T.displayName,email:T.email,password:"",empNo:T.empNo||"",tankerLicenceNo:T.tankerLicenceNo||"",licenceExpiryDate:T.licenceExpiryDate?typeof T.licenceExpiryDate=="object"&&T.licenceExpiryDate.seconds?new Date(T.licenceExpiryDate.seconds*1e3).toISOString().split("T")[0]:new Date(T.licenceExpiryDate).toISOString().split("T")[0]:""}),o(!0)},L=T=>{if(!T)return!1;const C=new Date,j=typeof T=="object"&&T.seconds?new Date(T.seconds*1e3):new Date(T);return isNaN(j.getTime())?!1:Math.floor((j.getTime()-C.getTime())/(1e3*60*60*24))<=30},S=T=>{if(!T)return!1;const C=typeof T=="object"&&T.seconds?new Date(T.seconds*1e3):new Date(T);return isNaN(C.getTime())?!1:C<new Date};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Driver Management"}),l.jsxs(An,{open:i,onOpenChange:o,children:[l.jsx(vp,{asChild:!0,children:l.jsxs(we,{"data-testid":"button-add-driver",children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Add Driver"]})}),l.jsxs(_n,{className:"max-w-lg",children:[l.jsx(Fi,{children:l.jsx(cr,{children:a?"Edit Driver":"Add New Driver"})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"displayName",children:"Driver Name *"}),l.jsx(tt,{id:"displayName",value:p.displayName,onChange:T=>_(C=>({...C,displayName:T.target.value})),"data-testid":"input-driver-name",placeholder:"Enter driver's full name",required:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This name will be displayed on driver dashboard and recorded in all transactions"})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"email",children:"Email ID (Username) *"}),l.jsx(tt,{id:"email",type:"email",value:p.email,onChange:T=>_(C=>({...C,email:T.target.value})),"data-testid":"input-driver-email",placeholder:"Enter email address (will be username for login)",required:!0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Driver will use this email as username to login to the app"})]}),l.jsxs("div",{children:[l.jsxs(Ie,{htmlFor:"password",children:["Login Password ",!a&&"*"]}),l.jsx(tt,{id:"password",type:"password",value:p.password,onChange:T=>_(C=>({...C,password:T.target.value})),"data-testid":"input-driver-password",required:!a,placeholder:a?"Leave blank to keep current password":"Enter login password (min 6 characters)"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Driver will use this password to login to the app"})]}),!a&&l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirm Login Password *"}),l.jsx(tt,{id:"confirmPassword",type:"password",value:p.confirmPassword,onChange:T=>_(C=>({...C,confirmPassword:T.target.value})),"data-testid":"input-driver-confirm-password",placeholder:"Confirm login password",required:!a})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"driverLicenceNo",children:"Driver Licence No *"}),l.jsx(tt,{id:"driverLicenceNo",value:p.driverLicenceNo,onChange:T=>_(C=>({...C,driverLicenceNo:T.target.value})),"data-testid":"input-driver-licence-no",placeholder:"Enter driver licence number",required:!0})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"licenceExpiryDate",children:"Licence Expire Date *"}),l.jsx(tt,{id:"licenceExpiryDate",type:"date",value:p.licenceExpiryDate,onChange:T=>_(C=>({...C,licenceExpiryDate:T.target.value})),"data-testid":"input-licence-expiry",required:!0})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"empNo",children:"Employee Number"}),l.jsx(tt,{id:"empNo",value:p.empNo,onChange:T=>_(C=>({...C,empNo:T.target.value})),"data-testid":"input-emp-no",placeholder:"Enter employee number (optional)"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{type:"submit","data-testid":"button-save-driver",children:a?"Update Driver":"Add Driver"}),l.jsx(we,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"})]})]})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(T=>l.jsxs(Ue,{className:"hover:shadow-md transition-shadow",children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(t1,{className:"w-5 h-5 text-blue-500"}),l.jsx("span",{className:"truncate",children:T.displayName})]}),l.jsxs("div",{className:"flex space-x-1",children:[l.jsx(we,{variant:"outline",size:"sm",onClick:()=>R(T),"data-testid":`button-edit-driver-${T.uid}`,children:l.jsx(Xv,{className:"w-4 h-4"})}),l.jsx(we,{variant:"secondary",size:"sm",onClick:()=>I(T),"data-testid":`button-change-password-${T.uid}`,title:"Change Password",children:"🔑"}),l.jsx(we,{variant:"destructive",size:"sm",onClick:()=>r(T.uid),"data-testid":`button-delete-driver-${T.uid}`,children:l.jsx(Ro,{className:"w-4 h-4"})})]})]})}),l.jsx(qe,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(or,{variant:T.active?"default":"secondary",children:T.active?"Active":"Inactive"}),l.jsx(we,{variant:"outline",size:"sm",onClick:()=>s(T.uid,!T.active),"data-testid":`button-toggle-status-${T.uid}`,children:T.active?"Deactivate":"Activate"})]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(A4,{className:"w-4 h-4 text-gray-500"}),l.jsxs("span",{children:["Emp: ",T.empNo||"Not set"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(S4,{className:"w-4 h-4 text-gray-500"}),l.jsxs("span",{children:["Licence: ",T.driverLicenceNo||T.tankerLicenceNo||"Not set"]})]}),T.licenceExpiryDate&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),l.jsxs("span",{className:S(T.licenceExpiryDate)?"text-red-600 font-medium":L(T.licenceExpiryDate)?"text-orange-600 font-medium":"text-gray-600",children:["Expires: ",typeof T.licenceExpiryDate=="object"&&T.licenceExpiryDate.seconds?new Date(T.licenceExpiryDate.seconds*1e3).toLocaleDateString():new Date(T.licenceExpiryDate).toLocaleDateString()]})]}),S(T.licenceExpiryDate)&&l.jsx(or,{variant:"destructive",className:"text-xs",children:"Licence Expired"}),!S(T.licenceExpiryDate)&&L(T.licenceExpiryDate)&&l.jsx(or,{variant:"default",className:"text-xs bg-orange-500",children:"Expiring Soon"})]}),l.jsxs("div",{className:"pt-2 text-xs text-gray-500",children:[l.jsx("p",{children:T.email}),l.jsxs("p",{children:["Joined: ",new Date(T.createdAt).toLocaleDateString()]})]})]})})]},T.uid))}),t.length===0&&l.jsx(Ue,{children:l.jsxs(qe,{className:"p-8 text-center text-gray-500",children:[l.jsx(t1,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"No drivers found. Add your first driver to get started."})]})}),l.jsx(An,{open:u,onOpenChange:h,children:l.jsxs(_n,{className:"max-w-md",children:[l.jsx(Fi,{children:l.jsxs(cr,{children:["Change Password for ",f==null?void 0:f.displayName]})}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"newPassword",children:"New Password *"}),l.jsx(tt,{id:"newPassword",type:"password",value:g.newPassword,onChange:T=>v(C=>({...C,newPassword:T.target.value})),placeholder:"Enter new password (min 6 characters)","data-testid":"input-new-password",required:!0})]}),l.jsxs("div",{children:[l.jsx(Ie,{htmlFor:"confirmNewPassword",children:"Confirm New Password *"}),l.jsx(tt,{id:"confirmNewPassword",type:"password",value:g.confirmPassword,onChange:T=>v(C=>({...C,confirmPassword:T.target.value})),placeholder:"Confirm new password","data-testid":"input-confirm-new-password",required:!0})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(we,{type:"submit","data-testid":"button-update-password",children:"Update Password"}),l.jsx(we,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})]})})]})}const $2=b.forwardRef(({className:t,...e},n)=>l.jsx("textarea",{className:Ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));$2.displayName="Textarea";function W2({onAdd:t,drivers:e}){const[n,r]=b.useState(!1),[s,i]=b.useState(!1),[o,a]=b.useState({title:"",description:"",priority:"medium",dueDate:"",assignedTo:""}),c=async h=>{if(h.preventDefault(),!(!o.title||!o.dueDate)){i(!0);try{console.log("Form data before sending:",{title:o.title,description:o.description,priority:o.priority,dueDate:new Date(o.dueDate),assignedTo:o.assignedTo||void 0}),await t({title:o.title,description:o.description,priority:o.priority,dueDate:new Date(o.dueDate),assignedTo:o.assignedTo||void 0}),a({title:"",description:"",priority:"medium",dueDate:"",assignedTo:""}),r(!1)}catch(f){console.error("Error creating task:",f),console.error("Error details:",{message:f instanceof Error?f.message:"Unknown error",code:f==null?void 0:f.code,stack:f instanceof Error?f.stack:"No stack trace"})}finally{i(!1)}}},u=h=>{switch(h){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return l.jsxs(An,{open:n,onOpenChange:r,children:[l.jsx(vp,{asChild:!0,children:l.jsxs(we,{"data-testid":"button-add-task",children:[l.jsx(ul,{className:"w-4 h-4 mr-2"}),"Add Task"]})}),l.jsx(_n,{className:"sm:max-w-[500px]",children:l.jsxs("form",{onSubmit:c,children:[l.jsxs(Fi,{children:[l.jsx(cr,{children:"Create New Task"}),l.jsx(zo,{children:"Add a new task to monitor daily operations and track progress."})]}),l.jsxs("div",{className:"grid gap-4 py-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"title",children:"Task Title *"}),l.jsx(tt,{id:"title",value:o.title,onChange:h=>a(f=>({...f,title:h.target.value})),placeholder:"Enter task title","data-testid":"input-task-title",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"description",children:"Description"}),l.jsx($2,{id:"description",value:o.description,onChange:h=>a(f=>({...f,description:h.target.value})),placeholder:"Task description and details","data-testid":"textarea-task-description",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"priority",children:"Priority"}),l.jsxs(dn,{value:o.priority,onValueChange:h=>a(f=>({...f,priority:h})),children:[l.jsx(Yt,{"data-testid":"select-task-priority",children:l.jsx(hn,{})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"low",children:l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("low")}`,children:"Low"})})}),l.jsx(Fe,{value:"medium",children:l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("medium")}`,children:"Medium"})})}),l.jsx(Fe,{value:"high",children:l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${u("high")}`,children:"High"})})})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"dueDate",children:"Due Date *"}),l.jsxs("div",{className:"relative",children:[l.jsx(tt,{id:"dueDate",type:"date",value:o.dueDate,onChange:h=>a(f=>({...f,dueDate:h.target.value})),"data-testid":"input-task-due-date",required:!0}),l.jsx(Ir,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"assignedTo",children:"Assign to Driver (Optional)"}),l.jsxs(dn,{value:o.assignedTo,onValueChange:h=>a(f=>({...f,assignedTo:h})),children:[l.jsx(Yt,{"data-testid":"select-task-driver",children:l.jsx(hn,{placeholder:"Select driver"})}),l.jsx(Xt,{children:e.map(h=>l.jsxs(Fe,{value:h.uid,children:[h.displayName," (",h.email,")"]},h.uid))})]})]})]}),l.jsxs(pR,{children:[l.jsx(we,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:s,children:"Cancel"}),l.jsx(we,{type:"submit",disabled:s,"data-testid":"button-create-task",children:s?"Creating...":"Create Task"})]})]})})]})}function da({tasks:t,onUpdate:e,onDelete:n,drivers:r}){const[s,i]=b.useState("all"),[o,a]=b.useState("all"),c=v=>{switch(v){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u=v=>{switch(v){case"completed":return l.jsx(RC,{className:"w-4 h-4"});case"in-progress":return l.jsx(cl,{className:"w-4 h-4"});case"pending":return l.jsx(Jd,{className:"w-4 h-4"});default:return l.jsx(Jd,{className:"w-4 h-4"})}},h=t.filter(v=>{const p=s==="all"||v.status===s,_=o==="all"||v.priority===o;return p&&_}),f=v=>{const p=r.find(_=>_.uid===v);return p?p.displayName:"Unassigned"},m=v=>new Date(v)<new Date&&!0,g=async(v,p)=>{await e(v,{status:p})};return t.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Jd,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tasks found"}),l.jsx("p",{className:"text-gray-500",children:"Create your first task to start tracking daily operations."})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex space-x-4 mb-6",children:[l.jsxs(dn,{value:s,onValueChange:v=>i(v),children:[l.jsx(Yt,{className:"w-40",children:l.jsx(hn,{})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Status"}),l.jsx(Fe,{value:"pending",children:"Pending"}),l.jsx(Fe,{value:"in-progress",children:"In Progress"}),l.jsx(Fe,{value:"completed",children:"Completed"})]})]}),l.jsxs(dn,{value:o,onValueChange:v=>a(v),children:[l.jsx(Yt,{className:"w-40",children:l.jsx(hn,{})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"all",children:"All Priority"}),l.jsx(Fe,{value:"high",children:"High Priority"}),l.jsx(Fe,{value:"medium",children:"Medium Priority"}),l.jsx(Fe,{value:"low",children:"Low Priority"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length}),l.jsx("p",{className:"text-sm text-gray-600",children:"Total Tasks"})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(v=>v.status==="pending").length}),l.jsx("p",{className:"text-sm text-gray-600",children:"Pending"})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.filter(v=>v.status==="in-progress").length}),l.jsx("p",{className:"text-sm text-gray-600",children:"In Progress"})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(v=>v.status==="completed").length}),l.jsx("p",{className:"text-sm text-gray-600",children:"Completed"})]})})})]}),l.jsx("div",{className:"space-y-3",children:h.map(v=>l.jsx(Ue,{className:`${m(v.dueDate)&&v.status!=="completed"?"border-red-200 bg-red-50":""}`,children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:v.title}),l.jsx(or,{className:c(v.priority),children:v.priority}),m(v.dueDate)&&v.status!=="completed"&&l.jsx(or,{className:"bg-red-100 text-red-800",children:"Overdue"})]}),v.description&&l.jsx("p",{className:"text-gray-600 text-sm mb-3",children:v.description}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Ir,{className:"w-4 h-4"}),l.jsxs("span",{children:["Due: ",new Date(v.dueDate).toLocaleDateString()]})]}),v.assignedTo&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Zv,{className:"w-4 h-4"}),l.jsx("span",{children:f(v.assignedTo)})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(dn,{value:v.status,onValueChange:p=>g(v.id,p),children:[l.jsx(Yt,{className:"w-32",children:l.jsxs("div",{className:"flex items-center space-x-1",children:[u(v.status),l.jsx(hn,{})]})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"pending",children:"Pending"}),l.jsx(Fe,{value:"in-progress",children:"In Progress"}),l.jsx(Fe,{value:"completed",children:"Completed"})]})]}),l.jsx(we,{variant:"outline",size:"sm",onClick:()=>n(v.id),"data-testid":`button-delete-task-${v.id}`,children:l.jsx(Ro,{className:"w-4 h-4"})})]})]})})},v.id))})]})}var H2="AlertDialog",[iW,FW]=ur(H2,[Gk]),Ps=Gk(),q2=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ps(e);return l.jsx(uR,{...r,...n,modal:!0})};q2.displayName=H2;var oW="AlertDialogTrigger",K2=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ps(n);return l.jsx(dR,{...s,...r,ref:e})});K2.displayName=oW;var aW="AlertDialogPortal",G2=t=>{const{__scopeAlertDialog:e,...n}=t,r=Ps(e);return l.jsx(hR,{...r,...n})};G2.displayName=aW;var lW="AlertDialogOverlay",Q2=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ps(n);return l.jsx(ww,{...s,...r,ref:e})});Q2.displayName=lW;var Ua="AlertDialogContent",[cW,uW]=iW(Ua),dW=nC("AlertDialogContent"),Y2=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Ps(n),o=b.useRef(null),a=Ye(e,o),c=b.useRef(null);return l.jsx(D$,{contentName:Ua,titleName:X2,docsSlug:"alert-dialog",children:l.jsx(cW,{scope:n,cancelRef:c,children:l.jsxs(_w,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:Te(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[l.jsx(dW,{children:r}),l.jsx(fW,{contentRef:o})]})})})});Y2.displayName=Ua;var X2="AlertDialogTitle",Z2=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ps(n);return l.jsx(xw,{...s,...r,ref:e})});Z2.displayName=X2;var J2="AlertDialogDescription",eP=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ps(n);return l.jsx(Ew,{...s,...r,ref:e})});eP.displayName=J2;var hW="AlertDialogAction",tP=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Ps(n);return l.jsx(bw,{...s,...r,ref:e})});tP.displayName=hW;var nP="AlertDialogCancel",rP=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=uW(nP,n),i=Ps(n),o=Ye(e,s);return l.jsx(bw,{...i,...r,ref:o})});rP.displayName=nP;var fW=({contentRef:t})=>{const e=`\`${Ua}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ua}\` by passing a \`${J2}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ua}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},pW=q2,mW=K2,gW=G2,sP=Q2,iP=Y2,oP=tP,aP=rP,lP=Z2,cP=eP;const yW=pW,vW=mW,wW=gW,uP=b.forwardRef(({className:t,...e},n)=>l.jsx(sP,{className:Ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));uP.displayName=sP.displayName;const dP=b.forwardRef(({className:t,...e},n)=>l.jsxs(wW,{children:[l.jsx(uP,{}),l.jsx(iP,{ref:n,className:Ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));dP.displayName=iP.displayName;const hP=({className:t,...e})=>l.jsx("div",{className:Ne("flex flex-col space-y-2 text-center sm:text-left",t),...e});hP.displayName="AlertDialogHeader";const fP=({className:t,...e})=>l.jsx("div",{className:Ne("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});fP.displayName="AlertDialogFooter";const pP=b.forwardRef(({className:t,...e},n)=>l.jsx(lP,{ref:n,className:Ne("text-lg font-semibold",t),...e}));pP.displayName=lP.displayName;const mP=b.forwardRef(({className:t,...e},n)=>l.jsx(cP,{ref:n,className:Ne("text-sm text-muted-foreground",t),...e}));mP.displayName=cP.displayName;const gP=b.forwardRef(({className:t,...e},n)=>l.jsx(oP,{ref:n,className:Ne(u0(),t),...e}));gP.displayName=oP.displayName;const yP=b.forwardRef(({className:t,...e},n)=>l.jsx(aP,{ref:n,className:Ne(u0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));yP.displayName=aP.displayName;function _W({storageUsage:t,onDeleteRecords:e}){const[n,r]=b.useState({collection:"",startDate:"",endDate:""}),[s,i]=b.useState(!1),{toast:o}=Gn(),a=async()=>{if(!n.collection||!n.startDate||!n.endDate){o({title:"Error",description:"Please fill in all fields",variant:"destructive"});return}i(!0);try{const c=new Date(n.startDate),u=new Date(n.endDate);await e(n.collection,c,u),r({collection:"",startDate:"",endDate:""})}catch(c){console.error("Error deleting records:",c)}finally{i(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs(Ue,{children:[l.jsxs(Mt,{className:"flex flex-row items-center space-y-0 pb-2",children:[l.jsx(Vt,{className:"text-lg font-semibold",children:"Firestore Database"}),l.jsx(C4,{className:"w-5 h-5 ml-2 text-blue-500"})]}),l.jsx(qe,{children:t?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Total Documents:"}),l.jsx("span",{className:"font-medium",children:t.totalDocuments.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Estimated Size:"}),l.jsx("span",{className:"font-medium",children:t.estimatedSize})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"text-sm font-medium mb-2",children:"Collections Breakdown:"}),l.jsx("div",{className:"space-y-1",children:t.collections.map(c=>l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsxs("span",{className:"capitalize text-gray-600",children:[c.collection,":"]}),l.jsxs("span",{children:[c.count," docs"]})]},c.collection))})]})]}):l.jsx("p",{className:"text-gray-500",children:"Loading storage usage..."})})]}),l.jsxs(Ue,{children:[l.jsxs(Mt,{className:"flex flex-row items-center space-y-0 pb-2",children:[l.jsx(Vt,{className:"text-lg font-semibold",children:"Firebase Storage"}),l.jsx(T4,{className:"w-5 h-5 ml-2 text-orange-500"})]}),l.jsx(qe,{children:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Photo Storage:"}),l.jsx("span",{className:"font-medium",children:"Active"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Folder Structure:"}),l.jsx("span",{className:"font-medium",children:"Organized"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),l.jsx("span",{className:"font-medium text-green-600",children:"Connected"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All delivery and loading photos are stored securely in Firebase Storage with organized folder structure."})]})})]})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center",children:[l.jsx(Ro,{className:"w-5 h-5 mr-2 text-red-500"}),"Data Cleanup"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Delete records by date range to manage storage and remove old data. This action cannot be undone."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"collection",children:"Collection"}),l.jsxs(dn,{value:n.collection,onValueChange:c=>r(u=>({...u,collection:c})),children:[l.jsx(Yt,{children:l.jsx(hn,{placeholder:"Select collection"})}),l.jsxs(Xt,{children:[l.jsx(Fe,{value:"deliveries",children:"Deliveries"}),l.jsx(Fe,{value:"complaints",children:"Complaints"}),l.jsx(Fe,{value:"tasks",children:"Tasks"}),l.jsx(Fe,{value:"branches",children:"Branches"}),l.jsx(Fe,{value:"oilTypes",children:"Oil Types"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"startDate",children:"Start Date"}),l.jsxs("div",{className:"relative",children:[l.jsx(tt,{id:"startDate",type:"date",value:n.startDate,onChange:c=>r(u=>({...u,startDate:c.target.value}))}),l.jsx(Ir,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ie,{htmlFor:"endDate",children:"End Date"}),l.jsxs("div",{className:"relative",children:[l.jsx(tt,{id:"endDate",type:"date",value:n.endDate,onChange:c=>r(u=>({...u,endDate:c.target.value}))}),l.jsx(Ir,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),l.jsxs(yW,{children:[l.jsx(vW,{asChild:!0,children:l.jsxs(we,{variant:"destructive",disabled:!n.collection||!n.startDate||!n.endDate||s,className:"w-full md:w-auto",children:[l.jsx(Ro,{className:"w-4 h-4 mr-2"}),s?"Deleting...":"Delete Records"]})}),l.jsxs(dP,{children:[l.jsxs(hP,{children:[l.jsxs(pP,{className:"flex items-center",children:[l.jsx(ty,{className:"w-5 h-5 mr-2 text-red-500"}),"Confirm Data Deletion"]}),l.jsxs(mP,{children:["Are you sure you want to delete records from ",l.jsx("strong",{children:n.collection}),"from ",l.jsx("strong",{children:n.startDate})," to ",l.jsx("strong",{children:n.endDate}),"?",l.jsx("br",{}),l.jsx("br",{}),l.jsx("strong",{className:"text-red-600",children:"This action cannot be undone!"})]})]}),l.jsxs(fP,{children:[l.jsx(yP,{children:"Cancel"}),l.jsx(gP,{onClick:a,className:"bg-red-600 hover:bg-red-700",children:"Delete Records"})]})]})]})]})})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center",children:[l.jsx(N4,{className:"w-5 h-5 mr-2 text-gray-500"}),"System Information"]})}),l.jsx(qe,{children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Application Version"}),l.jsx("p",{className:"text-sm text-gray-600",children:"OILDELIVERY v1.0.0"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Last Backup"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[new Date().toLocaleDateString()," (Automated)"]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Database Status"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Connected"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"font-medium",children:"Cloud Storage"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Online"})]})]})]})})]})]})}function lb({user:t}){var k;const[e,n]=b.useState("overview"),[r,s]=b.useState([]),[i,o]=b.useState([]),[a,c]=b.useState([]),[u,h]=b.useState([]),[f,m]=b.useState([]),[g,v]=b.useState([]),[p,_]=b.useState(null),[y,w]=b.useState(!0),[x,I]=b.useState([]),[R,L]=b.useState(null),[S,T]=b.useState(!1),[C,j]=b.useState(null),[M,P]=b.useState(!1),[D,A]=b.useState(!1),{toast:H}=Gn(),{logout:se}=qo();b.useEffect(()=>{X()},[]);const X=async()=>{try{w(!0);const[$,K,O,F,B,ne,ie,Q]=await Promise.all([hB().catch(()=>[]),fB().catch(()=>[]),lw().catch(()=>[]),gB().catch(()=>[]),_B().catch(()=>[]),_k().catch(()=>[]),CB().catch(()=>null),cw().catch(()=>[])]);s($),o(K),c(O.filter(de=>de.role==="driver")),h(F),m(B),v(ne),_(ie),I(Q)}catch($){console.error("Error loading data:",$),H({title:"Error",description:"Failed to load some data. Please refresh the page.",variant:"destructive"})}finally{w(!1)}},U=async()=>{try{await se()}catch($){console.error("Logout error:",$),localStorage.removeItem("currentUser"),window.location.href="/"}};r.filter($=>$.status==="completed").length,r.filter($=>$.status!=="completed").length,r.filter($=>$.status==="completed").reduce(($,K)=>$+(K.loadedOilLiters||0),0),a.filter($=>$.active!==!1).length,a.length,i.filter($=>$.status==="open").length,i.length,g.filter($=>$.status==="pending").length,g.filter($=>$.status==="in-progress").length;const z=async $=>{try{await pB($),await X(),H({title:"Success",description:"Driver created successfully"})}catch(K){console.error("Error creating driver:",K),H({title:"Error",description:"Failed to create driver",variant:"destructive"})}},Z=async($,K)=>{try{await GE($,K),await X(),H({title:"Success",description:"Driver updated successfully"})}catch(O){console.error("Error updating driver:",O),H({title:"Error",description:"Failed to update driver",variant:"destructive"})}},W=async $=>{try{await bB($),await X(),H({title:"Success",description:"Driver deleted successfully"})}catch(K){console.error("Error deleting driver:",K),H({title:"Error",description:"Failed to delete driver",variant:"destructive"})}},q=async($,K)=>{try{await GE($,{active:K}),await X(),H({title:"Success",description:`Driver ${K?"activated":"deactivated"} successfully`})}catch(O){console.error("Error toggling driver status:",O),H({title:"Error",description:"Failed to update driver status",variant:"destructive"})}},le=async $=>{try{await mB($),await X(),H({title:"Success",description:"Branch added successfully"})}catch(K){console.error("Error adding branch:",K),H({title:"Error",description:"Failed to add branch",variant:"destructive"})}},ce=async($,K)=>{try{await yB($,K),await X(),H({title:"Success",description:"Branch updated successfully"})}catch(O){console.error("Error updating branch:",O),H({title:"Error",description:"Failed to update branch",variant:"destructive"})}},oe=async $=>{try{await vB($),await X(),H({title:"Success",description:"Branch deleted successfully"})}catch(K){console.error("Error deleting branch:",K),H({title:"Error",description:"Failed to delete branch",variant:"destructive"})}},Se=async $=>{try{await wB($),await X(),H({title:"Success",description:"Oil type added successfully"})}catch(K){console.error("Error adding oil type:",K),H({title:"Error",description:"Failed to add oil type",variant:"destructive"})}},fe=async($,K)=>{try{await xB($,K),await X(),H({title:"Success",description:"Oil type updated successfully"})}catch(O){console.error("Error updating oil type:",O),H({title:"Error",description:"Failed to update oil type",variant:"destructive"})}},ee=async $=>{try{await EB($),await X(),H({title:"Success",description:"Oil type deleted successfully"})}catch(K){console.error("Error deleting oil type:",K),H({title:"Error",description:"Failed to delete oil type",variant:"destructive"})}},ye=async $=>{try{await wk($),await X(),H({title:"Success",description:"Task created successfully"})}catch(K){console.error("Error creating task:",K),H({title:"Error",description:"Failed to create task",variant:"destructive"})}},xe=async($,K)=>{try{await xk($,K),await X(),H({title:"Success",description:"Task updated successfully"})}catch(O){console.error("Error updating task:",O),H({title:"Error",description:"Failed to update task",variant:"destructive"})}},be=async $=>{try{await Ek($),await X(),H({title:"Success",description:"Task deleted successfully"})}catch(K){console.error("Error deleting task:",K),H({title:"Error",description:"Failed to delete task",variant:"destructive"})}},Ae=async($,K,O)=>{try{await IB($,K,O),await X(),H({title:"Success",description:"Records deleted successfully"})}catch(F){console.error("Error deleting records:",F),H({title:"Error",description:"Failed to delete records",variant:"destructive"})}},Be=()=>{if(!x||x.length===0){H({title:"No Data",description:"No transactions available to download",variant:"destructive"});return}const $=["Transaction ID","Type","Date","Driver Name","Oil Type","Quantity (L)","Branch","Start Meter","End Meter","Delivery Order","Tank Level Photo","Hose Connection Photo","Final Tank Photo","Status"],K=te=>{const ue=a.find(me=>me.uid===te||me.id===te);return ue?ue.displayName||ue.email:te||"Unknown Driver"},O=(te,ue)=>te!=null&&te.toDate?te.toDate().toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):ue?(ue.toDate?ue.toDate():new Date(ue)).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown Date",F=[...r.map(te=>({id:te.id,type:"Supply",timestamp:te.completedTimestamp,createdAt:te.createdAt,driverUid:te.driverUid,oilTypeName:te.oilTypeName,quantity:te.deliveredLiters,branchName:te.branchName,startMeterReading:te.startMeterReading,endMeterReading:te.endMeterReading,deliveryOrderId:te.deliveryOrderId,photos:te.photos||{},tankLevelPhoto:te.tankLevelPhoto,hoseConnectionPhoto:te.hoseConnectionPhoto,finalTankLevelPhoto:te.finalTankLevelPhoto,status:te.status||"completed"})),...x.map(te=>({...te,quantity:te.deliveredLiters||te.loadedLiters||te.quantity}))],B=F.map(te=>{var ue,me,De,Me,Ut;return[te.id||te.loadSessionId||"",te.type||(te.deliveredLiters?"Supply":"Loading"),O(te.timestamp,te.createdAt),K(te.driverUid),te.oilTypeName||"",te.quantity||"",te.branchName||"",te.startMeterReading||"",te.endMeterReading||"",te.deliveryOrderId||"",((ue=te.photos)==null?void 0:ue.tankLevelBefore)||((me=te.photos)==null?void 0:me.tankLevel)||te.tankLevelPhoto||"",((De=te.photos)==null?void 0:De.hoseConnection)||te.hoseConnectionPhoto||"",((Me=te.photos)==null?void 0:Me.tankLevelAfter)||((Ut=te.photos)==null?void 0:Ut.finalTankLevel)||te.finalTankLevelPhoto||"",te.status||"completed"]}),ne=[$,...B].map(te=>te.map(ue=>`"${ue}"`).join(",")).join(`
`),ie=new Blob([ne],{type:"text/csv;charset=utf-8;"}),Q=document.createElement("a"),de=URL.createObjectURL(ie);Q.setAttribute("href",de),Q.setAttribute("download",`oil_transactions_${new Date().toISOString().split("T")[0]}.csv`),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),H({title:"Export Complete",description:`Downloaded ${F.length} transactions with proper dates and driver names`})};return y?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading admin dashboard..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:l.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"OILDELIVERY"}),l.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Admin Dashboard"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[l.jsxs("div",{className:"text-right hidden sm:block",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.displayName}),l.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),l.jsxs(we,{onClick:U,variant:"outline",size:"sm",className:"flex items-center text-xs sm:text-sm px-2 sm:px-4","data-testid":"button-logout",children:[l.jsx(Yv,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Logout"}),l.jsx("span",{className:"sm:hidden",children:"Exit"})]})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-4 sm:py-8",children:l.jsxs(_2,{value:e,onValueChange:n,className:"space-y-6",children:[l.jsxs(Iw,{className:"grid w-full grid-cols-3 sm:grid-cols-6 text-xs sm:text-sm",children:[l.jsx(tr,{value:"overview",className:"text-xs sm:text-sm",children:"Overview"}),l.jsx(tr,{value:"drivers",className:"text-xs sm:text-sm",children:"Drivers"}),l.jsx(tr,{value:"branches",className:"text-xs sm:text-sm",children:"Branches"}),l.jsx(tr,{value:"oil-types",className:"text-xs sm:text-sm",children:"Oil Types"}),l.jsx(tr,{value:"tasks",className:"text-xs sm:text-sm",children:"Tasks"}),l.jsx(tr,{value:"settings",className:"text-xs sm:text-sm",children:"Settings"})]}),l.jsxs(nr,{value:"overview",className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 space-y-4 sm:space-y-0",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Admin Overview"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Today's operations and download reports"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[l.jsxs(we,{onClick:()=>A(!0),className:"bg-blue-600 hover:bg-blue-700 text-white text-sm sm:text-base","data-testid":"button-transaction-viewer",children:[l.jsx(PC,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"View Transactions"}),l.jsx("span",{className:"sm:hidden",children:"View"})]}),l.jsxs(we,{onClick:Be,className:"bg-green-600 hover:bg-green-700 text-white text-sm sm:text-base","data-testid":"button-download-csv",children:[l.jsx(Zg,{className:"h-4 w-4 mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Download All Transactions CSV"}),l.jsx("span",{className:"sm:hidden",children:"Download CSV"})]})]})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs(Vt,{className:"flex items-center",children:[l.jsx(Ni,{className:"h-5 w-5 mr-2 text-blue-600"}),"Today's Oil Delivered (by Oil Type)"]})}),l.jsx(qe,{children:l.jsx("div",{className:"space-y-4",children:(()=>{const $=new Date().toDateString(),O=r.filter(B=>B.completedTimestamp&&new Date(B.completedTimestamp).toDateString()===$).reduce((B,ne)=>{const ie=ne.oilTypeName||"Unknown";return B[ie]=(B[ie]||0)+(ne.deliveredLiters||0),B},{}),F=Object.values(O).reduce((B,ne)=>B+ne,0);return Object.keys(O).length>0?l.jsxs(l.Fragment,{children:[Object.entries(O).map(([B,ne])=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),l.jsx("span",{className:"font-medium",children:B})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-xl font-bold text-blue-600",children:[ne.toLocaleString(),"L"]})})]},B)),l.jsx("div",{className:"border-t pt-3 mt-3",children:l.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[l.jsx("span",{children:"Total Today:"}),l.jsxs("span",{className:"text-blue-600",children:[F.toLocaleString(),"L"]})]})})]}):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Ni,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{children:"No oil deliveries today"})]})})()})})]}),l.jsxs(Ue,{children:[l.jsxs(Mt,{children:[l.jsxs(Vt,{className:"flex items-center gap-2",children:[l.jsx(cl,{className:"h-5 w-5"}),"Recent Transactions (Last 10)"]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Complete history of loading and supply operations across all drivers"})]}),l.jsx(qe,{children:(()=>{const K=[...r.map(O=>({id:O.id,type:"supply",timestamp:O.completedTimestamp||O.createdAt,oilTypeName:O.oilTypeName||"Unknown Oil Type",quantity:O.deliveredLiters??O.loadedLiters??O.quantity??0,driverName:(()=>{const F=a.find(B=>B.uid===O.driverUid);return F?F.displayName||F.email:O.driverName||"Unknown Driver"})(),branchName:(()=>{const F=u.find(B=>B.id===O.branchId);return F?F.name:O.branchName||"Unknown Branch"})(),photos:{...O.photos||{},...O.tankLevelPhoto&&{tankLevel:O.tankLevelPhoto},...O.hoseConnectionPhoto&&{hoseConnection:O.hoseConnectionPhoto},...O.finalTankLevelPhoto&&{tankLevelAfter:O.finalTankLevelPhoto},...O.meterReadingPhoto&&{meterReading:O.meterReadingPhoto}},...O})),...x.filter(O=>O.type==="loading"||O.type==="supply").map(O=>({id:O.id,type:O.type,timestamp:O.timestamp||O.createdAt,oilTypeName:O.oilTypeName||"Unknown Oil Type",quantity:O.deliveredLiters??O.loadedLiters??O.quantity??0,driverName:(()=>{const F=a.find(B=>B.uid===O.driverUid);return F?F.displayName||F.email:O.driverName||"Unknown Driver"})(),branchName:O.type==="supply"?(()=>{const F=u.find(B=>B.id===O.branchId);return F?F.name:O.branchName||"Unknown Branch"})():void 0,photos:{...O.photos||{},...O.tankLevelPhoto&&{tankLevel:O.tankLevelPhoto},...O.hoseConnectionPhoto&&{hoseConnection:O.hoseConnectionPhoto},...O.finalTankLevelPhoto&&{tankLevelAfter:O.finalTankLevelPhoto},...O.loadPhoto&&{loadPhoto:O.loadPhoto}},...O}))].sort((O,F)=>{var ie,Q;const B=(ie=O.timestamp)!=null&&ie.toDate?O.timestamp.toDate():new Date(O.timestamp||0);return((Q=F.timestamp)!=null&&Q.toDate?F.timestamp.toDate():new Date(F.timestamp||0)).getTime()-B.getTime()}).slice(0,10);return K.length>0?l.jsx("div",{className:"space-y-3",children:K.map((O,F)=>{var B;return l.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${O.type==="loading"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:O.type==="loading"?"LOADING":"SUPPLY"}),l.jsx("span",{className:"font-medium",children:O.oilTypeName})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[O.quantity.toLocaleString(),"L",O.type==="supply"&&O.branchName&&l.jsxs(l.Fragment,{children:[" • Delivered to ",O.branchName]})]}),l.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[l.jsx(Ir,{className:"h-3 w-3"}),(B=O.timestamp)!=null&&B.toDate?O.timestamp.toDate().toLocaleString():"Unknown date"]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Driver: ",O.driverName]}),O.type==="supply"&&O.branchName&&l.jsxs("div",{className:"text-xs text-gray-500",children:["Branch: ",O.branchName]})]}),l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>{L(O),T(!0)},className:"flex items-center gap-2","data-testid":`button-view-transaction-${F}`,children:[l.jsx(zr,{className:"h-4 w-4"}),"View"]})]},O.id||F)})}):l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(cl,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),l.jsx("p",{children:"No recent transactions"})]})})()})]})]}),l.jsx(nr,{value:"drivers",children:l.jsx(sW,{drivers:a,onAddDriver:z,onUpdateDriver:Z,onDeleteDriver:W,onToggleDriverStatus:q})}),l.jsx(nr,{value:"branches",children:l.jsx(tW,{branches:u,oilTypes:f,onAddBranch:le,onUpdateBranch:ce,onDeleteBranch:oe})}),l.jsx(nr,{value:"oil-types",children:l.jsx(rW,{oilTypes:f,onAddOilType:Se,onUpdateOilType:fe,onDeleteOilType:ee})}),l.jsx(nr,{value:"tasks",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Task Management"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage daily operational tasks"})]}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsx(Dg,{to:"/task-management",children:l.jsxs(we,{variant:"outline",size:"sm",children:[l.jsx(Ir,{className:"w-4 h-4 mr-2"}),"View All Tasks"]})}),l.jsx(W2,{onAdd:ye,drivers:a})]})]}),l.jsx(da,{tasks:g.slice(0,5),onUpdate:xe,onDelete:be,drivers:a}),g.length>5&&l.jsx("div",{className:"text-center pt-4 border-t",children:l.jsx(Dg,{to:"/task-management",children:l.jsxs(we,{variant:"ghost",size:"sm",children:["View all ",g.length," tasks →"]})})})]})}),l.jsx(nr,{value:"settings",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:"System Settings"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage system preferences and data"})]}),l.jsx(_W,{storageUsage:p,onDeleteRecords:Ae})]})})]})}),l.jsx(An,{open:S,onOpenChange:T,children:l.jsxs(_n,{className:"max-w-2xl",children:[l.jsx(cr,{children:"Transaction Details"}),l.jsx(zo,{children:"View detailed information about this transaction including photos and metadata"}),R&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold",children:R.type==="loading"?"Oil Loading Transaction":"Oil Supply Transaction"}),l.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[l.jsx("strong",{children:"Date & Time:"})," ",(k=R.timestamp)!=null&&k.toDate?R.timestamp.toDate().toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):R.createdAt?new Date(R.createdAt).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"Unknown date"]})]}),l.jsx(or,{variant:R.type==="loading"?"default":"secondary",className:"text-lg px-3 py-1",children:R.type==="loading"?"Loading":"Supply"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),l.jsx("p",{className:`font-medium ${R.type==="loading"?"text-blue-600":"text-orange-600"}`,children:R.type==="loading"?"Oil Loading":"Oil Supply"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Oil Type"}),l.jsx("p",{className:"font-medium",children:(()=>{const $=f.find(K=>K.id===R.oilTypeId);return $?`${$.name} - ${$.viscosity}`:R.oilTypeName||"Unknown Oil Type"})()})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Quantity"}),l.jsxs("p",{className:"font-medium",children:[(R.deliveredLiters||R.loadedLiters||R.quantity||0).toLocaleString(),"L"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Driver"}),l.jsx("p",{className:"font-medium",children:(()=>{const $=a.find(K=>K.uid===R.driverUid||K.id===R.driverUid);return $?$.displayName||$.email:R.driverName||R.driverUid||"Unknown Driver"})()})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Branch"}),l.jsx("p",{className:"font-medium",children:(()=>{const $=u.find(K=>K.id===R.branchId);return $?$.name:R.branchName||"Unknown Branch"})()})]}),R.deliveryOrderId&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Delivery Order"}),l.jsx("p",{className:"font-medium",children:R.deliveryOrderId})]}),(R.startMeterReading||R.endMeterReading)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Start Meter"}),l.jsx("p",{className:"font-medium",children:R.startMeterReading||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"End Meter"}),l.jsx("p",{className:"font-medium",children:R.endMeterReading||"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),l.jsx("p",{className:"font-medium text-green-600",children:R.status||"Completed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Session ID"}),l.jsx("p",{className:"font-medium text-xs text-gray-500",children:R.loadSessionId||R.id||"N/A"})]})]}),R.photos&&Object.keys(R.photos).length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-600 block mb-2",children:"Photos"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(R.photos).map(([$,K])=>K&&l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{j({url:K,label:$.replace(/([A-Z])/g," $1").trim()}),P(!0)},children:[l.jsx("img",{src:K,alt:$,className:"w-full h-20 object-cover rounded border hover:opacity-90 transition-opacity"}),l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all rounded flex items-center justify-center",children:l.jsx(zr,{className:"h-4 w-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:$.replace(/([A-Z])/g," $1").trim()})]},$))})]})]})]})}),l.jsx(An,{open:M,onOpenChange:P,children:l.jsxs(_n,{className:"max-w-4xl w-full h-[90vh] p-0",children:[l.jsx(cr,{className:"sr-only",children:"Photo Viewer"}),l.jsxs(zo,{className:"sr-only",children:["Full size view of ",(C==null?void 0:C.label)||"delivery photo"]}),C&&l.jsxs("div",{className:"relative w-full h-full bg-black rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-medium",children:C.label}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs(we,{variant:"ghost",size:"sm",onClick:()=>{const $=document.createElement("a");$.href=C.url,$.download=`${C.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,$.click()},className:"text-white hover:bg-white/20",children:[l.jsx(Uh,{className:"h-4 w-4 mr-1"}),"Download"]}),l.jsx(we,{variant:"ghost",size:"sm",onClick:()=>P(!1),className:"text-white hover:bg-white/20",children:l.jsx(bl,{className:"h-4 w-4"})})]})]}),l.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:l.jsx("img",{src:C.url,alt:C.label,className:"max-w-full max-h-full object-contain",style:{maxHeight:"calc(100vh - 120px)"}})}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white p-4 z-10 flex justify-center space-x-4",children:[l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>window.open(C.url,"_blank"),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[l.jsx(zr,{className:"h-4 w-4 mr-1"}),"Open in New Tab"]}),l.jsxs(we,{variant:"outline",size:"sm",onClick:()=>{const $=document.createElement("a");$.href=C.url,$.download=`${C.label.replace(/\s+/g,"_")}_${new Date().getTime()}.jpg`,$.click()},className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[l.jsx(Uh,{className:"h-4 w-4 mr-1"}),"Download Photo"]})]})]})]})}),D&&l.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4",children:l.jsx("div",{className:"w-full max-w-7xl max-h-[95vh] sm:max-h-[90vh] overflow-auto bg-white rounded-lg p-3 sm:p-6",children:l.jsx(eW,{onClose:()=>A(!1)})})})]})}function xW(){const[t,e]=b.useState([]),[n,r]=b.useState([]),[s,i]=b.useState(!0),[o,a]=b.useState("all"),{toast:c}=Gn(),{userData:u}=qo(),h=async()=>{try{i(!0);const[I,R]=await Promise.all([_k(),lw()]);e(I),r(R.filter(L=>L.role==="driver"))}catch(I){console.error("Error loading data:",I),c({title:"Error",description:"Failed to load tasks and drivers",variant:"destructive"})}finally{i(!1)}};b.useEffect(()=>{h()},[]);const f=async I=>{try{await wk(I),await h(),c({title:"Success",description:"Task created successfully"})}catch(R){console.error("Error creating task:",R),c({title:"Error",description:"Failed to create task",variant:"destructive"})}},m=async(I,R)=>{try{await xk(I,R),await h(),c({title:"Success",description:"Task updated successfully"})}catch(L){console.error("Error updating task:",L),c({title:"Error",description:"Failed to update task",variant:"destructive"})}},g=async I=>{try{await Ek(I),await h(),c({title:"Success",description:"Task deleted successfully"})}catch(R){console.error("Error deleting task:",R),c({title:"Error",description:"Failed to delete task",variant:"destructive"})}},v=I=>!I||I==="all"?t:t.filter(R=>R.status===I),p=()=>{const I=new Date;I.setHours(0,0,0,0);const R=new Date(I);return R.setDate(R.getDate()+1),t.filter(L=>{const S=new Date(L.dueDate);return S.setHours(0,0,0,0),S>=I&&S<R})},_=()=>{const I=new Date;return I.setHours(23,59,59,999),t.filter(R=>new Date(R.dueDate)<I&&R.status!=="completed")},y=v("pending"),w=p(),x=_();return s?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading tasks..."})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[l.jsx("header",{className:"bg-gradient-to-r from-blue-600 to-blue-800 shadow-lg",children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-14 sm:h-16",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"bg-white rounded-full w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center mr-3 shadow-lg p-1",children:l.jsx("img",{src:"/logo.png",alt:"OilDelivery Logo",className:"w-full h-full object-contain"})}),l.jsxs("div",{className:"text-white",children:[l.jsx("h1",{className:"text-lg sm:text-xl font-bold",children:"OILDELIVERY"}),l.jsx("p",{className:"text-xs sm:text-sm text-blue-100",children:"Task Management"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Dg,{to:"/admin-dashboard",children:l.jsxs(we,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/10",children:[l.jsx(E4,{className:"w-4 h-4 mr-1"}),l.jsx("span",{className:"hidden sm:inline",children:"Back to Dashboard"})]})}),l.jsxs("div",{className:"text-white text-right",children:[l.jsx("p",{className:"text-xs sm:text-sm font-medium",children:u==null?void 0:u.displayName}),l.jsx("p",{className:"text-xs text-blue-100 capitalize",children:u==null?void 0:u.role})]})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(cl,{className:"h-8 w-8 text-yellow-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y.length})]})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ir,{className:"h-8 w-8 text-blue-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.length})]})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(ty,{className:"h-8 w-8 text-red-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]})]})})}),l.jsx(Ue,{children:l.jsx(qe,{className:"p-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(RC,{className:"h-8 w-8 text-green-600"}),l.jsxs("div",{className:"ml-3",children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})})})]}),l.jsxs(Ue,{children:[l.jsx(Mt,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx(Vt,{children:"Task Management"}),l.jsx(bI,{children:"Create and manage daily operational tasks"})]}),l.jsx(W2,{onAdd:f,drivers:n})]})}),l.jsx(qe,{children:l.jsxs(_2,{value:o,onValueChange:a,children:[l.jsxs(Iw,{className:"grid w-full grid-cols-5",children:[l.jsx(tr,{value:"all",children:"All Tasks"}),l.jsx(tr,{value:"pending",children:"Pending"}),l.jsx(tr,{value:"today",children:"Today"}),l.jsx(tr,{value:"overdue",children:"Overdue"}),l.jsx(tr,{value:"completed",children:"Completed"})]}),l.jsx(nr,{value:"all",className:"mt-6",children:l.jsx(da,{tasks:v("all"),onUpdate:m,onDelete:g,drivers:n})}),l.jsx(nr,{value:"pending",className:"mt-6",children:l.jsx(da,{tasks:y,onUpdate:m,onDelete:g,drivers:n})}),l.jsx(nr,{value:"today",className:"mt-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[l.jsx(Ir,{className:"h-5 w-5 text-blue-600"}),l.jsxs("h3",{className:"font-semibold text-blue-900",children:["Today's Deadline (",w.length," tasks)"]})]}),l.jsx(da,{tasks:w,onUpdate:m,onDelete:g,drivers:n})]})}),l.jsx(nr,{value:"overdue",className:"mt-6",children:l.jsxs("div",{className:"space-y-4",children:[x.length>0&&l.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg border border-red-200",children:[l.jsx(ty,{className:"h-5 w-5 text-red-600"}),l.jsxs("h3",{className:"font-semibold text-red-900",children:["Overdue Tasks (",x.length,")"]})]}),l.jsx(da,{tasks:x,onUpdate:m,onDelete:g,drivers:n})]})}),l.jsx(nr,{value:"completed",className:"mt-6",children:l.jsx(da,{tasks:v("completed"),onUpdate:m,onDelete:g,drivers:n})})]})})]})]})]})}function EW(){return l.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:l.jsx(Ue,{className:"w-full max-w-md mx-4",children:l.jsxs(qe,{className:"pt-6",children:[l.jsxs("div",{className:"flex mb-4 gap-2",children:[l.jsx(Jd,{className:"h-8 w-8 text-red-500"}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),l.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function bW(){const{userData:t,isLoading:e}=qo();return e?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:l.jsxs("div",{className:"text-white text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-4"}),l.jsx("p",{children:"Loading..."})]})}):t?l.jsxs($O,{children:[t.role==="admin"?l.jsxs(l.Fragment,{children:[l.jsx(ro,{path:"/",component:()=>l.jsx(lb,{user:t})}),l.jsx(ro,{path:"/admin-dashboard",component:()=>l.jsx(lb,{user:t})}),l.jsx(ro,{path:"/task-management",component:()=>l.jsx(xW,{})})]}):t.role==="driver"?l.jsxs(l.Fragment,{children:[l.jsx(ro,{path:"/",component:()=>l.jsx(ob,{user:t})}),l.jsx(ro,{path:"/driver-dashboard",component:()=>l.jsx(ob,{user:t})})]}):l.jsx(ro,{path:"/",component:OB}),l.jsx(ro,{component:EW})]}):l.jsx(AB,{})}function TW(){return l.jsx(uL,{client:SL,children:l.jsxs(V3,{children:[l.jsx(hM,{}),l.jsx(bW,{})]})})}try{console.log("Starting OILDELIVERY app initialization...");const t=document.getElementById("root");if(!t)throw new Error("Root element not found");console.log("Root element found, creating React app..."),RS(t).render(l.jsx(TW,{})),console.log("React app rendered successfully")}catch(t){console.error("App initialization failed:",t),document.body.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: linear-gradient(to bottom right, #f59e0b, #ea580c);
      font-family: system-ui, -apple-system, sans-serif;
    ">
      <div style="
        background: white; 
        padding: 2rem; 
        border-radius: 0.5rem; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
        max-width: 400px;
      ">
        <h1 style="color: #dc2626; margin: 0 0 1rem 0;">OILDELIVERY</h1>
        <p style="color: #374151; margin: 0 0 1rem 0;">
          App is loading... If this persists, please contact support.
        </p>
        <p style="color: #6b7280; font-size: 0.875rem; margin: 0;">
          Error: ${t.message}
        </p>
      </div>
    </div>
  `}
